{"version":3,"sources":["../node_modules/n3/lib sync /^/N3.*$","../node_modules/@trust/webcrypto/src/algorithms sync","Actions/actionTypes.ts","config.ts","Reducers/accountReducer.ts","Reducers/dialogsReducer.ts","Reducers/itemsReducer.ts","Reducers/pathReducer.ts","Reducers/uploadReducer.ts","Reducers/reducer.ts","Reducers/currentBlobReducer.ts","Reducers/errorReducer.ts","Reducers/loadingReducer.ts","serviceWorker.ts","Api/Item.ts","Api/folderUtils.ts","Api/AclItem.ts","Api/aclUtils.ts","Api/Api.ts","Api/ApiHandler.ts","Api/ApiCache.ts","Actions/Actions.ts","Components/File/File.tsx","Components/FileList/FileListEmptyMessage.tsx","Components/Loader/Loader.tsx","Components/FileList/FileList.tsx","Components/ContextMenu/ContextMenuActions/CreateFolderAction.tsx","Components/ContextMenu/ContextMenuActions/CreateFileAction.tsx","Components/ContextMenu/ContextMenuActions/UploadFileAction.tsx","Components/Navbar/ThreeDotsMenu.tsx","Components/Breadcrumb/BreadcrumbText.tsx","Components/Navbar/Navbar.tsx","Components/ContextMenu/ContextMenuActions/OpenAction.tsx","Components/ContextMenu/ContextMenuActions/RemoveAction.tsx","Components/ContextMenu/ContextMenuActions/MoveAction.tsx","Components/ContextMenu/ContextMenuActions/CopyAction.tsx","Components/ContextMenu/ContextMenuActions/EditAction.tsx","Components/ContextMenu/ContextMenuActions/RenameAction.tsx","Components/ContextMenu/ContextMenuActions/ZipAction.tsx","Components/ContextMenu/ContextMenuActions/ExtractAction.tsx","Components/ContextMenu/ContextMenuActions/DownloadAction.tsx","Components/ContextMenu/ContextMenuActions/OpenInNewTabAction.tsx","Components/ContextMenu/ContextMenuActions/UploadMetadataAction.tsx","Components/ContextMenu/ContextMenuActions/AccessControlAction.tsx","Components/ContextMenu/ContextMenuActions/AddNewVersionActions.tsx","Components/ContextMenu/ContextMenuActions/ExposeMetadataAction.tsx","Components/ContextMenu/ContextMenuActions/RevertVersionAction.tsx","Components/ContextMenu/ContextMenu.tsx","Components/HistoryHandler/HistoryHandler.tsx","Components/Dialogs/Menu/Menu.tsx","Components/Dialogs/Content/Content.tsx","Components/Dialogs/Media/Media.tsx","Components/Dialogs/Edit/Edit.tsx","Components/Dialogs/CreateFolder/CreateFolder.tsx","Components/Dialogs/CreateFile/CreateFile.tsx","Components/Dialogs/Rename/Rename.tsx","Components/File/FileSublist/FileSublist.tsx","Components/FileList/FileListSublist/FileListSublist.tsx","Components/Dialogs/ChooseLocation/ChooseLocation.tsx","Components/Dialogs/Move/Move.tsx","Components/Dialogs/Copy/Copy.tsx","Components/FileUploader/UploadFileList.tsx","Components/FileUploader/FileUploader.tsx","Components/Dialogs/UploadFile/UploadFile.tsx","Components/Dialogs/UploadMetadata/Discipline.tsx","Components/Dialogs/UploadMetadata/UploadMetadata.tsx","Components/Dialogs/AccessControl/AccessControl.tsx","Components/Dialogs/AddNewVersion/AddNewVersion.tsx","Components/Dialogs/ExposeMetadata/ExposeMetadata.tsx","Components/Dialogs/Dialogs.tsx","Components/Notification/DynamicSnackbar.tsx","App.tsx","index.tsx"],"names":["map","./N3Lexer","./N3Lexer.js","./N3Parser","./N3Parser.js","./N3Store","./N3Store.js","./N3StreamParser","./N3StreamParser.js","./N3StreamWriter","./N3StreamWriter.js","./N3Util","./N3Util.js","./N3Writer","./N3Writer.js","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","webpackEmptyContext","DIALOGS","host","config","getHost","setHost","newHost","endsWith","slice","initialState","loggedIn","webId","initialVisibleDialogs","values","name","defineProperty","reduce","prev","cur","objectSpread","initialContextMenuState","open","x","y","initialItemsState","inCurFolder","filter","selected","removeItem","items","item","selectedItem","equals","addItem","concat","toConsumableArray","initialPath","initialUploadState","fileList","progress","rootReducer","combineReducers","account","state","arguments","length","undefined","action","type","value","blob","URL","createObjectURL","revokeObjectURL","contextMenu","visibleDialogs","errorMessage","includes","loading","path","upload","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","Item","url","size","classCallCheck","this","_name","_path","_url","_size","getPathFromUrl","pop","createClass","key","every","val","index","decodeURI","getHumanFileSize","get","FileItem","_Item","possibleConstructorReturn","getPrototypeOf","apply","inherits","patterns","image","test","media","editable","extractable","metadata","notUpdatable","version","video","FolderItem","_Item2","byteString","bytes","parseInt","Math","pow","toFixed","urlString","pathname","split","getFolderItems","graph","subj","files","folders","each","rdflib","forEach","subjectName","subjectNode","nsSize","any","getSizeByGraph","baseUrl","folderNode","isAnInstanceOfClass","types","some","_ref","isFolder","push","text2graph","_x","_x2","_text2graph","_callee","text","contentType","_args","regenerator_default","a","wrap","_context","next","guessFileType","abrupt","Promise","reject","stop","ext","replace","AclItem","agent","accessTo","read","write","append","control","isGroup","_key","_agent","_accessTo","_read","_write","_append","_control","_isGroup","aclNamespace","pavOntology","dublinCoreOntology","schemaOntology","parseACl","acls","i","subject","checkIsGroup","getAgentName","getAccessToByGraph","getMode","integrateInfo","content","dataURL","ttlURL","updater","newStatement","wholeTtlNode","metadataNode","update","uri","ok","message","saveNewVersion","fileName","folderPath","newVersion","oldVersion","oldStatement","oldFileUrl","newNodePrevVer","exposeMetadata","remoteRegistryUrl","newContent","updatedSubj","remotedGraph","keyword","discipline","getVersion","versionNum","getContent","root","buildACLContent","aclList","arrAuth","arrMode","join","agentType","modeName","mode","agentClass","fileClient","require","createACL","_x3","_createACL","filePath","createFile","fileCreated","updateFile","success","err","fetchFile","_x4","_x5","_fetchFile","_callee2","_context2","buildFileUrl","solidAuth","assertSuccessfulResponse","fetchRemoteFile","_x6","_fetchRemoteFile","_callee3","_context3","fetchFolder","_x7","_x8","_fetchFolder","_callee4","folderName","_context4","buildFolderUrl","headers","Accept","readFolder","_x9","_x10","_readFolder","_callee5","response","folderRDF","folderItems","_context5","sent","folderUtils","_callee7","_context7","aclUtils","_callee8","metadataFileName","_context8","_callee9","remoteRegistryURL","registryRDF","_context9","_callee10","destination","itemNames","_context10","copyItems","removeItems","_callee11","oldName","newName","_context11","copyFile","_callee12","oldFolderName","newFolderName","_context12","copyFolder","removeFolderRecursively","_x32","_x33","_x34","_copyItems","_callee13","promises","_context13","_ref2","_ref3","_ref4","_ref5","all","Response","_x35","_x36","_x37","_x38","_copyFile","_callee14","originPath","originName","destinationPath","destinationName","fileResponse","_context14","_x39","_x40","_x41","_x42","_copyFolder","_callee15","_ref6","_context15","createFolder","_ref7","_ref8","_callee16","_context16","Array","from","file","_x45","_x46","_createFolder","_callee17","_context17","folderExists","createItem","Blob","_x47","_x48","_x49","_updateFile","_callee18","_context18","_callee19","aclItem","_context19","_x53","_x54","_x55","_createFile","_callee20","_context20","_callee21","itemName","link","request","_context21","method","slug","Content-Type","body","_x60","_x61","_removeItems","_callee22","_context22","_x62","_x63","_removeItem","_callee23","_context23","status","_x64","_x65","_removeFolderRecursively","_callee24","_context24","removeFolderContents","_x66","_x67","_removeFolderContents","_callee25","_ref9","_context25","_ref10","_ref11","_x68","_x69","_folderExists","_callee26","_context26","t0","cache","_data","itemList","hasOwnProperty","_this","_len","paths","contains","handleFetchError","asyncToGenerator","mark","detailedErrorMessage","displayErrorMessage","displayMessages","group","401","403","404","500","stack","JSON","stringify","groupEnd","fixPath","getItemList","API","add","getBasedURL","p","getFileBlob","filename","renameFile","newFileName","remove","_x26","_x27","_x28","_renameFile","renameFolder","_x29","_x30","_x31","_renameFolder","trim","moveItems","filenames","_x23","_x24","_x25","_moveItems","uploadFiles","_x43","_x44","_upload","dataFileName","_x17","_x18","_x19","_integrateInfo","updateACL","_x50","_x51","_x52","_updateACLFile","getAsZip","zip","JSZip","addItemsToZip","zipFolder","folder","binary","extractZipArchive","_args3","loadAsync","uploadExtractedZipArchive","curFolder","_args5","getItemsInZipFolder","relativePath","getItemNameFromPath","getParentPathFromPath","dir","async","substr","lastIndexOf","solidLogin","dispatch","getState","displayLoading","solidPopupLogin","session","updateLoginStatus","r","setErrorMessage","String","finally","stopLoading","setWebId","setLoggedIn","setLoggedOut","resetWebId","popupUri","clearCache","clear","handleExposeData","_getState2","resetSelectedItems","_x20","_x21","_x22","_exposeMetadata","closeDialog","EXPOSE_METADATA","displayCurrentItemList","handleAddNewVersion","preVersion","currentVersion","_getState3","setFileUploadProgress","resetNewVersionUploader","_x13","_x14","_x15","_x16","_updateVersion","updateVersion","APIHandler","setTimeout","f","getFilePathUrl","getProfileUrl","createResearchDataACL","filepath","profilePath","find","getDisplayName","createMetadataACL","setItems","refreshItemList","promptDownload","msSaveOrOpenBlob","document","createElement","href","download","appendChild","click","removeChild","getFileContent","resetFileContent","setFileContent","loadAndEditFile","openDialog","EDIT","loadAndDisplayFile","CONTENT","displaySelectedMediaFile","MEDIA","targetPath","COPY","setSelectedItemsFromLastTo","lastFile","_getState25$items","selectedItems","lastPreviouslySelected","lastPreviouslySelectedIndex","indexOf","lastSelectedIndex","isInRange","num","start","end","toAdd","selectItems","resetFileUploader","UPLOAD_FILE","resetFileUploadList","ADD_NEW_VERSION","resetMetadataUploader","UPLOAD_METADATA","enterFolder","setPath","resetFilter","enterFolderByItem","makeActionCreator","moveFolderUpwards","resetPath","resetItems","selectItem","toggleSelectedItem","filterItems","setFileUploadList","openContextMenu","closeContextMenu","File","_this$props","props","isSelected","handleClick","handleDoubleClick","handleContextMenu","avatarStyle","backgroundColor","blue","realSize","getDisplaySize","react_default","className","onClick","onDoubleClick","onContextMenu","data-selected","ListItem_default","ListItemAvatar_default","Avatar_default","style","InsertDriveFile_default","Folder_default","ListItemText_default","primary","secondary","Component","connect","ownProps","isEditable","isImage","isMedia","event","preventDefault","stopPropagation","nativeEvent","MouseEvent","clientX","clientY","TouchEvent","touches","pageX","pageY","warn","shiftKey","ctrlKey","FileListEmptyMessage","withStyles","theme","createStyles","margin","spacing","unit","Grid_default","container","justify","CircularProgress_default","classes","color","FileList","isLoading","itemComponents","Components_File_File","Loader_Loader","FileListEmptyMessage_FileListEmptyMessage","filterMatch","first","second","toLocaleLowerCase","CREATE_FOLDER","callback","handleClose","MenuItem_default","ListItemIcon_default","CreateNewFolder_default","Typography_default","variant","CREATE_FILE","CloudUpload_default","ThreeDotsMenu","anchorEl","setState","currentTarget","marginLeft","IconButton_default","aria-label","aria-owns","aria-haspopup","MoreVert_default","Menu_default","onClose","ContextMenuActions_CreateFolderAction","ContextMenuActions_CreateFileAction","ContextMenuActions_UploadFileAction","React","BreadcrumbText","handleClickPath","rootTitle","handleGoBack","canGoBack","separator","rootPath","data-index","lastPath","directories","Button_default","display","KeyboardArrowLeft_default","breakpoints","up","width","marginBottom","grow","flexGrow","menuButton","marginRight","title","search","position","borderRadius","shape","fade","palette","common","white","&:hover","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","refreshIcon","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","&:focus","handleChange","moveUpwards","n","moveFolderUpwardsAndRefresh","handleRefresh","AppBar_default","Toolbar_default","noWrap","Components_Breadcrumb_BreadcrumbText","Search_default","InputBase_default","placeholder","onChange","input","Refresh_default","Navbar_ThreeDotsMenu","OpenInBrowser_default","Delete_default","MOVE","HowToVote_default","FileCopy_default","RENAME","WrapText_default","archiveName","generateAsync","Archive_default","Unarchive_default","_getState16","downloadName","CloudDownload_default","Link_default","ACCESS_CONTROL","Settings_default","alert","SettingsBackupRestore_default","ContextMenu","acts","anchorReference","anchorPosition","top","left","transformOrigin","vertical","horizontal","PaperProps","ContextMenuActions_OpenAction","ContextMenuActions_OpenInNewTabAction","ContextMenuActions_UploadMetadataAction","ContextMenuActions_AccessControlAction","AddNewVersionActions","ContextMenuActions_ExposeMetadataAction","ContextMenuActions_RevertVersionAction","ContextMenuActions_DownloadAction","ContextMenuActions_ZipAction","ContextMenuActions_ExtractAction","EditAction","ContextMenuActions_CopyAction","ContextMenuActions_MoveAction","RenameAction","ContextMenuActions_RemoveAction","getActionsForMultipleItems","getActionsForItem","getActionsForFile","getActionsForFolder","actions","isNotUpdateable","isExtractable","isMetadata","isVersionFile","HistoryHandler","call","history","states","stateIndex","createBrowserHistory","listen","handlePop","handleReplace","handlePush","updateBrowserHistory","prevState","locationsEqual","_this$props2","encodeURI","newState","Fragment","getLocationObjectFromUrl","origin","_location$state","URLSearchParams","_getLocationObjectFro","FormDialog","isLoggedIn","encodedUrl","targetForm","form","querySelector","handleSubmit","handleLogin","handleLogout","Dialog_default","aria-labelledby","fullWidth","maxWidth","DialogTitle_default","DialogContent_default","gutterBottom","core_Link_default","TextField_default","autoFocus","label","bind","DialogActions_default","CHOOSE_LOCATION","lastBlobUrl","blobUrl","src","alt","isVideo","react_plyr_lib_default","iconUrl","textField","createRef","_this2","fetch","t","current","textArea","minHeight","defaultValue","ref","DialogContentText_default","handleSave","updateTextFile","inputRef","createNewFolder","previousName","FileSublist","FileListSublist","handleOpenFolder","FileSublist_FileSublist","initialHost","prevProps","updateItems","ApiHandler","actionName","_this$state","FileList_FileListSublist_FileListSublist","disabled","move","targetLocation","ChooseLocation","copy","UploadFileList","list","dense","List_default","component","FileUploader","inputElement","handleReset","handleSelectedFiles","styles","inputfile","inputreset","htmlFor","multiple","FileUploader_UploadFileList","canUpload","Components_FileUploader_FileUploader","LinearProgress_default","_getState4","target","green","&$checked","checked","Checkbox_default","assign","CheckboxLabels","_React$useState","useState","checkedA","checkedB","checkedC","checkedD","checkedE","checkedF","checkedG","_React$useState2","slicedToArray","FormGroup_default","row","FormControlLabel_default","activeIndex","updateInput","inputVal","_","VerticalTabs","MyTab","index_es","aria-describedby","flexContainer","flexDirection","indicator","Tabs","borderBottom","Tab","_getState6","uploadMetadata","handleTextChange","handleNewTextChange","handleDelete","splice","button","toString","handleNewChange","handleAdd","validURL","resetState","destFile","str","RegExp","_this3","Table_default","padding","TableHead_default","TableRow_default","TableCell_default","TableBody_default","AddBox_default","nextVersion","ExposeMetadata","metadatainfo","Dialogs","Menu_Menu","Content","Media","Edit","CreateFolder","CreateFile","Move","Copy","Rename","UploadFile","UploadMetadata","AddNewVersion","Dialogs_ExposeMetadata_ExposeMetadata","AccessControl","DynamicSnackbar","errorMsg","notificationDuration","Snackbar_default","anchorOrigin","autoHideDuration","ContentProps","close","Close_default","createMuiTheme","typography","useNextVariants","App","init","core_styles","handleHideContextMenu","Navbar","Components_FileList_FileList","Components_ContextMenu_ContextMenu","Notification_DynamicSnackbar","Dialogs_Dialogs","Components_HistoryHandler_HistoryHandler","element","tagName","store","createStore","reducer","applyMiddleware","thunk","ReactDOM","render","react_redux_es","src_App","getElementById","process","addEventListener","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.7e6c6be2.chunk.js","sourcesContent":["var map = {\n\t\"./N3Lexer\": 192,\n\t\"./N3Lexer.js\": 192,\n\t\"./N3Parser\": 193,\n\t\"./N3Parser.js\": 193,\n\t\"./N3Store\": 258,\n\t\"./N3Store.js\": 258,\n\t\"./N3StreamParser\": 259,\n\t\"./N3StreamParser.js\": 259,\n\t\"./N3StreamWriter\": 265,\n\t\"./N3StreamWriter.js\": 265,\n\t\"./N3Util\": 194,\n\t\"./N3Util.js\": 194,\n\t\"./N3Writer\": 198,\n\t\"./N3Writer.js\": 198\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 475;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 655;","import { Item } from \"../Api/Item\";\r\n\r\nexport interface Action<V> {\r\n    type: string;\r\n    value: V;\r\n};\r\n\r\nexport const SET_ERROR_MESSAGE = 'SET_ERROR_MESSAGE';\r\nexport const ENTER_FOLDER = 'ENTER_FOLDER';\r\nexport const MOVE_FOLDER_UPWARDS = 'MOVE_FOLDER_UPWARDS';\r\nexport const SET_PATH = 'SET_PATH';\r\n\r\nexport const SET_LOGGED_IN = 'SET_LOGGED_IN';\r\nexport const SET_LOGGED_OUT = 'SET_LOGGED_OUT';\r\nexport const RESET_HOST = 'RESET_HOST';\r\nexport const SET_HOST = 'SET_HOST'; // TODO: Consider renaming to BASE_URL\r\nexport const RESET_WEB_ID = 'RESET_WEB_ID';\r\nexport const SET_WEB_ID = 'SET_WEB_ID';\r\n\r\nexport const SET_ITEMS = 'SET_ITEMS';\r\nexport const SET_ACLITEMS = 'SET_ACLITEMS';\r\n\r\nexport const SELECT_ITEMS = 'SELECT_ITEMS';\r\nexport const TOGGLE_SELECTED_ITEM = 'TOGGLE_SELECTED_ITEM';\r\nexport const DESELECT_ITEM = 'DESELECT_ITEM';\r\n\r\nexport const FILTER_ITEMS = 'FILTER_ITEMS';\r\nexport const RESET_FILTER = 'REMOVE_FILTER';\r\n\r\nexport const DISPLAY_LOADING = 'DISPLAY_LOADING';\r\nexport const STOP_LOADING = 'STOP_LOADING';\r\n\r\nexport const RESET_LOADED_BLOB = 'RESET_LOADED_BLOB';\r\nexport const SET_LOADED_BLOB = 'SET_LOADED_BLOB';\r\n\r\nexport const SET_UPLOAD_FILE_PROGRESS = 'SET_UPLOAD_FILE_PROGRESS';\r\nexport const SET_UPLOAD_FILE_LIST = 'SET_UPLOAD_FILE_LIST';\r\n\r\nexport const OPEN_CONTEXT_MENU = 'OPEN_CONTEXT_MENU';\r\nexport const CLOSE_CONTEXT_MENU = 'CLOSE_CONTEXT_MENU';\r\n\r\nexport const OPEN_DIALOG = 'OPEN_DIALOG';\r\nexport const CLOSE_DIALOG = 'CLOSE_DIALOG';\r\n\r\nexport enum DIALOGS {\r\n    CHOOSE_LOCATION = 'CHOOSE_LOCATION',\r\n    CREATE_FOLDER = 'CREATE_FOLDER',\r\n    CREATE_FILE = 'CREATE_FILE',\r\n    UPLOAD_FILE = 'UPLOAD_FILE',\r\n    EXPOSE_METADATA = 'EXPOSE_METADATA',\r\n    ADD_NEW_VERSION = 'ADD_NEW_VERSION',\r\n    UPLOAD_METADATA = 'UPLOAD_METADATA',\r\n    ACCESS_CONTROL = 'ACCESS_CONTROL',\r\n    RENAME = 'RENAME',\r\n    MOVE = 'MOVE',\r\n    COPY = 'COPY',\r\n    CONTENT = 'CONTENT',\r\n    MEDIA = 'MEDIA',\r\n    EDIT = 'EDIT',\r\n    CONTEXT_MENU = 'CONTEXT_MENU',\r\n};","let host: string | null = null;\r\n\r\nexport default {\r\n    getHost() {\r\n        return host;\r\n    },\r\n    setHost(newHost: string) {\r\n        host = newHost;\r\n        while (host.endsWith('/'))\r\n            host = host.slice(0, -1);\r\n    }\r\n};\r\n","import { Action, SET_LOGGED_IN, SET_LOGGED_OUT, SET_HOST, SET_WEB_ID, RESET_HOST, RESET_WEB_ID } from \"../Actions/actionTypes\";\r\nimport config from \"../config\";\r\n\r\ninterface AccountState {\r\n    loggedIn: boolean;\r\n    host: string | null;\r\n    webId: string | null;\r\n}\r\n\r\nconst initialState: AccountState = {\r\n    loggedIn: false,\r\n    host: null,\r\n    webId: null\r\n};\r\n\r\nexport const account = (state = initialState, action: Action<string|null|void>): AccountState => {\r\n    switch(action.type) {\r\n        case SET_LOGGED_IN:\r\n            return { ...state, loggedIn: true };\r\n        case SET_LOGGED_OUT:\r\n            return { ...state, loggedIn: false };\r\n        case SET_HOST:\r\n            config.setHost(action.value as string); // TODO\r\n            return { ...state, host: action.value as string };\r\n        case RESET_HOST:\r\n            return { ...state, host: null };\r\n        case SET_WEB_ID:\r\n            return { ...state, webId: action.value as string|null };\r\n        case RESET_WEB_ID:\r\n            return { ...state, webId: null };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { DIALOGS, Action, OPEN_DIALOG, CLOSE_DIALOG, OPEN_CONTEXT_MENU, CLOSE_CONTEXT_MENU } from \"../Actions/actionTypes\";\r\n\r\n// Initialize state with values of DIALOGS as keys and false (closed) as value\r\nconst initialVisibleDialogs: Record<DIALOGS, boolean> = Object.values(DIALOGS)\r\n    .map((name: DIALOGS) => ({ [name]: false } as Record<DIALOGS, boolean>))\r\n    .reduce((prev, cur) => ({ ...prev, ...cur })) as Record<DIALOGS, boolean>;\r\n\r\nexport const visibleDialogs = (state = initialVisibleDialogs, action: Action<DIALOGS>): typeof initialVisibleDialogs => {\r\n    switch (action.type) {\r\n        case OPEN_DIALOG:\r\n            return { ...state, [action.value]: true };\r\n        case CLOSE_DIALOG:\r\n            return { ...state, [action.value]: false };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst initialContextMenuState = {\r\n    open: false,\r\n    x: 0,\r\n    y: 0,\r\n};\r\n\r\nexport const contextMenu = (state = initialContextMenuState, action: Action<any>): typeof initialContextMenuState => {\r\n    switch (action.type) {\r\n        case OPEN_CONTEXT_MENU:\r\n            return {\r\n                ...state,\r\n                open: true,\r\n                x: action.value.x,\r\n                y: action.value.y\r\n            };\r\n        case CLOSE_CONTEXT_MENU:\r\n            return { ...state, open: false };\r\n        default:\r\n            return state;\r\n    }\r\n};","import { Item } from \"../Api/Item\";\r\nimport { Action, SET_ITEMS, SELECT_ITEMS, DESELECT_ITEM, FILTER_ITEMS, RESET_FILTER, TOGGLE_SELECTED_ITEM } from \"../Actions/actionTypes\";\r\n\r\ninterface ItemsState {\r\n    inCurFolder: Item[];\r\n    filter: string;\r\n    selected: Item[];\r\n}\r\n\r\nconst initialItemsState: ItemsState = {\r\n    inCurFolder: [],\r\n    filter: '',\r\n    selected: [],\r\n};\r\n\r\nexport const items = (state = initialItemsState, action: Action<any>): ItemsState => {\r\n    switch(action.type) {\r\n        case SET_ITEMS:\r\n            return { ...state, inCurFolder: action.value as Item[] };\r\n        case SELECT_ITEMS:\r\n            return { ...state, selected: action.value as Item[] };\r\n        case DESELECT_ITEM:\r\n            return { ...state, selected: removeItem(state.selected, action.value as Item) };\r\n        case TOGGLE_SELECTED_ITEM:\r\n            return { \r\n                ...state,\r\n                selected: state.selected.includes(action.value) ?\r\n                    removeItem(state.selected, action.value as Item)\r\n                    : addItem(state.selected, action.value as Item)\r\n            };\r\n        case FILTER_ITEMS:\r\n            return { ...state, filter: action.value as string };\r\n        case RESET_FILTER:\r\n            return { ...state, filter: '' };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst removeItem = (items: Item[], item: Item) => {\r\n    return items.filter(selectedItem => !selectedItem.equals(item));\r\n}\r\n\r\nconst addItem = (items: Item[], item: Item) => {\r\n    return [...items, item];\r\n}","import { Action, ENTER_FOLDER, SET_PATH, MOVE_FOLDER_UPWARDS } from \"../Actions/actionTypes\";\r\n\r\n\r\nconst initialPath: string[] = [];\r\n\r\nexport const path = (state = initialPath, action: Action<any>): typeof initialPath => {\r\n    switch(action.type) {\r\n        case ENTER_FOLDER:\r\n            return [...state, action.value];\r\n        case MOVE_FOLDER_UPWARDS:\r\n            return action.value > 0 ?\r\n                state.slice(0, -action.value)\r\n                : state;\r\n        case SET_PATH:\r\n            return [...action.value];\r\n        default:\r\n            return state;\r\n    }\r\n};","import { Action, SET_UPLOAD_FILE_LIST, SET_UPLOAD_FILE_PROGRESS } from \"../Actions/actionTypes\";\r\n\r\nconst initialUploadState = {\r\n    fileList: null as FileList|null,\r\n    progress: 0,\r\n};\r\n\r\nexport const upload = (state = initialUploadState, action: Action<FileList|number>): typeof initialUploadState => {\r\n    switch(action.type) {\r\n        case SET_UPLOAD_FILE_LIST:\r\n            return { ...state, fileList: action.value as FileList };\r\n        case SET_UPLOAD_FILE_PROGRESS:\r\n            return { ...state, progress: action.value as number };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from 'redux';\r\nimport { account } from './accountReducer';\r\nimport { blob } from './currentBlobReducer';\r\nimport { visibleDialogs, contextMenu } from './dialogsReducer';\r\nimport { errorMessage } from './errorReducer';\r\nimport { items } from './itemsReducer';\r\nimport { loading } from './loadingReducer';\r\nimport { path } from './pathReducer';\r\nimport { upload } from './uploadReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    account,\r\n    blob,\r\n    contextMenu,\r\n    visibleDialogs,\r\n    errorMessage,\r\n    items,\r\n    loading,\r\n    path,\r\n    upload,\r\n});\r\n\r\nexport default rootReducer;\r\nexport type AppState = ReturnType<typeof rootReducer>;","import { Action, SET_LOADED_BLOB, RESET_LOADED_BLOB } from \"../Actions/actionTypes\";\r\n\r\nexport const blob = (state: string|null = null, action: Action<Blob>): typeof state => {\r\n    switch(action.type) {\r\n        case SET_LOADED_BLOB:\r\n            return URL.createObjectURL(action.value);\r\n        case RESET_LOADED_BLOB:\r\n            if (state !== null)\r\n                URL.revokeObjectURL(state);\r\n            return null;\r\n        default:\r\n            return state;\r\n    }\r\n};","import { Action, SET_ERROR_MESSAGE } from \"../Actions/actionTypes\";\r\n\r\nexport const errorMessage = (state = '', action: Action<string>): typeof state => {\r\n    switch(action.type) {\r\n        case SET_ERROR_MESSAGE:\r\n            return action.value;\r\n        default:\r\n            return state;\r\n    }\r\n};","import { Action, DISPLAY_LOADING, STOP_LOADING } from \"../Actions/actionTypes\";\r\n\r\nconst initialLoadingState: boolean = false;\r\n\r\nexport const loading = (state = initialLoadingState, action: Action<void>): boolean => {\r\n    switch(action.type) {\r\n        case DISPLAY_LOADING:\r\n            return true;\r\n        case STOP_LOADING:\r\n            return false;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: ServiceWorkerConfig) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: ServiceWorkerConfig) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: ServiceWorkerConfig) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n\r\n\r\nexport interface ServiceWorkerConfig {\r\n  onUpdate(registration: ServiceWorkerRegistration): void;\r\n  onSuccess(registration: ServiceWorkerRegistration): void;\r\n}","/**\r\n * Class for an arbitrary item from a solid pod\r\n */\r\nexport class Item {\r\n    _name: string;\r\n    _path: string[];\r\n    _url: string;\r\n    _size?: string\r\n\r\n    constructor(url: string, size?: string) {\r\n        const path = getPathFromUrl(url);\r\n\r\n        this._name = path.pop() || '';\r\n        this._path = path;\r\n        this._url = url;\r\n        this._size = size;\r\n    }\r\n\r\n    // Make properties readonly\r\n    get name() { return this._name; }\r\n    get path() { return this._path; }\r\n    get url() { return this._url; }\r\n    get size() { return this._size; }\r\n\r\n    equals(item: Item) {\r\n        return this.name === item.name\r\n            && this.path.length === item.path.length\r\n            && this.path.every((val, index) => val === item.path[index]);\r\n    }\r\n\r\n    getDisplayName() {\r\n        return decodeURI(this.name);\r\n    }\r\n\r\n    getDisplaySize() {\r\n        return this._size ? getHumanFileSize(this._size) : 'Unknown size';\r\n    }\r\n}\r\n\r\nexport class FileItem extends Item {\r\n    isImage() {\r\n        return patterns.image.test(this.name);\r\n    }\r\n\r\n    isMedia() {\r\n        return patterns.media.test(this.name);\r\n    }\r\n\r\n    isEditable() {\r\n        return patterns.editable.test(this.name);\r\n    }\r\n\r\n    isExtractable() {\r\n        return patterns.extractable.test(this.name);\r\n    }\r\n\r\n    isMetadata() {\r\n        return patterns.metadata.test(this.name);\r\n    }\r\n\r\n    isNotUpdateable(){\r\n        return !patterns.notUpdatable.test(this.name);\r\n    }\r\n\r\n    isVersionFile(){\r\n        return patterns.version.test(this.name);\r\n    }\r\n\r\n    isVideo() {\r\n        return patterns.video.test(this.name);\r\n    }\r\n}\r\n\r\nexport class FolderItem extends Item { }\r\n\r\n\r\n// regex patterns for testing if a file is of a specific type\r\nconst patterns = {\r\n    editable: /\\.(txt|diff?|patch|svg|asc|cnf|cfg|conf|html?|cfm|cgi|aspx?|ini|pl|py|md|css|cs|jsx?|jsp|log|htaccess|htpasswd|gitignore|gitattributes|env|json|atom|eml|rss|markdown|sql|xml|xslt?|sh|rb|as|bat|cmd|cob|for|ftn|frm|frx|inc|lisp|scm|coffee|php[3-6]?|java|c|cbl|go|h|scala|vb|tmpl|lock|go|yml|yaml|tsv|lst|ttl)$/i,\r\n    image: /\\.(jpe?g|gif|bmp|png|svg|tiff?)$/i,\r\n    media: /\\.(mp3|ogg|wav|mp4|webm)$/i,\r\n    video: /\\.(mp4|webm|ogg)$/i,\r\n    extractable: /\\.(zip)$/i,\r\n    metadata: /\\.(ttl|n3)$/i,\r\n    version: /\\.(old)$/i,\r\n    notUpdatable: /\\.(old|ttl|n3)$/i\r\n};\r\n\r\n/**\r\n * Calculate file size by bytes in human readable format\r\n */\r\nexport const getHumanFileSize = (byteString: string|number): string => {\r\n    const bytes = typeof byteString === 'string' ?\r\n        parseInt(byteString)\r\n        : byteString;\r\n    const e = (Math.log(bytes) / Math.log(1e3)) | 0;\r\n    return +(bytes / Math.pow(1e3, e)).toFixed(2) + ' ' + ('kMGTPEZY'[e - 1] || '') + 'B';\r\n};\r\n\r\n\r\n/**\r\n * Get path including the last element (e.g. [public, test, index.html])\r\n */\r\nconst getPathFromUrl = (urlString: string): string[] => {\r\n    const url = new URL(urlString);\r\n    return url.pathname.split('/').filter(val => val !== '');\r\n}","// Based on https://github.com/jeff-zucker/solid-file-client/blob/master/src/folderUtils\r\nimport * as rdflib from 'rdflib';\r\nimport { FileItem, FolderItem } from './Item';\r\nimport { FolderItems } from './types';\r\n\r\nexport function getSizeByGraph(graph: rdflib.IndexedFormula, subjectName: string): string | undefined {\r\n    const subjectNode = rdflib.sym(subjectName);\r\n    const nsSize = rdflib.sym('http://www.w3.org/ns/posix/stat#size');\r\n    const size = graph.any(subjectNode, nsSize, undefined, undefined);\r\n\r\n    return (size && 'value' in size) ? size.value : undefined;\r\n}\r\n\r\n/**\r\n * @param {rdflib.IndexedFormula} graph a rdflib.graph() database instance\r\n * @param {string} baseUrl location of the folder\r\n * @returns {boolean}\r\n */\r\nexport function isFolder(graph: rdflib.IndexedFormula, baseUrl: string): boolean {\r\n    const folderNode = rdflib.sym(baseUrl);\r\n    const isAnInstanceOfClass = rdflib.sym('http://www.w3.org/1999/02/22-rdf-syntax-ns#type');\r\n    const types = graph.each(folderNode, isAnInstanceOfClass, undefined, undefined);\r\n    return Object.values(types)\r\n        .some(({ value }) => value.match('ldp#BasicContainer') !== null);\r\n}\r\n\r\nexport function getFolderItems(graph: rdflib.IndexedFormula, subj: string): FolderItems {\r\n    const files: FileItem[] = [];\r\n    const folders: FolderItem[] = [];\r\n\r\n    graph.each(\r\n        rdflib.sym(subj),\r\n        rdflib.sym('http://www.w3.org/ns/ldp#contains'),\r\n        undefined,\r\n        undefined\r\n    ).forEach(item => {\r\n        \r\n        const url = item.value;\r\n        const size = getSizeByGraph(graph, url);\r\n\r\n        if (isFolder(graph, url))\r\n            folders.push(new FolderItem(url, size));\r\n        else\r\n            files.push(new FileItem(url, size));\r\n    });\r\n\r\n    return { files, folders };\r\n}\r\n\r\n/**\r\n * @param {string} text RDF text that can be passed to $rdf.parse()\r\n * @param {string} baseUrl the base url of the item\r\n * @param {string} contentType Content-Type of the request\r\n * @returns {Promise<rdflib.IndexedFormula>} a rdfilb.graph() database instance with parsed RDF\r\n */\r\nexport async function text2graph(text: string, baseUrl: string, contentType: string = ''): Promise<rdflib.IndexedFormula> {\r\n    contentType = contentType || guessFileType(baseUrl);\r\n    const graph = rdflib.graph();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        rdflib.parse(text, graph, baseUrl, contentType, () => {});\r\n        resolve(graph);\r\n    });\r\n}\r\n\r\nfunction guessFileType(url: string): string {\r\n    const ext = url.replace(/.*\\./, '');\r\n    if (ext.match(/\\/$/)) return 'dir';\r\n    if (ext.match(/(md|markdown)/)) return 'text/markdown';\r\n    if (ext.match(/html/)) return 'text/html';\r\n    if (ext.match(/xml/)) return 'text/xml';\r\n    if (ext.match(/ttl/)) return 'text/turtle';\r\n    if (ext.match(/n3/)) return 'text/n3';\r\n    if (ext.match(/rq/)) return 'application/sparql';\r\n    if (ext.match(/css/)) return 'text/css';\r\n    if (ext.match(/txt/)) return 'text/plain';\r\n    if (ext.match(/json/)) return 'application/json';\r\n    if (ext.match(/js/)) return 'application/javascript';\r\n    if (ext.match(/(png|gif|jpeg|tif)/)) return 'image';\r\n    if (ext.match(/(mp3|aif|ogg)/)) return 'audio';\r\n    if (ext.match(/(avi|mp4|mpeg)/)) return 'video';\r\n    /* default */ return 'text/turtle';\r\n}\r\n","/**\r\n * Class for an ACL item in solid pod\r\n */\r\nexport class AclItem {\r\n    _key: number;\r\n    _agent: string;\r\n    _accessTo: string;\r\n    _read: boolean;\r\n    _write: boolean;\r\n    _append: boolean;\r\n    _control: boolean;\r\n    _isGroup: boolean;\r\n\r\n    constructor(key: number, agent: string, accessTo: string, read: boolean, write: boolean, append: boolean, control: boolean, isGroup: boolean) {\r\n        this._key = key;\r\n        this._agent = agent;\r\n        this._accessTo = accessTo;\r\n        this._read = read;\r\n        this._write = write;\r\n        this._append = append;\r\n        this._control = control;\r\n        this._isGroup = isGroup;\r\n    }\r\n\r\n    // Make properties readonly\r\n    get agent() { return this._agent; }\r\n    get accessTo() { return this._accessTo; }\r\n    get isGroup() { return this._isGroup; }\r\n    get read() { return this._read; }\r\n    get write() { return this._write; }\r\n    get append() { return this._append; }\r\n    get control() { return this._control; }\r\n}\r\n\r\n","import * as rdflib from 'rdflib';\r\nimport { AclItem } from './AclItem';\r\nimport { AclList } from './types';\r\n\r\nconst aclNamespace = \"http://www.w3.org/ns/auth/acl#\";\r\nconst pavOntology = \"http://purl.org/pav/\";\r\nconst dublinCoreOntology = \"http://purl.org/dc/terms/\";\r\nconst schemaOntology = \"http://schema.org/\"\r\n\r\nexport function parseACl(text: string, subj: string): AclItem[] {\r\n    const graph = rdflib.graph();\r\n    const acls: AclItem[] = [];\r\n\r\n    rdflib.parse(text, graph, subj, \"text/turtle\", () => {\r\n        let i = 0;\r\n        graph.each(\r\n            undefined, undefined, rdflib.sym(aclNamespace + 'Authorization'), rdflib.sym(subj)\r\n        ).forEach(item => {\r\n\r\n            const subject = item.value;\r\n            const isGroup = checkIsGroup(graph, subject);\r\n            const agentType = isGroup ? 'agentClass' : 'agent';\r\n            const agent = getAgentName(graph, subject, agentType);\r\n            const accessTo = getAccessToByGraph(graph, subject);\r\n            const read = getMode(graph, subject, \"Read\");\r\n            const write = getMode(graph, subject, \"Write\");\r\n            const append = getMode(graph, subject, \"Append\");\r\n            const control = getMode(graph, subject, \"Control\");\r\n            acls.push(new AclItem(i++, agent, accessTo, read, write, append, control, isGroup));\r\n        });\r\n    });\r\n    return acls;\r\n};\r\n\r\nexport function integrateInfo(content: string,dataURL: string, ttlURL: string){\r\n    const graph = rdflib.graph()\r\n    const updater = new rdflib.UpdateManager(graph);\r\n    const creatorTerm = \"creator\";\r\n    const contentURL = \"contentURL\";\r\n    const identifierTerm = \"url\";\r\n\r\n    \r\n    rdflib.parse(content, graph, ttlURL, \"text/turtle\", () => {\r\n        let metadata = graph.any(undefined, rdflib.sym(dublinCoreOntology + creatorTerm), undefined, rdflib.sym(ttlURL));\r\n        \r\n        let newStatement = [];\r\n        const wholeTtlNode = rdflib.sym(ttlURL);\r\n        const metadataNode = rdflib.sym(metadata.value);\r\n        newStatement.push(rdflib.st(metadataNode, rdflib.sym(schemaOntology + identifierTerm), ttlURL, wholeTtlNode));\r\n        newStatement.push(rdflib.st(metadataNode, rdflib.sym(schemaOntology + contentURL), dataURL, wholeTtlNode));\r\n        //call update to file\r\n        updater.update([], newStatement, (uri, ok, message) => {\r\n            if (!ok)\r\n                console.log('err:' + message)\r\n        })\r\n    });\r\n}\r\n\r\nexport function saveNewVersion(content: string, fileName: string, folderPath: string, newVersion: string, oldVersion: string): void {\r\n    const graph = rdflib.graph()\r\n    const updater = new rdflib.UpdateManager(graph);\r\n    const versionTerm = \"version\";\r\n    const creatorTerm = \"creator\";\r\n    const hasEarlierVersionTerm = \"hasEarlierVersion\";\r\n    const hasVersionTerm = \"hasVersion\";\r\n    const identifierTerm = \"url\";\r\n    const url = folderPath + \"/\" + fileName + \".ttl\";\r\n\r\n    rdflib.parse(content, graph, url, \"text/turtle\", () => {\r\n        let metadata = graph.any(undefined, rdflib.sym(dublinCoreOntology + creatorTerm), undefined, rdflib.sym(url));\r\n        //remove old version\r\n        let oldStatement = graph.match(rdflib.sym(metadata.value), rdflib.sym(pavOntology + versionTerm), undefined, undefined);\r\n        \r\n        let newStatement = [];\r\n        const wholeTtlNode = rdflib.sym(url);\r\n        const metadataNode = rdflib.sym(metadata.value);\r\n        const oldFileUrl = folderPath + \"/\"+ versionTerm +\"/\" + oldVersion + \"/\" + fileName + \".old\";\r\n        const newNodePrevVer = rdflib.sym(oldFileUrl);\r\n        //update new version \r\n        newStatement.push(rdflib.st(metadataNode, rdflib.sym(pavOntology + versionTerm), newVersion, wholeTtlNode));\r\n        //update hasEarlierVersion\r\n        newStatement.push(rdflib.st(metadataNode, rdflib.sym(pavOntology + hasEarlierVersionTerm), newNodePrevVer, wholeTtlNode));\r\n        //define new statement for previous version\r\n        newStatement.push(rdflib.st(newNodePrevVer, rdflib.sym(pavOntology + hasVersionTerm), oldVersion, wholeTtlNode));\r\n        newStatement.push(rdflib.st(newNodePrevVer, rdflib.sym(schemaOntology + identifierTerm), oldFileUrl, wholeTtlNode));\r\n\r\n        //call update to file\r\n        updater.update(oldStatement, newStatement, (uri, ok, message) => {\r\n            if (!ok)\r\n                console.log('err:' + message)\r\n        })\r\n    });\r\n};\r\n\r\nexport function exposeMetadata(remoteRegistryUrl: string, content: string, ttlURL: string, newContent: {keyword:string, discipline:string}): void {\r\n    const graph = rdflib.graph();\r\n    const updater = new rdflib.UpdateManager(graph);\r\n\r\n    const updatedSubj = rdflib.sym(ttlURL);\r\n    const remotedGraph = rdflib.sym(remoteRegistryUrl);\r\n    const keywordTerm = \"keyword\";\r\n    const typeTerm = \"type\";\r\n    const subjectTerm = \"subject\";\r\n    const identifierTerm = \"url\";\r\n\r\n    rdflib.parse(content, graph, remoteRegistryUrl, \"text/turtle\", () => {\r\n        //old statements \r\n        let oldStatement = []\r\n        oldStatement= graph.match(updatedSubj, rdflib.sym(schemaOntology + keywordTerm), undefined,  remotedGraph);\r\n        //new statements\r\n        let newStatement = [];\r\n        newStatement.push(rdflib.st(updatedSubj, rdflib.sym(dublinCoreOntology + typeTerm), \"Metadata\", remotedGraph));\r\n        newStatement.push(rdflib.st(updatedSubj, rdflib.sym(schemaOntology + keywordTerm), newContent.keyword, remotedGraph));\r\n        newStatement.push(rdflib.st(updatedSubj, rdflib.sym(dublinCoreOntology + subjectTerm), newContent.discipline, remotedGraph));\r\n        newStatement.push(rdflib.st(updatedSubj, rdflib.sym(schemaOntology + identifierTerm), updatedSubj, remotedGraph));\r\n\r\n        updater.update(oldStatement, newStatement, (uri, ok, message) => {\r\n            if (!ok)\r\n                console.log('err:' + message)\r\n        })\r\n    });\r\n}\r\n\r\nexport function getVersion(text: string, subj: string): string {\r\n    const graph = rdflib.graph();\r\n    let versionNum = \"\";\r\n    rdflib.parse(text, graph, subj, \"text/turtle\", () => {\r\n        let version = graph.match(\r\n            undefined, rdflib.sym(pavOntology + \"version\"), undefined, rdflib.sym(subj)\r\n        )\r\n        if (version.length)\r\n            versionNum = version[0]['object']['value']\r\n    });\r\n    return versionNum;\r\n};\r\n\r\nexport function getContent(text: string, subj: string): {} {\r\n    const graph = rdflib.graph();\r\n    let content = { keyword: \"\", discipline: \"\" };\r\n    rdflib.parse(text, graph, subj, \"text/turtle\", () => {\r\n        let root = graph.any(\r\n            undefined, rdflib.sym(schemaOntology + \"keyword\"), undefined, rdflib.sym(subj)\r\n        );\r\n        if (root && root.value) {\r\n            let keyword = graph.any(\r\n                rdflib.sym(root.value), rdflib.sym(schemaOntology + \"keyword\"), undefined, undefined\r\n            )\r\n            if (keyword) content.keyword = keyword.value;\r\n            let discipline = graph.any(\r\n                rdflib.sym(root.value), rdflib.sym(dublinCoreOntology + \"subject\"), undefined, undefined\r\n            )\r\n            if (discipline) content.discipline = discipline.value;\r\n        }\r\n    });\r\n    return content;\r\n};\r\n\r\n\r\n/**\r\n * @param {string} text RDF text that can be passed to $rdf.parse()\r\n * @param {string} baseUrl the base url of the item\r\n * @returns {Promise<rdflib.IndexedFormula>} a rdfilb.graph() database instance with parsed RDF\r\n */\r\nexport async function aclText2graph(text: string, baseUrl: string): Promise<rdflib.IndexedFormula> {\r\n    const contentType = 'text/turtle';\r\n    const graph = rdflib.graph();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        rdflib.parse(text, graph, baseUrl, contentType, () => { });\r\n        resolve(graph);\r\n    });\r\n}\r\n\r\n\r\nexport function buildACLContent(aclList: AclItem[]): string {\r\n    let arrAuth: String[] = [];\r\n    aclList.forEach(item => {\r\n        if (!item._agent)\r\n            return;\r\n        if (!item._read && !item._write && !item._control && !item._append)\r\n            return;\r\n        arrAuth.push(``);\r\n        arrAuth.push(`<#authorization${item._key}> a  acl:Authorization;`);\r\n        arrAuth.push(`acl:${item._isGroup ? 'agentClass' : 'agent'} <${item._agent}>;`);\r\n        arrAuth.push(`acl:defaultForNew <./>;`);\r\n        arrAuth.push(`acl:accessTo <${item._accessTo}>;`);\r\n        let arrMode = [];\r\n        if (item._read)\r\n            arrMode.push('acl:Read');\r\n        if (item._write)\r\n            arrMode.push('acl:Write');\r\n        if (item._append)\r\n            arrMode.push('acl:Append');\r\n        if (item._control)\r\n            arrMode.push('acl:Control');\r\n        arrAuth.push(`acl:mode  ${arrMode.join(\", \")}.`);\r\n    });\r\n    return '@prefix  acl:  <http://www.w3.org/ns/auth/acl#> . \\n' + arrAuth.join(\"\\n\");\r\n}\r\n\r\nexport function getAclList(graph: rdflib.IndexedFormula, subj: string): AclList {\r\n    const acls: AclItem[] = [];\r\n    let i = 1;\r\n    graph.each(\r\n        undefined, undefined, rdflib.sym(aclNamespace + 'Authorization'), rdflib.sym(subj)\r\n    ).forEach(item => {\r\n\r\n        const subject = item.value;\r\n        const isGroup = checkIsGroup(graph, subject);\r\n        const agentType = isGroup ? 'agentClass' : 'agent';\r\n        const agent = getAgentName(graph, subject, agentType);\r\n        const accessTo = getAccessToByGraph(graph, subject);\r\n        const read = getMode(graph, subject, \"Read\");\r\n        const write = getMode(graph, subject, \"Write\");\r\n        const append = getMode(graph, subject, \"Append\");\r\n        const control = getMode(graph, subject, \"Control\");\r\n        acls.push(new AclItem(i++, agent, accessTo, read, write, append, control, isGroup));\r\n    });\r\n    return { acls };\r\n}\r\n\r\nexport function getAccessToByGraph(graph: rdflib.IndexedFormula, subjectName: string): string {\r\n    const subjectNode = rdflib.sym(subjectName);\r\n    const accessTo = graph.any(subjectNode, rdflib.sym(aclNamespace + 'accessTo'), undefined, undefined);\r\n    return (accessTo && 'value' in accessTo) ? accessTo.value : \"\";\r\n}\r\n\r\nexport function getAgentName(graph: rdflib.IndexedFormula, subjectName: string, agentType: string): string {\r\n    const subjectNode = rdflib.sym(subjectName);\r\n    const agent = graph.any(subjectNode, rdflib.sym(aclNamespace + agentType), undefined, undefined);\r\n    return (agent && 'value' in agent) ? agent.value : \"\";\r\n}\r\n\r\nexport function getMode(graph: rdflib.IndexedFormula, subjectName: string, modeName: string): boolean {\r\n    const subjectNode = rdflib.sym(subjectName);\r\n    const mode = graph.match(subjectNode, rdflib.sym(aclNamespace + 'mode'), rdflib.sym(aclNamespace + modeName), undefined);\r\n    return (mode && mode.length == 1) ? true : false;\r\n}\r\n\r\nexport function checkIsGroup(graph: rdflib.IndexedFormula, subjectName: string): boolean {\r\n    const subjectNode = rdflib.sym(subjectName);\r\n    const agentClass = graph.match(subjectNode, rdflib.sym(aclNamespace + 'agentClass'), undefined, undefined);\r\n    return (agentClass && agentClass.length == 1) ? true : false;\r\n}","import config from './../config';\r\nimport * as folderUtils from './folderUtils';\r\nimport * as aclUtils from './aclUtils';\r\nimport * as solidAuth from 'solid-auth-client';\r\nimport { FolderItems, AclList } from './types';\r\nimport { AclItem } from './AclItem';\r\nimport { promises } from 'fs';\r\nconst fileClient = require('solid-file-client');\r\n\r\nexport async function createACL(path: string, fileName: string, content: Blob | string): Promise<boolean> {\r\n    const baseUrl = `${config.getHost()}${path}`;\r\n    const filePath = baseUrl + \"/\" + fileName;\r\n\r\n    return fileClient.createFile(filePath, content).then((fileCreated: any) => {\r\n        fileClient.updateFile( filePath,content, \"text/turtle\").then((success: any) => {\r\n            console.log(`Updated ${filePath}.`)\r\n        }, (err: any) => console.log(err));\r\n        return true;\r\n    }, (err: any) => {\r\n        console.log(err);\r\n        return false;\r\n    });\r\n}\r\n/**\r\n * Fetch API to get item\r\n */\r\nexport async function fetchFile(path: string, fileName?: string): Promise<Response> {\r\n    const url = buildFileUrl(path, fileName);\r\n\r\n    return solidAuth.fetch(url)\r\n        .then(assertSuccessfulResponse);\r\n};\r\n\r\n/**\r\n * Fetch API to get item\r\n */\r\nexport async function fetchRemoteFile(url: string): Promise<Response> {\r\n    return solidAuth.fetch(url)\r\n        .then(assertSuccessfulResponse);\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to get folder\r\n */\r\nexport async function fetchFolder(path: string, folderName?: string): Promise<Response> {\r\n    const url = buildFolderUrl(path, folderName);\r\n    return solidAuth.fetch(url, { headers: { \"Accept\": \"text/turtle\" } })\r\n        .then(assertSuccessfulResponse);\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to retrieve object containing a files and folders array\r\n */\r\nexport async function readFolder(path: string, folderName?: string): Promise<FolderItems> {\r\n    const url = buildFolderUrl(path, folderName);\r\n\r\n    const response = await fetchFolder(path, folderName);\r\n    const folderRDF = await response.text();\r\n    const graph = await folderUtils.text2graph(folderRDF, url, 'text/turtle');\r\n    const folderItems = folderUtils.getFolderItems(graph, url);\r\n\r\n    return folderItems;\r\n}\r\n\r\n/**\r\n * Fetch API to retrieve acl triple\r\n */\r\nexport async function readAcl(path: string, aclFileName?: string): Promise<AclList> {\r\n    const url = buildFileUrl(path, aclFileName);\r\n\r\n    const response = await fetchFile(path, aclFileName);\r\n    const responseRDF = await response.text();\r\n    const graph = await aclUtils.aclText2graph(responseRDF, url);\r\n    const aclList = aclUtils.getAclList(graph, url);\r\n\r\n    return aclList;\r\n}\r\n\r\nexport async function updateVersion(path: string, fileName: string, newVersion: string, oldVersion: string) {\r\n    const folderPath = buildFileUrl(path, \"\");\r\n    const response = await fetchFile(path, fileName + \".ttl\");\r\n    const responseRDF = await response.text();\r\n    aclUtils.saveNewVersion(responseRDF, fileName, folderPath, newVersion, oldVersion);\r\n}\r\n\r\nexport async function integrateInfo(path: string, fileName: string, metadataFileName: string){\r\n    const dataURL = buildFileUrl(path, fileName);\r\n    const ttlURL = buildFileUrl(path, metadataFileName);\r\n    const response = await fetchFile(path, metadataFileName);\r\n    const responseRDF = await response.text();\r\n    aclUtils.integrateInfo(responseRDF, dataURL, ttlURL);\r\n}\r\n\r\nexport async function exposeMetadata(path: string, fileName: string, newContent: { keyword: string, discipline: string }) {\r\n    const ttlURL = buildFileUrl(\"/\" + path, fileName);\r\n    const remoteRegistryURL = \"https://davu.solid.community/public/registry/index.ttl\";\r\n    const response = await fetchRemoteFile(remoteRegistryURL);\r\n    const registryRDF = await response.text();\r\n    aclUtils.exposeMetadata(remoteRegistryURL , registryRDF, ttlURL, newContent);\r\n}\r\n\r\n\r\n\r\n/**\r\n * Fetch API to move items\r\n */\r\nexport async function moveItems(path: string, destination: string, itemNames: string[]): Promise<Response> {\r\n    await copyItems(path, destination, itemNames);\r\n    return removeItems(path, itemNames);\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to rename a file\r\n */\r\nexport async function renameFile(path: string, oldName: string, newName: string): Promise<Response> {\r\n    await copyFile(path, oldName, path, newName);\r\n    return removeItem(path, oldName);\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to rename a folder\r\n */\r\nexport async function renameFolder(path: string, oldFolderName: string, newFolderName: string): Promise<Response> {\r\n    await copyFolder(path, oldFolderName, path, newFolderName);\r\n    return removeFolderRecursively(path, oldFolderName);\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to copy files\r\n */\r\nexport async function copyItems(path: string, destination: string, itemNames: string[]): Promise<Response> {\r\n    let { files, folders } = await readFolder(path);\r\n\r\n    files = files.filter(({ name }) => itemNames.includes(name));\r\n    folders = folders.filter(({ name }) => itemNames.includes(name));\r\n\r\n    const promises = [\r\n        ...files.map(({ name }) => copyFile(path, name, destination, name)),\r\n        ...folders.map(({ name }) => copyFolder(path, name, destination, name))\r\n    ];\r\n\r\n    await Promise.all(promises);\r\n    return new Response();\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to copy a file\r\n */\r\nexport async function copyFile(originPath: string, originName: string, destinationPath: string, destinationName: string): Promise<Response> {\r\n    const fileResponse = await fetchFile(originPath, originName);\r\n    const content = await fileResponse.blob();\r\n\r\n    return createFile(destinationPath, destinationName, content);\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to copy a folder recursively\r\n */\r\nexport async function copyFolder(originPath: string, originName: string, destinationPath: string, destinationName: string): Promise<Response> {\r\n    // TODO: Combine these two promises for better performance\r\n    await createFolder(destinationPath, destinationName);\r\n    const { files, folders } = await readFolder(originPath, originName);\r\n\r\n    const promises = [\r\n        ...files.map(({ name }) => copyFile(`${originPath}/${originName}`, name, `${destinationPath}/${destinationName}`, name)),\r\n        ...folders.map(({ name }) => copyFolder(`${originPath}/${originName}`, name, `${destinationPath}/${destinationName}`, name))\r\n    ];\r\n\r\n    await Promise.all(promises);\r\n    return new Response();\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to upload files\r\n */\r\nexport async function upload(path: string, fileList: FileList): Promise<Response> {\r\n    const promises = Array.from(fileList).map(file => updateFile(path, file.name, file));\r\n    await Promise.all(promises);\r\n    return new Response();\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to create a folder\r\n */\r\nexport async function createFolder(path: string, folderName: string): Promise<Response> {\r\n    if (await folderExists(path, folderName))\r\n        return new Response();\r\n\r\n    return createItem(path, folderName, new Blob(), '<http://www.w3.org/ns/ldp#BasicContainer>; rel=\"type\"');\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to replace or create a new file\r\n */\r\nexport async function updateFile(path: string, fileName: string, content: Blob | string): Promise<Response> {\r\n    await removeItem(path, fileName);\r\n    return createFile(path, fileName, content);\r\n}\r\n\r\n/**\r\n * Fetch API to replace or create a new ACL file\r\n */\r\nexport async function updateACLFile(path: string, fileName: string, aclItem: AclItem[]): Promise<boolean> {\r\n    await removeItem(path, fileName);\r\n    console.log(\"Remove ACL file\");\r\n    const content = await aclUtils.buildACLContent(aclItem);\r\n    return createACL(path, fileName, content);\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to create a new file\r\n */\r\nexport async function createFile(path: string, fileName: string, content: Blob | string): Promise<Response> {\r\n    return createItem(path, fileName, content, '<http://www.w3.org/ns/ldp#Resource>; rel=\"type\"');\r\n}\r\n\r\n\r\nexport function getBasedUrl(path: string) {\r\n    return `${config.getHost()}${path}`;\r\n}\r\n\r\nasync function createItem(path: string, itemName: string, content: Blob | string, link: string): Promise<Response> {\r\n    console.log(itemName);\r\n    const baseUrl = `${config.getHost()}${path}`;\r\n    const request = {\r\n        method: 'POST',\r\n        headers: {\r\n            link,\r\n            slug: itemName,\r\n            'Content-Type': <any>undefined // TODO: This hack can be removed if this issue is fixed: https://github.com/solid/node-solid-server/issues/1165\r\n        },\r\n        body: content\r\n    };\r\n    return solidAuth.fetch(baseUrl, request)\r\n        .then(assertSuccessfulResponse);\r\n}\r\n\r\n/**\r\n * Fetch API to remove multiple items\r\n */\r\nexport async function removeItems(path: string, itemNames: string[]): Promise<Response> {\r\n    return Promise.all(itemNames.map(itemName => removeItem(path, itemName)))\r\n        .then(() => new Response());\r\n};\r\n\r\n\r\n/**\r\n * Fetch API to remove one item\r\n */\r\nexport async function removeItem(path: string, itemName: string): Promise<Response> {\r\n    const url = buildFileUrl(path, itemName);\r\n\r\n    const response = await solidAuth.fetch(url, { method: 'DELETE' });\r\n    if (response.status === 409 || response.status === 301) {\r\n        // Solid pod returns 409 if the item is a folder and is not empty\r\n        // Solid pod returns 301 if is attempted to read a folder url without '/' at the end (from buildFileUrl)\r\n        return removeFolderRecursively(path, itemName);\r\n    }\r\n    else if (response.status === 404) {\r\n        // Don't throw if the item didn't exist\r\n        return response;\r\n    }\r\n    else {\r\n        assertSuccessfulResponse(response);\r\n        return response;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to remove contents and folder itself recursively\r\n */\r\nexport async function removeFolderRecursively(path: string, folderName: string): Promise<Response> {\r\n    await removeFolderContents(path, folderName);\r\n    return removeItem(path, folderName);\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to remove contents of one folder recursively\r\n */\r\nexport async function removeFolderContents(path: string, folderName: string): Promise<Response> {\r\n    const folderPath = `${path}/${folderName}`;\r\n\r\n    const { files, folders } = await readFolder(path, folderName);\r\n    const promises = [\r\n        ...files.map(({ name }) => removeItem(folderPath, name)),\r\n        ...folders.map(({ name }) => removeFolderRecursively(folderPath, name))\r\n    ];\r\n    await Promise.all(promises);\r\n    return new Response();\r\n}\r\n\r\n\r\n/**\r\n * Fetch API to check if a folder exists\r\n */\r\nexport async function folderExists(path: string, folderName: string): Promise<boolean> {\r\n    try {\r\n        await fetchFolder(path, folderName);\r\n        return true;\r\n    }\r\n    catch (error) {\r\n        if (error instanceof Response && error.status === 404)\r\n            return false;\r\n\r\n        throw error;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Build up an url from a path relative to the storage location and a folder name\r\n */\r\nfunction buildFolderUrl(path: string, folderName?: string): string {\r\n    return buildFileUrl(path, folderName) + '/';\r\n}\r\n\r\n\r\n/**\r\n * Build up an url from a path relative to the storage location and a fileName\r\n */\r\nfunction buildFileUrl(path: string, fileName?: string): string {\r\n    let url = `${config.getHost()}${path}/${fileName || ''}`;\r\n    while (url.slice(-1) === '/')\r\n        url = url.slice(0, -1);\r\n\r\n    return url;\r\n}\r\n\r\n\r\n/**\r\n * Throw response if fetch response was unsuccessful\r\n * @param {Response} response\r\n * @returns {Response}\r\n */\r\nfunction assertSuccessfulResponse(response: Response): Response {\r\n    if (!response.ok)\r\n        throw response;\r\n    return response;\r\n}\r\n","import * as API from './Api';\r\nimport JSZip from 'jszip';\r\nimport { FileItem, FolderItem, Item } from './Item';\r\nimport ApiCache from './ApiCache';\r\nimport { AclItem } from './AclItem';\r\n\r\nconst cache = new ApiCache();\r\n\r\n\r\n/**\r\n * Log a fetch response error and throw it again\r\n * @param {*} error \r\n */\r\nconst handleFetchError = async (error: Error | Response | string) => {\r\n    let detailedErrorMessage = '';\r\n    let displayErrorMessage: string | undefined;\r\n\r\n    console.group('handleFetchError');\r\n    if (error instanceof Response) {\r\n        detailedErrorMessage = await error.text();\r\n\r\n        console.error(`url: ${error.url}`);\r\n        console.error(`status: ${error.status}`);\r\n\r\n        const displayMessages: Record<string, string> = {\r\n            '401': `The ressource at ${error.url} requires you to login.`,\r\n            '403': `You don't have permission to access the ressource at ${error.url}.\r\n            Please make sure that you are logged in with the correct account.\r\n            If the server runs with version 5.0.0 or higher, make sure you gave this app read/write permission`,\r\n            '404': `The ressource at ${error.url} was not found`,\r\n            '500': `An internal server error occured...\r\n            ${detailedErrorMessage}`,\r\n        };\r\n        if (error.status in displayMessages)\r\n            displayErrorMessage = displayMessages[error.status];\r\n    }\r\n    else if (error instanceof Error) {\r\n        detailedErrorMessage = error.message;\r\n        console.error(error.stack);\r\n    }\r\n    else if (typeof error === 'string') {\r\n        detailedErrorMessage = error;\r\n    }\r\n    else {\r\n        detailedErrorMessage = JSON.stringify(error);\r\n    }\r\n    console.error(`errorMessage: ${detailedErrorMessage}`);\r\n    console.error(`error: ${error}`);\r\n    console.groupEnd();\r\n\r\n    throw new Error((displayErrorMessage) ? displayErrorMessage : detailedErrorMessage);\r\n}\r\n\r\n/**\r\n * Clean path string removing double slashes and prepending a slash if non-empty\r\n */\r\nconst fixPath = (path: string): string => {\r\n    if (path === \"\")\r\n        return path;\r\n    return ('/' + path).replace(/\\/\\//g, '/');\r\n};\r\n\r\n/**\r\n * Wrap API response for retrieving item list\r\n * itemList is cached automatically\r\n * @param {String} path\r\n * @returns {Promise<API.FolderItems>}\r\n */\r\nexport const getItemList = (path: string): Promise<Item[]> => {\r\n    path = fixPath(path);\r\n    if (cache.contains(path))\r\n        return Promise.resolve(cache.get(path));\r\n    return API.readFolder(path)\r\n        .then(({ files, folders }) => [...files, ...folders])\r\n        .then(itemList => cache.add(path, itemList))\r\n        .catch(handleFetchError);\r\n};\r\n\r\nexport const clearCacheForFolder = (path: string) => cache.remove(fixPath(path));\r\nexport const clearCache = () => cache.clear();\r\nexport const getBasedURL = (p: string) => {return API.getBasedUrl(fixPath(p))}\r\n/**\r\n * Wrap API response for retrieving file content\r\n */\r\nexport const getFileBlob = (path: string, filename: string): Promise<Blob> => {\r\n    path = fixPath(path);\r\n    return API.fetchFile(path, filename)\r\n        .then(response => response.blob())\r\n        .catch(handleFetchError);\r\n};\r\n\r\n/**\r\n * Wrap API response for retrieving file content\r\n */\r\nexport const getFileACL = (path: string, filename: string): Promise<AclItem[]> => {\r\n    path = fixPath(path);\r\n    return API.readAcl(path, filename)\r\n        .then(({ acls }) => acls)\r\n        .catch(handleFetchError);\r\n};\r\n\r\n/**\r\n * Wrap API response for renaming a file\r\n */\r\nexport const renameFile = (path: string, fileName: string, newFileName: string): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.renameFile(path, fileName, newFileName)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n\r\n/**\r\n * Wrap API response for renaming a folder\r\n */\r\nexport const renameFolder = (path: string, folderName: string, newFolderName: string): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.renameFolder(path, folderName, newFolderName)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for creating a folder\r\n */\r\nexport const createFolder = (path: string, folderName: string): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    if (!(folderName || '').trim()) {\r\n        return Promise.reject('Invalid folder name');\r\n    }\r\n    return API.createFolder(path, folderName)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for removing a file or folder\r\n */\r\nexport const removeItems = (path: string, filenames: string[]): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    if (!filenames.length) {\r\n        return Promise.reject('No files to remove');\r\n    }\r\n    return API.removeItems(path, filenames)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for moving a file or folder\r\n */\r\nexport const moveItems = (path: string, destination: string, filenames: string[]): Promise<Response> => {\r\n    path = fixPath(path);\r\n    destination = fixPath(destination);\r\n    cache.remove(path, destination);\r\n    if (!filenames.length) {\r\n        return Promise.reject('No files to move');\r\n    }\r\n    return API.moveItems(path, destination, filenames)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for copying a file or folder\r\n */\r\nexport const copyItems = (path: string, destination: string, filenames: string[]): Promise<Response> => {\r\n    path = fixPath(path);\r\n    destination = fixPath(destination);\r\n    cache.remove(path, destination);\r\n    if (!filenames.length) {\r\n        return Promise.reject('No files to copy');\r\n    }\r\n    return API.copyItems(path, destination, filenames)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for uploading files\r\n */\r\nexport const uploadFiles = (path: string, fileList: FileList): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n\r\n    if (!fileList.length) {\r\n        return Promise.reject('No files to upload');\r\n    }\r\n    return API.upload(path, fileList)\r\n        .catch(handleFetchError)\r\n};\r\n\r\n/**\r\n * Wrap API response for uploading a file\r\n */\r\nexport const updateFile = (path: string, fileName: string, content: Blob|string): Promise<Response> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.updateFile(path, fileName, content)\r\n        .catch(handleFetchError);\r\n};\r\n\r\nexport const integrateInfo= (path: string, dataFileName: string, metadataFileName: string) => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.integrateInfo(path, dataFileName, metadataFileName)\r\n        .catch(handleFetchError);\r\n}\r\n\r\n\r\nexport const createACL = (path: string, fileName: string, content: Blob|string): Promise<boolean> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.createACL(path, fileName, content)\r\n        .catch(handleFetchError);\r\n};\r\n\r\nexport const updateACL = (path: string, fileName: string, aclItem: AclItem[]): Promise<boolean> => {\r\n    path = fixPath(path);\r\n    cache.remove(path);\r\n    return API.updateACLFile(path, fileName, aclItem).catch(handleFetchError);\r\n};\r\n\r\n/**\r\n * Wrap API response for zipping multiple items\r\n */\r\nexport const getAsZip = (path: string, itemList: Item[]): Promise<JSZip> => {\r\n    path = fixPath(path);\r\n    const zip = new JSZip();\r\n\r\n    return addItemsToZip(zip, path, itemList)\r\n        .then(() => zip);\r\n}\r\n\r\n/**\r\n * Add items to a zip object recursively\r\n */\r\nconst addItemsToZip = (zip: JSZip, path: string, itemList: Item[]): Promise<void[]> => {\r\n    const promises = itemList.map(async item => {\r\n        if (item instanceof FolderItem) {\r\n            const zipFolder = zip.folder(item.name);\r\n            const folderPath = `${path}/${item.name}`;\r\n            const folderItems = await getItemList(folderPath);\r\n            await addItemsToZip(zipFolder, folderPath, folderItems);\r\n        }\r\n        else if (item instanceof FileItem) {\r\n            const blob = await getFileBlob(path, item.name);\r\n            zip.file(item.name, blob, { binary: true });\r\n        }\r\n    });\r\n\r\n    return Promise.all(promises);\r\n}\r\n\r\n/**\r\n * Wrap API response for extracting a zip archive\r\n */\r\nexport const extractZipArchive = async (path: string, destination: string = path, fileName: string) => {\r\n    const blob = await getFileBlob(path, fileName);\r\n    const zip = await JSZip.loadAsync(blob);\r\n\r\n    return uploadExtractedZipArchive(zip, destination);\r\n};\r\n\r\n/**\r\n * Recursively upload all files and folders from an extracted zip archive\r\n */\r\nasync function uploadExtractedZipArchive(zip: JSZip, destination: string, curFolder = ''): Promise<void[]> {\r\n    const promises = getItemsInZipFolder(zip, curFolder)\r\n        .map(async item => {\r\n            const relativePath = item.name;\r\n            const itemName = getItemNameFromPath(relativePath);\r\n            const path = getParentPathFromPath(`${destination}/${relativePath}`);\r\n\r\n            if (item.dir) {\r\n                await createFolder(path, itemName);\r\n                await uploadExtractedZipArchive(zip, destination, relativePath);\r\n            }\r\n            else {\r\n                const blob = await item.async('blob');\r\n                await updateFile(path, itemName, blob);\r\n            }\r\n        });\r\n\r\n    return Promise.all(promises);\r\n};\r\n\r\nfunction getItemsInZipFolder(zip: JSZip, folderPath: string): JSZip.JSZipObject[] {\r\n    return Object.keys(zip.files)\r\n        .filter(fileName => {\r\n            // Only items in the current folder and subfolders\r\n            const relativePath = fileName.slice(folderPath.length, fileName.length);\r\n            if (!relativePath || fileName.slice(0, folderPath.length) !== folderPath)\r\n                return false;\r\n            \r\n            // No items from subfolders\r\n            if (relativePath.includes('/') && relativePath.slice(0, -1).includes('/'))\r\n                return false;\r\n\r\n            return true;\r\n        })\r\n        .map(key => zip.files[key]);\r\n};\r\n\r\nfunction getItemNameFromPath(path: string): string {\r\n    path = path.endsWith('/') ? path.slice(0, -1) : path;\r\n    return path.substr(path.lastIndexOf('/') + 1);\r\n}\r\n\r\nfunction getParentPathFromPath(path: string): string {\r\n    path = path.endsWith('/') ? path.slice(0, -1) : path;\r\n    path = path.substr(0, path.lastIndexOf('/'));\r\n    return path;\r\n}\r\n","// eslint-disable-next-line no-unused-vars\r\nimport { Item } from './Item';\r\n\r\nexport default class ApiCache {\r\n    _data: Record<string, Item[]> = {};\r\n\r\n    /**\r\n     * Add data to the cache\r\n     */\r\n    add(path: string, itemList: Item[]): Item[] {\r\n        this._data[path] = itemList;\r\n        return itemList;\r\n    }\r\n\r\n    /**\r\n     * Return true if the url is already cached\r\n     */\r\n    contains(path: string): boolean {\r\n        return this._data.hasOwnProperty(path);\r\n    }\r\n\r\n    /**\r\n     * Get the cached data\r\n     */\r\n    get(path: string): Item[] {\r\n        return this._data[path];\r\n    }\r\n\r\n    /**\r\n     * Remove paths from the cache\r\n     */\r\n    remove(...paths: string[]) {\r\n        paths.filter(path => this.contains(path))\r\n            .forEach(path => delete this._data[path]);\r\n    }\r\n\r\n    /**\r\n     * Clear the whole cache\r\n     */\r\n    clear() {\r\n        this._data = {};\r\n    }\r\n}\r\n","import * as APIHandler from '../Api/ApiHandler';\r\nimport * as solidAuth from 'solid-auth-client';\r\nimport { createBrowserHistory, History } from 'history';\r\nimport { Item, FileItem, FolderItem } from '../Api/Item';\r\nimport { Action, ENTER_FOLDER, SET_LOGGED_IN, SET_LOGGED_OUT, SET_HOST, SET_ITEMS, SET_ACLITEMS, SET_WEB_ID, SELECT_ITEMS, TOGGLE_SELECTED_ITEM, DESELECT_ITEM, FILTER_ITEMS, RESET_FILTER, DISPLAY_LOADING, STOP_LOADING, DIALOGS, OPEN_DIALOG, CLOSE_DIALOG, SET_LOADED_BLOB, SET_UPLOAD_FILE_LIST, SET_UPLOAD_FILE_PROGRESS, SET_PATH, MOVE_FOLDER_UPWARDS, RESET_LOADED_BLOB, RESET_HOST, RESET_WEB_ID, SET_ERROR_MESSAGE, OPEN_CONTEXT_MENU, CLOSE_CONTEXT_MENU } from './actionTypes';\r\nimport { AppState } from '../Reducers/reducer';\r\nimport { ThunkAction, ThunkDispatch } from 'redux-thunk';\r\nimport { AclItem } from '../Api/AclItem';\r\nimport { saveNewVersion } from '../Api/aclUtils';\r\nimport { updateVersion, exposeMetadata } from '../Api/Api';\r\nimport ApiCache from '../Api/ApiCache';\r\n\r\nexport type MyThunk = ThunkAction<void, AppState, null, Action<any>>;\r\nexport type MyDispatch = ThunkDispatch<AppState, null, Action<any>>;\r\n\r\nexport const initApp = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(updateLoginStatus());\r\n  dispatch(openDialog(DIALOGS.CHOOSE_LOCATION));\r\n};\r\n\r\n\r\nexport const solidLogin = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(displayLoading());\r\n\r\n  solidPopupLogin()\r\n    .then(session => dispatch(updateLoginStatus(session)))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const updateLoginStatus = (session?: Session | null): MyThunk => async (dispatch, getState) => {\r\n  session = session || await solidAuth.currentSession();\r\n  if (!session) {\r\n    dispatch(setLoggedOut());\r\n    dispatch(resetWebId());\r\n  }\r\n  else {\r\n    dispatch(setWebId(session.webId));\r\n    dispatch(setLoggedIn());\r\n  }\r\n}\r\n\r\nasync function solidPopupLogin() {\r\n  return solidAuth.popupLogin({ popupUri: './vendor/solid-auth-client/popup.html' });\r\n}\r\n\r\n\r\nexport const solidLogout = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(displayLoading());\r\n\r\n  solidAuth.logout()\r\n    .then(() => {\r\n      dispatch(resetPath());\r\n      dispatch(resetItems());\r\n      dispatch(resetSelectedItems());\r\n      dispatch(setLoggedOut());\r\n      dispatch(resetWebId());\r\n\r\n      dispatch(openDialog(DIALOGS.CHOOSE_LOCATION));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const clearCache = (): MyThunk => (dispatch, getState) => APIHandler.clearCache();\r\n\r\n\r\n/**\r\n * Request API to get file list for the selected path then refresh UI\r\n */\r\nexport const uploadFiles = (): MyThunk => (dispatch, getState) => {\r\n  const { path, upload: { fileList } } = getState();\r\n\r\n  if (fileList === null)\r\n    return dispatch(setErrorMessage(\"Couldn't find files to upload\"));\r\n\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n  dispatch(setFileUploadProgress(50));\r\n\r\n  APIHandler.uploadFiles(path.join('/'), fileList)\r\n    .then(r => {\r\n      dispatch(setFileUploadProgress(100));\r\n      setTimeout(f => {\r\n        dispatch(resetFileUploader());\r\n      }, 300);\r\n      dispatch(displayCurrentItemList());\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const handleExposeData = (item: Item, newContent: { keyword: string, discipline: string }): MyThunk => (dispatch, getState) => {\r\n  const { path, upload: { fileList } } = getState();\r\n\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n\r\n  let folderPath = path.join('/');\r\n  exposeMetadata(folderPath, item.name, newContent);\r\n  dispatch(closeDialog(DIALOGS.EXPOSE_METADATA))\r\n  dispatch(displayCurrentItemList());\r\n};\r\n\r\nexport const handleAddNewVersion = (item: Item, preVersion: string, currentVersion: string): MyThunk => (dispatch, getState) => {\r\n  const { path, upload: { fileList } } = getState();\r\n\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n  dispatch(setFileUploadProgress(50));\r\n  const versionFolderName = \"version\";\r\n  let folderPath = path.join('/');\r\n  const destination = folderPath + \"/\" + versionFolderName + \"/\" + preVersion;\r\n  const itemNames = [item.name];\r\n\r\n  if (fileList === null) {\r\n    dispatch(resetNewVersionUploader());\r\n    dispatch(displayCurrentItemList());\r\n    return dispatch(setErrorMessage(\"Couldn't find files to upload\"));\r\n  }\r\n  if (fileList[0].name != item.name) {\r\n    dispatch(resetNewVersionUploader());\r\n    dispatch(displayCurrentItemList());\r\n    return dispatch(setErrorMessage(\"The new version need to has same file name\"));\r\n  }\r\n\r\n  updateVersion('/' + folderPath, fileList[0].name, currentVersion, preVersion);\r\n\r\n  APIHandler.createFolder(folderPath, versionFolderName)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(setFileUploadProgress(100));\r\n      setTimeout(f => {\r\n        dispatch(resetNewVersionUploader());\r\n      }, 300);\r\n      folderPath += \"/\" + versionFolderName + \"/\";\r\n      APIHandler.createFolder(folderPath, preVersion)\r\n        .then(r => {\r\n          folderPath += \"/\" + preVersion + \"/\";\r\n          APIHandler.moveItems(path.join('/'), destination, itemNames)\r\n            .then(r => {\r\n              APIHandler.renameFile(destination, item.name, item.name + \".old\")\r\n                .catch(r => dispatch(setErrorMessage(String(r))))\r\n                .finally(() => dispatch(stopLoading()));\r\n              APIHandler.uploadFiles(path.join('/'), fileList)\r\n                .then(r => {\r\n                  dispatch(displayCurrentItemList());\r\n                })\r\n                .catch(r => dispatch(setErrorMessage(String(r))))\r\n                .finally(() => {\r\n                  dispatch(stopLoading());\r\n                });\r\n            })\r\n            .catch(r => dispatch(setErrorMessage(String(r))))\r\n            .finally(() => dispatch(stopLoading()));\r\n        })\r\n        .catch(r => dispatch(setErrorMessage(String(r))))\r\n        .finally(() => dispatch(stopLoading()));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const uploadReseachData = (): MyThunk => (dispatch, getState) => {\r\n  const { path, upload: { fileList } } = getState();\r\n\r\n  if (fileList === null)\r\n    return dispatch(setErrorMessage(\"Couldn't find files to upload\"));\r\n\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n  dispatch(setFileUploadProgress(50));\r\n\r\n  APIHandler.uploadFiles(path.join('/'), fileList)\r\n    .then(r => {\r\n      dispatch(setFileUploadProgress(100));\r\n      setTimeout(f => {\r\n        dispatch(resetFileUploader());\r\n      }, 300);\r\n      dispatch(displayCurrentItemList());\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => {\r\n      dispatch(createResearchDataACL(fileList[0].name, 'b'));\r\n      dispatch(stopLoading());\r\n    });\r\n};\r\n\r\nconst getFilePathUrl = (path: string[], fileName: string): string => {\r\n  return APIHandler.getBasedURL(path.join('/')) + '/' + fileName;\r\n}\r\n\r\nconst getProfileUrl = (): string => {\r\n  return APIHandler.getBasedURL(\"profile/card#me\");\r\n}\r\n\r\nexport const createResearchDataACL = (fileName: string, content: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  let filepath = getFilePathUrl(path, fileName);\r\n  let profilePath = getProfileUrl();\r\n\r\n  content = `@prefix  acl:  <http://www.w3.org/ns/auth/acl#> .\r\n    <#authorization0> a  acl:Authorization;\r\n    acl:agent <${profilePath}>;\r\n    acl:accessTo <${filepath}>;\r\n    acl:defaultForNew <./>;\r\n    acl:mode  acl:Read, acl:Write, acl:Control, acl:Append.`\r\n\r\n  fileName += \".acl\";\r\n\r\n  dispatch(displayLoading());\r\n  APIHandler.createACL(path.join('/'), fileName, content)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      return APIHandler.getItemList(path.join('/'));\r\n    })\r\n    .then(itemList => itemList.find(item => item.getDisplayName() === fileName))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const uploadMetadata = (item: Item): MyThunk => (dispatch, getState) => {\r\n  const { path, upload: { fileList } } = getState();\r\n\r\n  if (fileList === null)\r\n    return dispatch(setErrorMessage(\"Couldn't find files to upload\"));\r\n\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n  dispatch(setFileUploadProgress(50));\r\n\r\n  APIHandler.uploadFiles(path.join('/'), fileList)\r\n    .then(r => {\r\n      dispatch(setFileUploadProgress(100));\r\n      setTimeout(f => {\r\n        dispatch(resetMetadataUploader());\r\n      }, 300);\r\n      dispatch(displayCurrentItemList());\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => {\r\n      dispatch(integrateInfo(fileList[0].name, item.name));\r\n      dispatch(createMetadataACL(fileList[0].name));\r\n      dispatch(stopLoading());\r\n    });\r\n};\r\n\r\nexport const integrateInfo = (metadataFileName: string, dataFileName: string):MyThunk => (dispatch, getState) => {\r\n  const {path} = getState();\r\n  APIHandler.integrateInfo(path.join('/'), dataFileName, metadataFileName);\r\n\r\n}\r\n\r\nexport const createMetadataACL = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  let filepath = getFilePathUrl(path, fileName);\r\n  let profilePath = getProfileUrl();\r\n\r\n  let content = `@prefix  acl:  <http://www.w3.org/ns/auth/acl#> .\r\n    <#authorization0> a  acl:Authorization;\r\n    acl:agent <${profilePath}>;\r\n    acl:accessTo <${filepath}>;\r\n    acl:defaultForNew <./>;\r\n    acl:mode  acl:Read, acl:Write, acl:Control, acl:Append.\r\n\r\n    <#authorization1> a  acl:Authorization;\r\n    acl:defaultForNew  <./>;\r\n    acl:accessTo   <${filepath}>; \r\n    acl:mode   acl:Read;\r\n    acl:agentClass <http://xmlns.com/foaf/0.1/Agent>.`\r\n\r\n  fileName += \".acl\";\r\n\r\n  dispatch(displayLoading());\r\n  APIHandler.createACL(path.join('/'), fileName, content)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      return APIHandler.getItemList(path.join('/'));\r\n    })\r\n    .then(itemList => itemList.find(item => item.getDisplayName() === fileName))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\nexport const createFile = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  APIHandler.updateFile(path.join('/'), fileName, new Blob())\r\n    .then(r => {\r\n      dispatch(closeDialog(DIALOGS.CREATE_FILE));\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(loadAndEditFile(fileName));\r\n      return APIHandler.getItemList(path.join('/'));\r\n    })\r\n    .then(itemList => itemList.find(item => item.getDisplayName() === fileName))\r\n    .then(item => {\r\n      if (!item)\r\n        throw new Error(\"Couldn't load created file for editing\");\r\n      dispatch(selectItem(item));\r\n      dispatch(getFileContent(item.name));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\nexport const updateAccessControl = (fileName: string, aclItem: AclItem[]): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  //change name to point to .acl file\r\n  fileName += \".acl\";\r\n\r\n  APIHandler.updateACL(path.join('/'), fileName, aclItem)\r\n    .then(r => {\r\n      dispatch(closeDialog(DIALOGS.ACCESS_CONTROL));\r\n      dispatch(displayCurrentItemList());\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n}\r\n\r\nexport const updateTextFile = (fileName: string, content: Blob | string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n  \r\n  APIHandler.updateFile(path.join('/'), fileName, content)\r\n    .then(r => {\r\n      dispatch(closeDialog(DIALOGS.EDIT));\r\n      dispatch(displayCurrentItemList());\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n}\r\n\r\n/**\r\n * Request API to display file list for the selected path\r\n */\r\nexport const displayCurrentItemList = (): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n  dispatch(resetSelectedItems());\r\n  APIHandler.getItemList(path.join('/'))\r\n    .then(items => dispatch(setItems(items)))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n/**\r\n * Request API to reload the file list and then refresh UI\r\n */\r\nexport const refreshItemList = (): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  APIHandler.clearCacheForFolder(path.join('/'));\r\n  return dispatch(displayCurrentItemList());\r\n};\r\n\r\n\r\n/**\r\n * Request API to rename file then dispatch defined events\r\n */\r\nexport const renameFile = (fileName: string, newFileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  APIHandler.renameFile(path.join('/'), fileName, newFileName)\r\n    .then(() => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(closeDialog(DIALOGS.RENAME));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n/**\r\n * Request API to rename file then dispatch defined events\r\n */\r\nexport const renameFolder = (folderName: string, newFolderName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  APIHandler.renameFolder(path.join('/'), folderName, newFolderName)\r\n    .then(() => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(closeDialog(DIALOGS.RENAME));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n/**\r\n * Request API to download the specified items\r\n */\r\nexport const downloadItems = (items: Item[]): MyThunk => async (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  try {\r\n    let blob;\r\n    let downloadName = items[0].name;\r\n    if (items.length === 1 && items[0] instanceof FileItem) {\r\n      blob = await APIHandler.getFileBlob(path.join('/'), items[0].name);\r\n    }\r\n    else {\r\n      const zip = await APIHandler.getAsZip(path.join('/'), items);\r\n      blob = await zip.generateAsync({ type: 'blob' });\r\n\r\n      if (items.length > 1)\r\n        downloadName = 'Archive';\r\n      downloadName = `${downloadName}.zip`;\r\n    }\r\n\r\n    promptDownload(blob, downloadName);\r\n  }\r\n  catch (e) {\r\n    dispatch(setErrorMessage(String(e)));\r\n  }\r\n  dispatch(stopLoading());\r\n};\r\n\r\n/**\r\n * Request API to upload the items as zip archive\r\n */\r\nexport const zipAndUpload = (items: Item[]): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  const archiveName = (items.length === 1 && items[0] instanceof FolderItem) ?\r\n    `${items[0].name}.zip`\r\n    : 'Archive.zip';\r\n\r\n  APIHandler.getAsZip(path.join('/'), items)\r\n    .then(zip => zip.generateAsync({ type: 'blob' }))\r\n    .then(blob => APIHandler.updateFile(path.join('/'), archiveName, blob))\r\n    .then(() => dispatch(displayCurrentItemList()))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n/**\r\n * Request API for extracting a zip archive\r\n */\r\nexport const extractZipFile = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  APIHandler.extractZipArchive(path.join('/'), path.join('/'), fileName)\r\n    .then(r => dispatch(displayCurrentItemList()))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n// code based on https://stackoverflow.com/a/30832210/6548154\r\nfunction promptDownload(file: Blob, fileName: string) {\r\n  if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n    window.navigator.msSaveOrOpenBlob(file, fileName);\r\n  else { // Others\r\n    const a = document.createElement(\"a\");\r\n    const url = URL.createObjectURL(file);\r\n    a.href = url;\r\n    a.download = fileName;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(() => {\r\n      document.body.removeChild(a);\r\n      window.URL.revokeObjectURL(url);\r\n    }, 0);\r\n  }\r\n}\r\n\r\n/**\r\n * Opens the item in a new tab\r\n */\r\nexport const openInNewTab = (item: Item): MyThunk => (dispatch, getState) => {\r\n  window.open(item.url, '_blank');\r\n};\r\n\r\n\r\n/**\r\n * Request API to get file content then dispatch defined events\r\n */\r\nexport const getFileContent = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n  dispatch(resetFileContent());\r\n\r\n  APIHandler.getFileBlob(path.join('/'), fileName)\r\n    .then(blob => dispatch(setFileContent(blob)))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n/**\r\n * Request API to get acl file content then dispatch defined events\r\n */\r\nexport const getACLContent = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n  dispatch(resetFileContent());\r\n\r\n  APIHandler.getFileACL(path.join('/'), fileName)\r\n    .then(items => dispatch(setAclItems(items)))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\n/**\r\n * Request API to get file content and open the edit dialogue\r\n */\r\nexport const loadAndEditFile = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  dispatch(getFileContent(fileName));\r\n  dispatch(openDialog(DIALOGS.EDIT));\r\n};\r\n\r\nexport const loadExposeMetadata = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  dispatch(getFileContent(fileName));\r\n  dispatch(openDialog(DIALOGS.EXPOSE_METADATA));\r\n};\r\n\r\nexport const loadMetadataFile = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  dispatch(getFileContent(fileName + '.ttl'));\r\n  dispatch(openDialog(DIALOGS.ADD_NEW_VERSION));\r\n};\r\n\r\n/**\r\n * Request API to get file content and open the edit dialogue\r\n */\r\nexport const loadAndOpenAccessControl = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  dispatch(getFileContent(fileName + \".acl\"));\r\n  dispatch(openDialog(DIALOGS.ACCESS_CONTROL));\r\n};\r\n\r\n\r\n/**\r\n * Request API to get file content and display it\r\n */\r\nexport const loadAndDisplayFile = (fileName: string): MyThunk => (dispatch, getState) => {\r\n  dispatch(getFileContent(fileName));\r\n  dispatch(openDialog(DIALOGS.CONTENT));\r\n};\r\n\r\n\r\n/**\r\n * Request API to display an audio or video file\r\n */\r\nexport const displaySelectedMediaFile = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(openDialog(DIALOGS.MEDIA));\r\n};\r\n\r\n\r\n/**\r\n * Request API to create a folder then dispatch defined events\r\n */\r\nexport const createNewFolder = (folderName: string): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  APIHandler.createFolder(path.join('/'), folderName)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(closeDialog(DIALOGS.CREATE_FOLDER));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\n/**\r\n * Request API to remove multiple items\r\n */\r\nexport const removeItems = (items: Item[]): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  const itemNames = items.map(f => f.name);\r\n\r\n  APIHandler.removeItems(path.join('/'), itemNames)\r\n    .then(r => dispatch(displayCurrentItemList()))\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\n/**\r\n * Request API to move multiple items\r\n */\r\nexport const moveItems = (items: Item[], { host, path: targetPath }: { host: string, path: string[] }): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n\r\n  const destination = targetPath.join('/');\r\n  const itemNames = items.map(f => f.name);\r\n\r\n  APIHandler.moveItems(path.join('/'), destination, itemNames)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(closeDialog(DIALOGS.MOVE));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\n/**\r\n * Request API to copy an item then dispatch defined events\r\n */\r\nexport const copyItems = (items: Item[], { host, path: targetPath }: { host: string, path: string[] }): MyThunk => (dispatch, getState) => {\r\n  const { path } = getState();\r\n  dispatch(displayLoading());\r\n\r\n  const destination = targetPath.join('/');\r\n  const itemNames = items.map(f => f.name);\r\n\r\n  APIHandler.copyItems(path.join('/'), destination, itemNames)\r\n    .then(r => {\r\n      dispatch(displayCurrentItemList());\r\n      dispatch(closeDialog(DIALOGS.COPY));\r\n    })\r\n    .catch(r => dispatch(setErrorMessage(String(r))))\r\n    .finally(() => dispatch(stopLoading()));\r\n};\r\n\r\n\r\n/**\r\n * This handles multiple selection by using shift key\r\n */\r\nexport const setSelectedItemsFromLastTo = (lastFile: Item): MyThunk => (dispatch, getState) => {\r\n  const { items: { inCurFolder: items, selected: selectedItems } } = getState();\r\n\r\n  const lastPreviouslySelected = [...selectedItems].pop();\r\n  if (!lastPreviouslySelected)\r\n    return dispatch(setErrorMessage(\"Couldn't enlarge selection because no items were previously selected\"));\r\n\r\n  const lastPreviouslySelectedIndex = items.indexOf(lastPreviouslySelected);\r\n  const lastSelectedIndex = items.indexOf(lastFile);\r\n\r\n  const isInRange = (num: number, start: number, end: number) => start <= num && num <= end;\r\n  const toAdd = lastSelectedIndex > lastPreviouslySelectedIndex ?\r\n    items.filter((item, index) => isInRange(index, lastPreviouslySelectedIndex, lastSelectedIndex))\r\n    : items.filter((item, index) => isInRange(index, lastSelectedIndex, lastPreviouslySelectedIndex));\r\n\r\n  dispatch(selectItems([...selectedItems, ...toAdd]));\r\n};\r\n\r\n\r\nexport const resetFileUploader = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(setFileUploadProgress(0));\r\n  dispatch(closeDialog(DIALOGS.UPLOAD_FILE));\r\n  dispatch(resetFileUploadList());\r\n};\r\n\r\nexport const resetNewVersionUploader = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(setFileUploadProgress(0));\r\n  dispatch(closeDialog(DIALOGS.ADD_NEW_VERSION));\r\n  dispatch(resetFileUploadList());\r\n};\r\n\r\nexport const resetAccessControl = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(setFileUploadProgress(0));\r\n  dispatch(closeDialog(DIALOGS.ACCESS_CONTROL));\r\n  dispatch(resetFileUploadList());\r\n};\r\n\r\n\r\nexport const resetMetadataUploader = (): MyThunk => (dispatch, getState) => {\r\n  dispatch(setFileUploadProgress(0));\r\n  dispatch(closeDialog(DIALOGS.UPLOAD_METADATA));\r\n  dispatch(resetFileUploadList());\r\n};\r\n\r\n\r\nexport const enterFolder = (path: string[]): MyThunk => (dispatch, getState) => {\r\n  dispatch(setPath(path));\r\n  dispatch(resetFilter());\r\n  dispatch(displayCurrentItemList());\r\n};\r\n\r\nexport const enterFolderByItem = (item: Item): MyThunk => (dispatch, getState) => {\r\n  const path = item.path;\r\n  // Open containing folder if it is a file\r\n  dispatch(enterFolder(item instanceof FileItem ? path : [...path, item.name]));\r\n};\r\n\r\nexport const moveFolderUpwardsAndRefresh = (n: number): MyThunk => (dispatch, getState) => {\r\n  dispatch(moveFolderUpwards(n));\r\n  dispatch(refreshItemList());\r\n};\r\n\r\nexport const rightClickOnFile = (item: Item): MyThunk => (dispatch, getState) => {\r\n  const { items: { selected } } = getState();\r\n  const isSelected = selected.includes(item);\r\n\r\n  !isSelected && dispatch(selectItem(item));\r\n};\r\n\r\n\r\n// Create action which can be dispatched\r\nconst makeActionCreator: <VALUE = void>(type: string) => (value: VALUE) => Action<VALUE> = <VALUE = void>(type: string) => (value: VALUE) => {\r\n  return {\r\n    type,\r\n    value\r\n  };\r\n};\r\n\r\nexport const moveFolderUpwards = makeActionCreator<number>(MOVE_FOLDER_UPWARDS);\r\nexport const setPath = makeActionCreator<string[]>(SET_PATH);\r\nexport const resetPath = () => setPath([]);\r\n\r\nexport const setLoggedIn = makeActionCreator(SET_LOGGED_IN);\r\nexport const setLoggedOut = makeActionCreator(SET_LOGGED_OUT);\r\nexport const setHost = makeActionCreator<string>(SET_HOST);\r\nexport const resetHost = makeActionCreator(RESET_HOST);\r\nexport const setWebId = makeActionCreator<string>(SET_WEB_ID);\r\nexport const resetWebId = makeActionCreator(RESET_WEB_ID);\r\n\r\nexport const setItems = makeActionCreator<Item[]>(SET_ITEMS);\r\nexport const resetItems = () => setItems([]);\r\n\r\nexport const setAclItems = makeActionCreator<AclItem[]>(SET_ACLITEMS);\r\nexport const resetAclItems = () => setAclItems([]);\r\n\r\nexport const selectItems = makeActionCreator<Item[]>(SELECT_ITEMS);\r\nexport const selectItem = (item: Item) => selectItems([item]);\r\nexport const resetSelectedItems = () => selectItems([]);\r\nexport const toggleSelectedItem = makeActionCreator<Item>(TOGGLE_SELECTED_ITEM);\r\nexport const deselectItem = makeActionCreator<Item>(DESELECT_ITEM);\r\n\r\nexport const filterItems = makeActionCreator<string>(FILTER_ITEMS);\r\nexport const resetFilter = makeActionCreator(RESET_FILTER);\r\n\r\n\r\nexport const displayLoading = makeActionCreator(DISPLAY_LOADING);\r\nexport const stopLoading = makeActionCreator(STOP_LOADING);\r\n\r\nexport const resetFileContent = makeActionCreator(RESET_LOADED_BLOB);\r\nexport const setFileContent = makeActionCreator<Blob>(SET_LOADED_BLOB);\r\nexport const setFileUploadList = makeActionCreator<FileList | null>(SET_UPLOAD_FILE_LIST);\r\nexport const resetFileUploadList = () => setFileUploadList(null);\r\nexport const setFileUploadProgress = makeActionCreator<number>(SET_UPLOAD_FILE_PROGRESS);\r\n\r\nexport const openDialog = makeActionCreator<DIALOGS>(OPEN_DIALOG);\r\nexport const closeDialog = makeActionCreator<DIALOGS>(CLOSE_DIALOG);\r\nexport const openContextMenu = makeActionCreator<{ x: number, y: number }>(OPEN_CONTEXT_MENU);\r\nexport const closeContextMenu = makeActionCreator(CLOSE_CONTEXT_MENU);\r\n\r\nexport const setErrorMessage = makeActionCreator<string>(SET_ERROR_MESSAGE);\r\nexport const resetErrorMessage = () => setErrorMessage('');\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n    setSelectedItemsFromLastTo, loadAndEditFile, loadAndDisplayFile, displaySelectedMediaFile,\r\n    rightClickOnFile, enterFolderByItem, MyDispatch, openContextMenu, toggleSelectedItem, selectItems\r\n} from '../../Actions/Actions';\r\nimport './File.css';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport FileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport { FileItem, Item } from '../../Api/Item';\r\nimport { AppState } from '../../Reducers/reducer';\r\n\r\nclass File extends Component<FileProps> {\r\n    render() {\r\n        const { isSelected, item, handleClick, handleDoubleClick, handleContextMenu } = this.props;\r\n        const avatarStyle = {\r\n            backgroundColor: isSelected ? blue['A200'] : undefined\r\n        };\r\n        const realSize = (item instanceof FileItem) ? item.getDisplaySize() : null;\r\n        return (\r\n            <div className=\"File\" onClick={handleClick} onDoubleClick={handleDoubleClick} onContextMenu={handleContextMenu} data-selected={isSelected}>\r\n                <ListItem>\r\n                    <ListItemAvatar>\r\n                        <Avatar style={avatarStyle}>\r\n                            { (item instanceof FileItem) ? <FileIcon /> : <FolderIcon />}\r\n                        </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText className=\"filename\" primary={item.getDisplayName()} secondary={realSize} />\r\n                </ListItem>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\ninterface FileOwnProps {\r\n    item: Item;\r\n}\r\ninterface StateProps {\r\n    isSelected: boolean;\r\n}\r\ninterface DispatchProps {\r\n    handleClick(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\r\n    handleDoubleClick(): void;\r\n    handleContextMenu(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\r\n}\r\ninterface FileProps extends FileOwnProps, StateProps, DispatchProps {}\r\n\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: FileOwnProps): StateProps => {\r\n    return {\r\n        isSelected: state.items.selected.includes(ownProps.item)\r\n    };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch, ownProps: FileOwnProps): DispatchProps => {\r\n    return {\r\n        handleDoubleClick: () => {\r\n            const item = ownProps.item;\r\n\r\n            if (item instanceof FileItem) {\r\n                if (item.isEditable())\r\n                    dispatch(loadAndEditFile(item.name));\r\n                else if (item.isImage())\r\n                    dispatch(loadAndDisplayFile(item.name));\r\n                else if (item.isMedia())\r\n                    dispatch(displaySelectedMediaFile());\r\n            }\r\n            else\r\n                dispatch(enterFolderByItem(item));\r\n        },\r\n\r\n        handleContextMenu: (event: React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent) => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n\r\n            let x = 0;\r\n            let y = 0;\r\n\r\n            if (event.nativeEvent instanceof MouseEvent) {\r\n                x = event.nativeEvent.clientX;\r\n                y = event.nativeEvent.clientY;\r\n            }\r\n            else if (event.nativeEvent instanceof TouchEvent) {\r\n                x = event.nativeEvent.touches[0].pageX;\r\n                y = event.nativeEvent.touches[0].pageY;\r\n            }\r\n            else {\r\n                console.warn(\"Unknown click event\", event);\r\n            }\r\n\r\n            if (event.shiftKey) {\r\n                dispatch(setSelectedItemsFromLastTo(ownProps.item));\r\n            } else {\r\n                dispatch(rightClickOnFile(ownProps.item));\r\n            }\r\n            \r\n            dispatch(openContextMenu({ x, y }));\r\n        },\r\n\r\n        handleClick: (event: React.MouseEvent<HTMLDivElement, MouseEvent> | React.TouchEvent) => {\r\n            event.stopPropagation();\r\n\r\n            if (event.ctrlKey) {\r\n                dispatch(toggleSelectedItem(ownProps.item));\r\n            } else if (event.shiftKey) {\r\n                dispatch(setSelectedItemsFromLastTo(ownProps.item));\r\n            } else {\r\n                dispatch(selectItems([ownProps.item]));\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(File);\r\n","import React from 'react';\r\nimport './FileListEmptyMessage.css';\r\n\r\nexport default function FileListEmptyMessage() {\r\n    return (\r\n        <div className=\"FileListEmptyMessage\">\r\n            No files in this folder\r\n        </div>\r\n    );\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, createStyles, Theme, WithStyles } from '@material-ui/core/styles';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  progress: {\r\n    margin: theme.spacing.unit * 10,\r\n  },\r\n});\r\n\r\nfunction Loader(props: LoaderProps) {\r\n    return (\r\n        <Grid container justify=\"center\">\r\n            <CircularProgress className={props.classes.progress} color=\"secondary\" />\r\n        </Grid>\r\n    );\r\n}\r\n\r\ninterface LoaderProps extends WithStyles<typeof styles> {};\r\n\r\nexport default withStyles(styles)(Loader);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport File from '../File/File'; \r\nimport FileListEmptyMessage from './FileListEmptyMessage';\r\nimport Loader from '../Loader/Loader'; \r\nimport './FileList.css';\r\nimport { Item } from '../../Api/Item';\r\nimport { AppState } from '../../Reducers/reducer';\r\n\r\nclass FileList extends Component<FileListProps> {\r\n    render() {\r\n        const { items, isLoading } = this.props;\r\n        const itemComponents = items.map((item, key) => {\r\n            return <File item={item} key={key} />;\r\n        });\r\n\r\n        return <div className=\"FileList\">\r\n            { isLoading ? \r\n                <Loader /> : \r\n                itemComponents.length ? itemComponents : <FileListEmptyMessage />\r\n            }\r\n        </div>\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    items: Item[];\r\n    isLoading: boolean;\r\n}\r\ninterface FileListProps extends StateProps {};\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    const items = state.items.inCurFolder\r\n        .filter(item => filterMatch(item.getDisplayName(), state.items.filter));\r\n\r\n    return {\r\n        items,\r\n        isLoading: state.loading,\r\n    };\r\n};\r\n\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nconst filterMatch = (first: string, second: string) => {\r\n    return first.toLocaleLowerCase().match(second.toLocaleLowerCase());\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FileList);\r\n\r\n\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction CreateFolderAction(props: CreateFolderActionProps) {\r\n    const {handleClick, handleClose} = props;\r\n\r\n    const handleCloseAfter = (callback: () => void) => () => {\r\n        callback();\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <MenuItem onClick={handleCloseAfter(handleClick)}>\r\n            <ListItemIcon>\r\n                <CreateNewFolderIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Add new folder\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface CreateFolderActionProps {\r\n    handleClick(): void;\r\n    handleClose(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.CREATE_FOLDER));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateFolderAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction CreateFileAction(props: CreateFileActionProps) {\r\n    const {handleClick, handleClose} = props;\r\n\r\n    const handleCloseAfter = (callback: () => void) => () => {\r\n        callback();\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <MenuItem onClick={handleCloseAfter(handleClick)}>\r\n            <ListItemIcon>\r\n                <InsertDriveFileIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Create file\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface CreateFileActionProps {\r\n    handleClick(): void;\r\n    handleClose(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.CREATE_FILE));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateFileAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction UploadFileAction(props: UploadFileActionProps) {\r\n    const { handleClick, handleClose } = props;\r\n\r\n    const handleCloseAfter = (callback: () => void) => () => {\r\n        callback();\r\n        handleClose();\r\n    };\r\n\r\n    return (\r\n        <MenuItem onClick={handleCloseAfter(handleClick)}>\r\n            <ListItemIcon>\r\n                <CloudUploadIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Upload Research Data\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface UploadFileActionProps {\r\n    handleClick(): void;\r\n    handleClose(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.UPLOAD_FILE));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadFileAction);\r\n","import React from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport { connect } from 'react-redux';\r\nimport CreateFolderAction from '../ContextMenu/ContextMenuActions/CreateFolderAction';\r\nimport CreateFileAction from '../ContextMenu/ContextMenuActions/CreateFileAction';\r\nimport UploadFileAction from '../ContextMenu/ContextMenuActions/UploadFileAction';\r\nimport ChooseLocationAction from '../ContextMenu/ContextMenuActions/ChooseLocationAction';\r\n\r\nconst style = {\r\n  color: 'white'\r\n};\r\n\r\nclass ThreeDotsMenu extends React.Component {\r\n  state = {\r\n    anchorEl: null as HTMLElement|null,\r\n  };\r\n\r\n  handleClick = (event: React.MouseEvent<HTMLElement, MouseEvent>) => {\r\n    this.setState({ anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ anchorEl: null });\r\n  };\r\n\r\n  render() {\r\n    const { anchorEl } = this.state;\r\n\r\n    return (\r\n      <div style={{marginLeft:'1em'}}>\r\n        <IconButton color=\"inherit\" \r\n          style={style}\r\n          aria-label=\"More\"\r\n          aria-owns={Boolean(anchorEl) ? 'long-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n          onClick={this.handleClick}>\r\n          <MoreVertIcon />\r\n        </IconButton>\r\n\r\n        <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={this.handleClose}>\r\n          <CreateFolderAction handleClose={this.handleClose} />\r\n          <CreateFileAction handleClose={this.handleClose} />\r\n          <UploadFileAction handleClose={this.handleClose} />\r\n          {/* <ChooseLocationAction handleClose={this.handleClose} /> */}\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ThreeDotsMenu);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, createStyles, Theme, WithStyles } from '@material-ui/core/styles';\r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport Button from '@material-ui/core/Button';\r\nimport './BreadcrumbText.css';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  lastPath: {\r\n    display: 'block',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none'\r\n    }\r\n  },\r\n  paths: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    }\r\n  }\r\n});\r\n\r\nclass BreadcrumbText extends Component<BreadcrumbTextProps> {\r\n\r\n    render() {\r\n        const { classes, handleClickPath, path, rootTitle, handleGoBack, canGoBack } = this.props;\r\n\r\n        const separator = <span>&gt;</span>;\r\n        const rootPath = <span onClick={() => handleClickPath(-1)} data-index={0}>\r\n            { rootTitle } { path.length ? separator : '' }\r\n        </span>;\r\n        const lastPath = [...path].pop() || rootTitle;\r\n\r\n        const directories = path.map((dir, index) => {\r\n            return <span key={index} data-index={index} onClick={(e) => handleClickPath(index)}>\r\n                <span>{dir}</span> { path.length -1 !== index ? separator : '' }&nbsp;\r\n            </span>\r\n        });\r\n\r\n        return (\r\n            <div className=\"BreadcrumbText\">\r\n                <div className={classes.lastPath}>\r\n                    <Button onClick={handleGoBack} color=\"inherit\" type=\"button\" style={{display: canGoBack ? 'inline-flex' : 'none'}}>\r\n                        <KeyboardArrowLeftIcon />\r\n                    </Button>\r\n                    {lastPath}\r\n                </div>\r\n                <div className={classes.paths}>{rootPath} {directories}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface BreadcrumbTextProps extends WithStyles<typeof styles> {\r\n    handleClickPath(index: number): void;\r\n    handleGoBack(): void;\r\n    canGoBack: boolean;\r\n    path: string[];\r\n    rootTitle: string;\r\n\r\n}\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(BreadcrumbText));\r\n","import React, { ChangeEvent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nimport { withStyles, Theme, createStyles, WithStyles } from '@material-ui/core/styles';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport RefreshIcon from '@material-ui/icons/Refresh';\r\nimport { connect } from 'react-redux';\r\nimport { refreshItemList, moveFolderUpwardsAndRefresh, filterItems, MyDispatch } from '../../Actions/Actions';\r\nimport ThreeDotsMenu from './ThreeDotsMenu';\r\nimport BreadcrumbText from '../Breadcrumb/BreadcrumbText';\r\nimport { AppState } from '../../Reducers/reducer';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  root: {\r\n    width: '100%',\r\n    marginBottom: '4.3em'\r\n  },\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginLeft: -12,\r\n    marginRight: 20,\r\n  },\r\n  title: {\r\n    display: 'block', // was none\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginLeft: 0,\r\n    width: '100%',\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing.unit,\r\n      width: 'auto',\r\n      display: 'block'\r\n    },\r\n  },\r\n  searchIcon: {\r\n    width: theme.spacing.unit * 9,\r\n    color: '#efefef',\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: '#efefef',\r\n    width: '100%',\r\n  },\r\n  refreshIcon: {\r\n    color: '#efefef'    \r\n  },\r\n  inputInput: {\r\n    paddingTop: theme.spacing.unit,\r\n    paddingRight: theme.spacing.unit,\r\n    paddingBottom: theme.spacing.unit,\r\n    paddingLeft: theme.spacing.unit * 10,\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: 100,\r\n      '&:focus': {\r\n        width: 200,\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction SearchAppBar(props: SearchAppBarProps) {\r\n  const { classes, path, filter, moveUpwards, canGoBack, handleChange, handleRefresh } = props;\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar>\r\n          <Typography className={classes.title} variant=\"h6\" color=\"inherit\" noWrap>\r\n            <BreadcrumbText \r\n                path={path} \r\n                handleClickPath={index => moveUpwards(path.length - index - 1)} \r\n                handleGoBack={() => moveUpwards(1)}\r\n                canGoBack={canGoBack}\r\n                rootTitle=\"SolidRDP\"\r\n            />\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n\r\n          <div className={classes.search}>\r\n            <div className={classes.searchIcon}>\r\n              <SearchIcon />\r\n            </div>\r\n            <InputBase\r\n              placeholder=\"Search…\"\r\n              value={filter}\r\n              onChange={handleChange}\r\n              classes={{\r\n                root: classes.inputRoot,\r\n                input: classes.inputInput,\r\n              }}\r\n            />\r\n          </div>\r\n          <IconButton color=\"inherit\" className={classes.refreshIcon} aria-label=\"Refresh\" onClick={handleRefresh}>\r\n            <RefreshIcon/>\r\n          </IconButton>\r\n          <ThreeDotsMenu />\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface StateProps {\r\n  filter: string;\r\n  path: string[];\r\n  canGoBack: boolean; \r\n}\r\ninterface DispatchProps {\r\n  handleChange(event: ChangeEvent<HTMLInputElement>): void;\r\n  moveUpwards(n: number): void;\r\n  handleRefresh(): void;\r\n}\r\ninterface SearchAppBarProps extends StateProps, DispatchProps, WithStyles<typeof styles> {\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        filter: state.items.filter,\r\n        path: state.path,\r\n        canGoBack: state.path.length > 0,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleChange: (event) => {\r\n            dispatch(filterItems(event.currentTarget.value));\r\n        },\r\n        moveUpwards: (n) => {\r\n          console.log('moveUpwards', n);\r\n          dispatch(moveFolderUpwardsAndRefresh(n));\r\n        },\r\n        handleRefresh: () => dispatch(refreshItemList())\r\n    };\r\n};\r\n\r\n\r\nexport default withStyles(styles)(connect(mapStateToProps, mapDispatchToProps)(SearchAppBar));\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport { loadAndDisplayFile, displaySelectedMediaFile, loadAndEditFile, enterFolderByItem, MyDispatch } from '../../../Actions/Actions';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\r\nimport { FileItem, FolderItem, Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction OpenAction(props: OpenActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <OpenInBrowserIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Open\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface OpenActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            const item = selectedItems[0];\r\n\r\n            if (item instanceof FolderItem)\r\n                dispatch(enterFolderByItem(item));\r\n            else if (item instanceof FileItem) {\r\n                if (item.isEditable())\r\n                    dispatch(loadAndEditFile(item.name));\r\n                else if (item.isImage())\r\n                    dispatch(loadAndDisplayFile(item.name));\r\n                else if (item.isMedia())\r\n                    dispatch(displaySelectedMediaFile());\r\n            }\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OpenAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport { removeItems, MyDispatch } from '../../../Actions/Actions';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction RemoveAction(props: RemoveActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <DeleteIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Remove\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface RemoveActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(removeItems(selectedItems));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RemoveAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction MoveAction(props: MoveActionProps) {\r\n    const { handleClick } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick()}>\r\n            <ListItemIcon>\r\n                <HowToVoteIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Move\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface MoveActionProps {\r\n    handleClick(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.MOVE));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoveAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS, Action } from '../../../Actions/actionTypes';\r\n\r\nfunction CopyAction(props: CopyActionProps) {\r\n    const { handleClick } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={handleClick}>\r\n            <ListItemIcon>\r\n                <FileCopyIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Copy\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface CopyActionProps {\r\n    handleClick(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.COPY));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CopyAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport { loadAndEditFile, MyDispatch } from '../../../Actions/Actions';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction OpenAction(props: OpenActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <OpenInBrowserIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Edit\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface OpenActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(loadAndEditFile(selectedItems[0].name));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OpenAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport WrapTextIcon from '@material-ui/icons/WrapText';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction MoveAction(props: MoveActionProps) {\r\n    const { handleClick } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={handleClick}>\r\n            <ListItemIcon>\r\n                <WrapTextIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Rename\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface MoveActionProps {\r\n    handleClick(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.RENAME));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoveAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ArchiveIcon from '@material-ui/icons/Archive';\r\nimport { zipAndUpload, MyDispatch } from '../../../Actions/Actions';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction ZipAction(props: ZipActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <ArchiveIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Zip here\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface ZipActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(zipAndUpload(selectedItems));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ZipAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport UnarchiveIcon from '@material-ui/icons/Unarchive';\r\nimport { extractZipFile, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { Item } from '../../../Api/Item';\r\n\r\nfunction ExtractAction(props: ExtractActionProps) {\r\n    const {handleClick, selectedItems} = props;\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <UnarchiveIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Extract here\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface ExtractActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(extractZipFile(selectedItems[0].name));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExtractAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport { downloadItems, MyDispatch } from '../../../Actions/Actions';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport { FileItem, Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction DownloadAction(props: DownloadActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <CloudDownloadIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                {(selectedItems.length === 1 && selectedItems[0] instanceof FileItem) ? \r\n                    'Download'\r\n                    : 'Download Zip'\r\n                }\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface DownloadActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(downloadItems(selectedItems));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DownloadAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport { openInNewTab, MyDispatch } from '../../../Actions/Actions';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport LinkIcon from '@material-ui/icons/Link';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nfunction OpenInNewTabAction(props: OpenInNewTabActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <LinkIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Open in new Tab\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface OpenInNewTabActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(openInNewTab(selectedItems[0]));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OpenInNewTabAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction UploadMetadataAction(props: UploadMetadataActionProps) {\r\n    const { handleClick } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={handleClick}>\r\n            <ListItemIcon>\r\n                <CloudUploadIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Upload Metadata\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface UploadMetadataActionProps {\r\n    handleClick(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            dispatch(openDialog(DIALOGS.UPLOAD_METADATA));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UploadMetadataAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloudUploadIcon from '@material-ui/icons/Settings';\r\nimport { openDialog, MyDispatch, loadAndOpenAccessControl } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nimport { Item } from '../../../Api/Item';\r\n\r\nfunction AccessControlAction(props: AccessControlActionProps) {\r\n\r\n    const { handleClick, selectedItems } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <CloudUploadIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Access Control\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface AccessControlActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {selectedItems: state.items.selected};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(loadAndOpenAccessControl(selectedItems[0].name));\r\n        }\r\n        // handleClick: () => {\r\n        //     dispatch(openDialog(DIALOGS.ACCESS_CONTROL));\r\n        // }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AccessControlAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport { openDialog, MyDispatch, loadMetadataFile } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nimport { Item } from '../../../Api/Item';\r\n\r\nfunction AddNewVersionAction(props: AddNewVersionActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n\r\n    const handleCloseAfter = (callback: () => void) => () => {\r\n        callback();\r\n    };\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <CloudUploadIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Add new Version\r\n            </Typography>\r\n        </MenuItem>\r\n    );\r\n}\r\n\r\ninterface AddNewVersionActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n    // handleClose(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(loadMetadataFile(selectedItems[0].name));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddNewVersionAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport HowToVoteIcon from '@material-ui/icons/HowToVote';\r\nimport { openDialog, MyDispatch, loadExposeMetadata } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nimport { Item } from '../../../Api/Item';\r\n\r\nfunction ExposeMetadataAction(props: ExposeMetadataActionProps) {\r\n    const { handleClick, selectedItems } = props;\r\n    return (\r\n        <MenuItem onClick={() => handleClick(selectedItems)}>\r\n            <ListItemIcon>\r\n                <HowToVoteIcon />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Expose Metadata\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface ExposeMetadataActionProps {\r\n    handleClick(selectedItems: Item[]): void;\r\n    selectedItems: Item[];\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        selectedItems: state.items.selected};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: (selectedItems: Item[]) => {\r\n            dispatch(loadExposeMetadata(selectedItems[0].name));\r\n            // dispatch(openDialog(DIALOGS.EXPOSE_METADATA));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExposeMetadataAction);\r\n","import React from 'react';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { connect } from 'react-redux';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport SettingsBackupRestore from '@material-ui/icons/SettingsBackupRestore';\r\nimport { openDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nfunction RevertVersionAction(props: RevertVersionActionProps) {\r\n    const { handleClick } = props;\r\n\r\n    return (\r\n        <MenuItem onClick={() => handleClick()}>\r\n            <ListItemIcon>\r\n                <SettingsBackupRestore />\r\n            </ListItemIcon>\r\n            <Typography variant=\"inherit\">\r\n                Revert Version\r\n            </Typography>\r\n        </MenuItem>        \r\n    );\r\n}\r\n\r\ninterface RevertVersionActionProps {\r\n    handleClick(): void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch) => {\r\n    return {\r\n        handleClick: () => {\r\n            alert(\"Revert file!\");\r\n            //dispatch(alert(\"Revert file!\"));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RevertVersionAction);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './ContextMenu.css';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport OpenAction from './ContextMenuActions/OpenAction';\r\nimport RemoveAction from './ContextMenuActions/RemoveAction';\r\nimport MoveAction from './ContextMenuActions/MoveAction';\r\nimport CopyAction from './ContextMenuActions/CopyAction';\r\nimport EditAction from './ContextMenuActions/EditAction';\r\nimport RenameAction from './ContextMenuActions/RenameAction';\r\nimport ZipAction from './ContextMenuActions/ZipAction';\r\nimport ExtractAction from './ContextMenuActions/ExtractAction';\r\nimport DownloadAction from './ContextMenuActions/DownloadAction';\r\nimport OpenInNewTabAction from './ContextMenuActions/OpenInNewTabAction';\r\nimport { Item, FileItem, FolderItem } from '../../Api/Item';\r\nimport { AppState } from '../../Reducers/reducer';\r\nimport UploadMetadataAction from './ContextMenuActions/UploadMetadataAction';\r\nimport AccessControlAction from './ContextMenuActions/AccessControlAction';\r\nimport AddNewVersionActions from './ContextMenuActions/AddNewVersionActions';\r\nimport ExposeMetadataAction from './ContextMenuActions/ExposeMetadataAction';\r\nimport RevertVersionAction from './ContextMenuActions/RevertVersionAction';\r\n\r\nclass ContextMenu extends Component<ContextMenuProps> {\r\n\r\n    render() {\r\n        const { acts, open, x, y } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Menu\r\n                    anchorReference=\"anchorPosition\"\r\n                    anchorPosition={{ top: y, left: x }}\r\n                    transformOrigin={{\r\n                        vertical: 'top',\r\n                        horizontal: 'left',\r\n                    }}\r\n                    open={open}\r\n                    onClose={() => { }}\r\n                    PaperProps={{ style: { width: 190 } }}>\r\n                    {acts.includes('open') && <OpenAction />}\r\n                    {acts.includes('openInNewTab') && <OpenInNewTabAction />}\r\n                    {acts.includes('uploadMetadata') && <UploadMetadataAction />}\r\n                    {acts.includes('accessControl') && <AccessControlAction/>}\r\n                    {acts.includes('addNewVersion') && <AddNewVersionActions/>}\r\n                    {acts.includes('exposeMetadata') && <ExposeMetadataAction/>}\r\n                    {acts.includes('revertVersion') && <RevertVersionAction/>}\r\n                    {acts.includes('download') && <DownloadAction />}\r\n                    {acts.includes('compress') && <ZipAction />}\r\n                    {acts.includes('extract') && <ExtractAction />}\r\n                    {acts.includes('edit') && <EditAction />}\r\n                    {acts.includes('copy') && <CopyAction />}\r\n                    {acts.includes('move') && <MoveAction />}\r\n                    {acts.includes('rename') && <RenameAction />}\r\n                    {acts.includes('remove') && <RemoveAction />}\r\n                </Menu>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps {\r\n    acts: string[];\r\n    open: boolean;\r\n    x: number;\r\n    y: number;\r\n}\r\ninterface ContextMenuProps extends StateProps {}\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        x: state.contextMenu.x,\r\n        y: state.contextMenu.y,\r\n        open: state.contextMenu.open,\r\n        acts: getActionsForMultipleItems(state.items.selected),\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = () => ({});\r\n\r\n\r\n/**\r\n * Get available actions for multiple items\r\n */\r\nconst getActionsForMultipleItems = (items: Item[]): string[] => {\r\n    return items.length === 1 ?\r\n        getActionsForItem(items[0])\r\n        : [\r\n            'copy',\r\n            'move',\r\n            'remove',\r\n            'download',\r\n            'compress',\r\n        ];\r\n};\r\n\r\n/**\r\n * Get available actions for an item\r\n */\r\nconst getActionsForItem = (item: Item) => {\r\n    const commonActions = [\r\n        'openInNewTab',\r\n        'copy',\r\n        'move',\r\n        'rename',\r\n        'remove',\r\n        'download',\r\n    ];\r\n    return [\r\n        ...commonActions,\r\n        ...((item instanceof FileItem) ?\r\n            getActionsForFile(item)\r\n            : getActionsForFolder(item))\r\n    ];\r\n};\r\n\r\n/**\r\n * Get available file specific actions\r\n */\r\nconst getActionsForFile = (file: FileItem) => {\r\n    const actions = ['accessControl'];\r\n    (file.isNotUpdateable()) && actions.push('addNewVersion');\r\n    file.isEditable() && actions.push('edit');\r\n    file.isExtractable() && actions.push('extract');\r\n    (file.isImage() || file.isMedia()) && actions.push('open');\r\n    !file.isMetadata() && actions.push('uploadMetadata');\r\n    file.isMetadata() && actions.push('exposeMetadata');\r\n    file.isVersionFile() && actions.push('revertVersion');\r\n\r\n    return actions;\r\n};\r\n\r\n/**\r\n * Get available folder specific actions\r\n */\r\nconst getActionsForFolder = (folder: FolderItem) => {\r\n    return [\r\n        'open',\r\n        'compress'\r\n    ];\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContextMenu);","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { createBrowserHistory, History, Location } from \"history\";\r\nimport { MyDispatch, setHost, enterFolder } from \"../../Actions/Actions\";\r\nimport { AppState } from \"../../Reducers/reducer\";\r\n\r\nclass HistoryHandler extends Component<HistoryHandlerProps> {\r\n    private history: History<LocationState>;\r\n    private states: LocationState[];\r\n    private stateIndex: number;\r\n\r\n    constructor(props: HistoryHandlerProps) {\r\n        super(props);\r\n\r\n        this.states = [];\r\n        this.stateIndex = -1;\r\n        this.history = createBrowserHistory();\r\n        this.history.listen((location, action) => {\r\n            switch(action) {\r\n                case 'POP':\r\n                    this.handlePop(location);\r\n                    break;\r\n                case 'REPLACE':\r\n                    this.handleReplace(location);\r\n                    break;\r\n                case 'PUSH':\r\n                    this.handlePush(location);\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const { host, path } = this.props;\r\n\r\n        // Don't update history when the host is invalid\r\n        if (host === null)\r\n            return;\r\n        if (this.states.length === 0 || this.stateIndex < 0)\r\n            return this.updateBrowserHistory();\r\n        \r\n        const prevState = this.states[this.stateIndex];\r\n\r\n        if (!locationsEqual({ host, path }, prevState))\r\n            this.updateBrowserHistory();\r\n    }\r\n\r\n    updateBrowserHistory() {\r\n        const { host, path } = this.props;\r\n        const url = encodeURI(`${host}/${path.join('/')}`);\r\n        const newState = {\r\n            host: host || '',\r\n            path,\r\n            index: this.stateIndex + 1,\r\n        };\r\n\r\n        this.history.push(`?url=${url}`, newState);\r\n    }\r\n\r\n    handlePop(location: Location<LocationState>) {\r\n        this.stateIndex = location.state.index;\r\n        this.props.handlePop(location);\r\n    }\r\n\r\n    handleReplace(location: Location<LocationState>) {\r\n        this.states[this.stateIndex] = location.state;\r\n    }\r\n\r\n    handlePush(location: Location<LocationState>) {\r\n        this.states = [...this.states.slice(0, ++this.stateIndex), location.state];\r\n    }\r\n\r\n    render() {\r\n        // This Component doesn't provide anything to the DOM\r\n        // The only reason it is a component is to get access to the state and dispatch\r\n        return <></>;\r\n    }\r\n}\r\n\r\ninterface LocationState extends MyLocation {\r\n    index: number;\r\n}\r\ninterface MyLocation {\r\n    host: string;\r\n    path: string[];\r\n}\r\n\r\n\r\ninterface StateProps {\r\n    host: string | null;\r\n    path: string[];\r\n}\r\ninterface DispatchProps {\r\n    handlePop(location: Location<LocationState>): void;\r\n}\r\ninterface HistoryHandlerProps extends StateProps, DispatchProps { }\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => ({\r\n    host: state.account.host,\r\n    path: state.path\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handlePop: (location: Location<LocationState>) => {\r\n            let host = '';\r\n            let path: string[] = [];\r\n\r\n            if (location && typeof location.state !== typeof undefined) {\r\n                ({ host, path } = location.state);\r\n            }\r\n            else {\r\n                const params = new URLSearchParams(location.search.substr(1));\r\n                const url = params.get('url');\r\n                if (url !== null) {\r\n                    ({ host, path } = getLocationObjectFromUrl(url));\r\n                }\r\n            }\r\n            dispatch(setHost(host));\r\n            dispatch(enterFolder(path));\r\n        }\r\n    };\r\n};\r\n\r\nexport const getLocationObjectFromUrl = (urlString: string) => {\r\n    const url = new URL(urlString);\r\n    const host = url.origin;\r\n    const path = url.pathname.split('/').filter(val => val !== '');\r\n\r\n    return {\r\n        host,\r\n        path\r\n    };\r\n}\r\n\r\nconst locationsEqual = (first: MyLocation, second: MyLocation) => {\r\n    return first.host === second.host\r\n           && first.path.length === second.path.length\r\n           && first.path.every((val, index) => val === second.path[index]);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HistoryHandler);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Link from '@material-ui/core/Link';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { connect } from 'react-redux';\r\nimport { solidLogin, setHost, enterFolder, solidLogout, clearCache, MyDispatch, setErrorMessage, closeDialog } from '../../../Actions/Actions';\r\nimport { getLocationObjectFromUrl } from '../../HistoryHandler/HistoryHandler';\r\nimport { DialogButtonClickEvent, DialogDispatchProps, DialogStateProps } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nclass FormDialog extends Component<ChooseLocationProps> {\r\n    state = {\r\n        location: '',\r\n    };\r\n\r\n    componentWillReceiveProps(props: ChooseLocationProps) {\r\n        const { isLoggedIn, webId } = props;\r\n        const params = new URLSearchParams(document.location.search.substr(1));\r\n        const encodedUrl = params.get('url');\r\n\r\n        if (encodedUrl !== null) {\r\n            const location = decodeURI(encodedUrl);\r\n            this.setState({ location });\r\n        }\r\n        else if (isLoggedIn && webId) {\r\n            const location = (new URL(webId)).origin;\r\n            this.setState({ location });\r\n        }\r\n    }\r\n\r\n    handleChange(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) {\r\n        const targetForm = event.currentTarget.form;\r\n        if (targetForm) {\r\n            const input = targetForm.querySelector('input');\r\n            if (input) {\r\n                const location = input.value;\r\n                this.setState({ location });\r\n                return;\r\n            }\r\n        }\r\n        console.log(\"Couldn't find location input\");\r\n    }\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        this.props.handleSubmit(event, { location: this.state.location });\r\n    }\r\n\r\n    render() {\r\n        let { location } = this.state;\r\n        location = location ? location : '';\r\n        const { handleClose, handleLogin, handleLogout, open, isLoggedIn, webId } = this.props;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-choose-location\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-choose-location\">Welcome to SolidRDP</DialogTitle>\r\n                    <DialogContent>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                            In order to run SolidRDP, you need first <Link href=\"https://solid.inrupt.com/get-a-solid-pod\">get a SoLiD POD and Identity(WebID)</Link>\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                            {!isLoggedIn ?\r\n                                \"If you want to access private resources, please login with the button below.\"\r\n                                : \"Logged in as \" + webId + \".\"\r\n                            }\r\n                        </Typography>\r\n                        {!isLoggedIn ?\r\n                            <Button variant=\"outlined\" color=\"primary\" onClick={handleLogin}>Login</Button>\r\n                            : <Button variant=\"outlined\" onClick={handleLogout}>Logout</Button>\r\n                        }\r\n\r\n                        <Typography variant=\"body1\">\r\n                            Please enter the directory you want to open below.\r\n                        </Typography>\r\n                        <TextField autoFocus fullWidth\r\n                            margin=\"normal\"\r\n                            label=\"Storage Location\"\r\n                            variant=\"outlined\"\r\n                            onChange={this.handleChange.bind(this)}\r\n                            value={location} />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                    </Button>\r\n                        <Button color=\"primary\" type=\"submit\" onClick={this.handleSubmit.bind(this)}>\r\n                            Open directory\r\n                    </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    webId: string | null;\r\n    isLoggedIn: boolean;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleLogin(event: DialogButtonClickEvent): void;\r\n    handleLogout(event: DialogButtonClickEvent): void;\r\n    handleSubmit(event: DialogButtonClickEvent, { location }: { location: string }): void;\r\n}\r\ninterface ChooseLocationProps extends StateProps, DispatchProps { }\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.CHOOSE_LOCATION,\r\n        webId: state.account.webId,\r\n        isLoggedIn: state.account.loggedIn\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.CHOOSE_LOCATION));\r\n        },\r\n        handleLogin: event => {\r\n            event.preventDefault();\r\n            dispatch(solidLogin());\r\n        },\r\n        handleLogout: event => {\r\n            event.preventDefault();\r\n            dispatch(solidLogout());\r\n        },\r\n        handleSubmit: (event, { location }) => {\r\n            event.preventDefault();\r\n            if (!location)\r\n                return dispatch(setErrorMessage(\"Please enter the folder which should be opened\"));\r\n\r\n            const { host, path } = getLocationObjectFromUrl(location);\r\n            dispatch(closeDialog(DIALOGS.CHOOSE_LOCATION));\r\n            dispatch(setHost(host));\r\n            dispatch(clearCache());\r\n            dispatch(enterFolder(path));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { closeDialog, MyDispatch, openDialog } from '../../../Actions/Actions';\r\nimport { DialogStateProps, DialogDispatchProps } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nclass FormDialog extends Component<ContentProps> {\r\n\r\n    state = {\r\n        lastBlobUrl: null,\r\n        content: '...',\r\n        loading: false\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.blobUrl !== this.state.lastBlobUrl) {\r\n            this.setState({\r\n                lastBlobUrl: this.props.blobUrl\r\n            });\r\n            this.setState({\r\n                loading: true\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, open } = this.props;\r\n        return (\r\n          <div style={{marginLeft:'1em'}}>\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-content\" fullWidth={true} maxWidth={'sm'}>\r\n              <DialogTitle id=\"form-dialog-content\">Viewing file </DialogTitle>\r\n              <DialogContent>\r\n                <img src={this.props.blobUrl} alt=\"\" style={{maxWidth: '100%'}}/>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                  Close\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    blobUrl: string | undefined;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {}\r\ninterface ContentProps extends StateProps, DispatchProps {}\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.CONTENT,\r\n        blobUrl: state.blob || undefined\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DialogDispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.CONTENT));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { MyDispatch, closeDialog } from '../../../Actions/Actions';\r\nimport Plyr from 'react-plyr';\r\nimport 'plyr/dist/plyr.css';\r\nimport { FileItem } from '../../../Api/Item';\r\nimport { DialogStateProps, DialogDispatchProps } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nclass FormDialog extends Component<MediaProps> {\r\n    render() {\r\n        const { file, handleClose, open } = this.props;\r\n\r\n        const fileName = file ? file.name : undefined;\r\n        const url = file ? file.url : undefined;\r\n        const provider = file ? (file.isVideo() ? 'html5' : 'audio') : '';\r\n        const type = file ? (file.isVideo() ? 'video' : 'audio') : undefined;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-display-media\" fullWidth={true} maxWidth={'lg'}>\r\n                <DialogTitle id=\"form-dialog-display-media\">Display Media</DialogTitle>\r\n                <DialogContent>\r\n                    {\r\n                        file ?\r\n                            (\r\n                                <div>\r\n                                    <p>Playing {file.name}</p>\r\n                                    <Plyr type={type} /*TODO: provider={provider}*/ url={url} iconUrl=\"./vendor/plyr/plyr.svg\" />\r\n                                </div>\r\n                            )\r\n                            : <p>No media file opened</p>\r\n                            \r\n                    }\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    file?: FileItem;\r\n}\r\ninterface MediaProps extends StateProps, DialogDispatchProps {}\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    const open = state.visibleDialogs.MEDIA;\r\n\r\n    const file = state.items.selected[0];   \r\n\r\n    if (file instanceof FileItem) {\r\n            return {\r\n                open,\r\n                file,\r\n            };\r\n    }\r\n    return { open };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DialogDispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.MEDIA));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { updateTextFile, MyDispatch, closeDialog } from '../../../Actions/Actions';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nimport { Item } from '../../../Api/Item';\r\n\r\nclass FormDialog extends Component<EditProps> {\r\n    private textField: React.RefObject<HTMLTextAreaElement> = createRef();\r\n    state = {\r\n        lastBlobUrl: null as string|null,\r\n        content: null as string|null,\r\n        loading: false\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.blobUrl !== this.state.lastBlobUrl) {\r\n            this.setState({\r\n                lastBlobUrl: this.props.blobUrl\r\n            });\r\n            this.setState({\r\n                loading: true\r\n            });\r\n\r\n            this.props.blobUrl && fetch(this.props.blobUrl).then(r => {\r\n                return r.text();\r\n            }).then(t => {\r\n                this.setState({\r\n                    content: t\r\n                });\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    handleSave(event: DialogButtonClickEvent) {\r\n        event.preventDefault();\r\n        const textField = this.textField.current;\r\n        const item = this.props.item;\r\n        if (textField && item) {\r\n            const content = textField.value;\r\n            this.props.handleSubmit(event, {\r\n                itemName: item.name,\r\n                content\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, open, item } = this.props;\r\n        const itemName = item ? item.getDisplayName() : 'No item selected';\r\n        const textAreaStyle = {\r\n            width: '100%',\r\n            minHeight: '300px'\r\n        };\r\n        const textArea = <textarea style={textAreaStyle} defaultValue={this.state.content || ''} ref={this.textField} />;\r\n\r\n        return (\r\n            <div>\r\n              <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-edit\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                  <DialogTitle id=\"form-dialog-edit\">Editing file: {itemName} </DialogTitle>\r\n                  <DialogContent>\r\n                    <DialogContentText>\r\n                      {this.state.loading ? 'Loading...' : textArea}\r\n                    </DialogContentText>\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                      Close\r\n                    </Button>\r\n                    <Button color=\"primary\" onClick={this.handleSave.bind(this)} type=\"submit\">\r\n                      Update\r\n                    </Button>\r\n                  </DialogActions>\r\n                </form>\r\n              </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    item: Item;\r\n    blobUrl: string;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { itemName, content }: { itemName: string, content: string }): void;\r\n}\r\ninterface EditProps extends StateProps, DispatchProps {}\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.EDIT, // TODO: rename visibleDialogs (e.g. to dialogIsOpen)\r\n        item: state.items.selected[0],\r\n        blobUrl: state.blob || ''\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.EDIT));\r\n        },\r\n        handleSubmit: (event, { itemName, content }) => {\r\n            dispatch(updateTextFile(itemName, content));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { createNewFolder, closeDialog, MyDispatch, setErrorMessage } from '../../../Actions/Actions';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nclass FormDialog extends Component<CreateFolderProps> {\r\n    private textField: React.RefObject<HTMLInputElement> = createRef();\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const textField = this.textField.current;\r\n        if (textField) {\r\n            const folderName = textField.value;\r\n            this.props.handleSubmit(event, { folderName });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, handleSubmit, open } = this.props;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-create-folder\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-create-folder\">Add new folder</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField autoFocus fullWidth margin=\"dense\" label=\"Container name\" type=\"text\" inputRef={this.textField} />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                    </Button>\r\n                        <Button color=\"primary\" type=\"submit\" onClick={this.handleSubmit.bind(this)}>\r\n                            Save\r\n                    </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { folderName }: { folderName: string }): void;\r\n}\r\ninterface CreateFolderProps extends DialogStateProps, DispatchProps { }\r\n\r\nconst mapStateToProps = (state: AppState): DialogStateProps => {\r\n    return {\r\n        open: state.visibleDialogs.CREATE_FOLDER\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.CREATE_FOLDER));\r\n        },\r\n        handleSubmit: (event, { folderName }) => {\r\n            event.preventDefault();\r\n            dispatch(createNewFolder(folderName));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { createFile, closeDialog, MyDispatch, setErrorMessage } from '../../../Actions/Actions';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nclass FormDialog extends Component<CreateFileProps> {\r\n    private textField: React.RefObject<HTMLInputElement> = createRef();\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const textField = this.textField.current;\r\n        if (textField) {\r\n            const fileName = textField.value;\r\n            this.props.handleSubmit(event, { fileName });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, open } = this.props;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-create-file\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-create-file\">Create file</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField autoFocus fullWidth margin=\"dense\" label=\"File name\" type=\"text\" inputRef={this.textField}/>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                    </Button>\r\n                        <Button color=\"primary\" type=\"submit\" onClick={this.handleSubmit.bind(this)}>\r\n                            Create\r\n                    </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { fileName }: { fileName: string }): void;\r\n}\r\ninterface CreateFileProps extends DialogStateProps, DispatchProps { }\r\n\r\nconst mapStateToProps = (state: AppState): DialogStateProps => {\r\n    return {\r\n        open: state.visibleDialogs.CREATE_FILE\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.CREATE_FILE));\r\n        },\r\n        handleSubmit: (event, { fileName }) => {\r\n            event.preventDefault();\r\n            dispatch(createFile(fileName));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, ChangeEvent, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { renameFile, renameFolder, MyDispatch, closeDialog } from '../../../Actions/Actions';\r\nimport { FolderItem, Item } from '../../../Api/Item';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nclass FormDialog extends Component<RenameProps> {\r\n    private textField: React.RefObject<HTMLInputElement> = createRef();\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const textField = this.textField.current;\r\n        const item = this.props.item;\r\n        if (textField && item) {\r\n            const newName = textField.value;\r\n            this.props.handleSubmit(event, { item, newName });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, open, item } = this.props;\r\n        const previousName = item ? item.name : '';\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-create-folder\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                  <DialogTitle id=\"form-dialog-create-folder\">Rename</DialogTitle>\r\n                  <DialogContent>\r\n                    <TextField autoFocus fullWidth margin=\"dense\" label=\"Item name\" type=\"text\" inputRef={this.textField} defaultValue={previousName} />\r\n                  </DialogContent>\r\n                  <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                      Cancel\r\n                    </Button>\r\n                    <Button color=\"primary\" type=\"submit\" onClick={this.handleSubmit.bind(this)}>\r\n                      Save\r\n                    </Button>\r\n                  </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    item?: Item;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { item, newName }: { item: Item, newName: string }): void;\r\n}\r\ninterface RenameProps extends StateProps, DispatchProps {}\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.RENAME,\r\n        item: state.items.selected[0],\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.RENAME));\r\n        },\r\n        handleSubmit: (event, { item, newName }) => {\r\n            event.preventDefault();\r\n            if (item instanceof FolderItem) // TODO: Create renameItem\r\n                dispatch(renameFolder(item.name, newName));\r\n            else\r\n                dispatch(renameFile(item.name, newName));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React from 'react';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport FileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport '../File.css';\r\nimport { FileItem, Item } from '../../../Api/Item';\r\n\r\n// TODO: Check main differences between normal File.tsx component\r\nfunction FileSublist(props: OwnProps) {\r\n    const { item, isSelected, handleClick, handleDoubleClick } = props;\r\n    const avatarStyle = {\r\n        backgroundColor: isSelected ? blue['A200'] : undefined\r\n    };\r\n    return (\r\n        <div className=\"File\" onClick={handleClick} data-selected={isSelected} onDoubleClick={handleDoubleClick}>\r\n            <ListItem>\r\n                <ListItemAvatar>\r\n                    <Avatar style={avatarStyle}>\r\n                        { (item instanceof FileItem) ? <FileIcon /> : <FolderIcon />}\r\n                    </Avatar>\r\n                </ListItemAvatar>\r\n                <ListItemText primary={item.name} secondary=\"\" />\r\n            </ListItem>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface OwnProps {\r\n    item: Item;\r\n    isSelected: boolean;\r\n    handleClick(): void;\r\n    handleDoubleClick(): void;\r\n}\r\n\r\nexport default FileSublist;\r\n\r\n","import React from 'react';\r\nimport FileSublist from '../../File/FileSublist/FileSublist'; \r\nimport Loader from '../../Loader/Loader'; \r\nimport FileListEmptyMessage from '../FileListEmptyMessage';\r\nimport './FileListSublist.css'; \r\nimport { FolderItem } from '../../../Api/Item';\r\n\r\nfunction FileListSublist(props: OwnProps) {\r\n    const { items, isLoading, handleOpenFolder } = props;\r\n    \r\n    const itemComponents = items.map((item, key) => {\r\n        return <FileSublist\r\n            item={item}\r\n            isSelected={false}\r\n            handleClick={() => handleOpenFolder(item)}\r\n            handleDoubleClick={() => handleOpenFolder(item)}\r\n            key={key} />\r\n    });\r\n\r\n    return <div className=\"FileListSublist\">\r\n        { isLoading ? \r\n            <Loader /> : \r\n            itemComponents.length ? itemComponents : <FileListEmptyMessage />\r\n        }\r\n    </div>\r\n}\r\n\r\ninterface OwnProps {\r\n    items: FolderItem[];\r\n    isLoading: boolean;\r\n    handleOpenFolder(folder: FolderItem): void;\r\n}\r\n\r\nexport default FileListSublist;","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport FileListSublist from '../../FileList/FileListSublist/FileListSublist'; \r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport { Item, FolderItem } from '../../../Api/Item';\r\nimport * as ApiHandler from '../../../Api/ApiHandler';\r\n\r\nclass FormDialog extends Component<OwnProps, OwnState> {\r\n    private host: string;\r\n    private path: string[];\r\n\r\n    constructor(props: OwnProps) {\r\n        super(props);\r\n        const { initialPath, initialHost } = props;\r\n        this.host = initialHost;\r\n        this.path = initialPath;\r\n\r\n        this.state = {\r\n            items: [],\r\n            isLoading: true,\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps: OwnProps) {\r\n        if (prevProps.initialHost !== this.props.initialHost\r\n            || prevProps.initialPath.join('') !== this.props.initialPath.join('')) {\r\n            this.host = this.props.initialHost;\r\n            this.path = this.props.initialPath;\r\n            this.updateItems();\r\n        }\r\n    }\r\n\r\n    handleGoBack() {\r\n        this.path = this.path.slice(0, -1);\r\n        this.updateItems();\r\n    }\r\n\r\n    handleOpenFolder(folder: FolderItem) {\r\n        this.path = [...folder.path, folder.name];\r\n        this.updateItems();\r\n    }\r\n\r\n    async updateItems() {\r\n        this.setState({ isLoading: true });\r\n        const items = (await ApiHandler.getItemList(this.path.join('/')))\r\n            .filter(item => item instanceof FolderItem);\r\n\r\n        this.setState({ isLoading: false, items });\r\n    }\r\n\r\n    render() {\r\n        const { open, handleClose, handleSubmit, actionName } = this.props;\r\n        const { items, isLoading } = this.state;\r\n        const host = this.host;\r\n        const path = this.path;\r\n        const url = `${host}/${path.join('/')}`;\r\n        const canGoBack = path.length > 0;\r\n        \r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-move\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-move\">\r\n                        {actionName} items to <small style={{color: 'grey'}}>{ url }</small>\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <FileListSublist items={items} isLoading={isLoading} handleOpenFolder={this.handleOpenFolder.bind(this)}/>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleGoBack.bind(this)} color=\"primary\" type=\"button\" disabled={!canGoBack}>\r\n                            <KeyboardArrowLeftIcon /> Go back directory\r\n                        </Button>\r\n\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={(e) => handleSubmit({ host, path })} type=\"submit\">\r\n                            {actionName}\r\n                        </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface OwnProps {\r\n    open: boolean;\r\n    actionName: string;\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    handleSubmit({ host, path }: { host: string, path: string[] }): void;\r\n    handleClose(): void;\r\n}\r\n\r\ninterface OwnState {\r\n    items: Item[];\r\n    isLoading: boolean;\r\n}\r\n\r\nexport default FormDialog;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { moveItems, closeDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { DialogStateProps } from '../dialogTypes';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nimport ChooseLocation from '../ChooseLocation/ChooseLocation';\r\n\r\nfunction MoveDialog(props: MoveProps) {\r\n    const { initialHost, initialPath, selectedItems, open, handleClose, move } = props;\r\n\r\n    return <ChooseLocation\r\n        open={open}\r\n        actionName=\"Move\"\r\n        initialHost={initialHost}\r\n        initialPath={initialPath}\r\n        handleClose={handleClose}\r\n        handleSubmit={(location) => move(selectedItems, location)}\r\n    />\r\n}\r\n\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    selectedItems: Item[];\r\n}\r\ninterface DispatchProps {\r\n    handleClose(): void;\r\n    move(selectedItems: Item[], { host, path }: { host: string, path: string[] }): void;\r\n}\r\ninterface MoveProps extends StateProps, DispatchProps {}\r\n\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.MOVE,\r\n        initialHost: state.account.host || '',\r\n        initialPath: state.path,\r\n        selectedItems: state.items.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.MOVE));\r\n        },\r\n        move: (selectedItems, targetLocation) => {\r\n            dispatch(moveItems(selectedItems, targetLocation));\r\n        },\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MoveDialog);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { copyItems, closeDialog, MyDispatch } from '../../../Actions/Actions';\r\nimport { DialogStateProps } from '../dialogTypes';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\n\r\nimport ChooseLocation from '../ChooseLocation/ChooseLocation';\r\n\r\nfunction CopyDialog(props: CopyProps) {\r\n    const { initialHost, initialPath, selectedItems, open, handleClose, copy } = props;\r\n\r\n    return <ChooseLocation\r\n        open={open}\r\n        actionName=\"Copy\"\r\n        initialHost={initialHost}\r\n        initialPath={initialPath}\r\n        handleClose={handleClose}\r\n        handleSubmit={(location) => copy(selectedItems, location)}\r\n    />\r\n}\r\n\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    selectedItems: Item[];\r\n}\r\ninterface DispatchProps {\r\n    handleClose(): void;\r\n    copy(selectedItems: Item[], { host, path }: { host: string, path: string[] }): void;\r\n}\r\ninterface CopyProps extends StateProps, DispatchProps {}\r\n\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.COPY,\r\n        initialHost: state.account.host || '',\r\n        initialPath: state.path,\r\n        selectedItems: state.items.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n            dispatch(closeDialog(DIALOGS.COPY));\r\n        },\r\n        copy: (selectedItems, targetLocation) => {\r\n            dispatch(copyItems(selectedItems, targetLocation));\r\n        },\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CopyDialog);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport FileIcon from '@material-ui/icons/InsertDriveFile';\r\nimport { getHumanFileSize } from '../../Api/Item';\r\n\r\nfunction UploadFileList(props: UploadFileListProps) {\r\n    const { files } = props;\r\n    files[0];\r\n    const list = Array.from(files).map((f, i) =>\r\n        <ListItem dense key={i}>\r\n            <ListItemIcon>\r\n                <FileIcon />\r\n            </ListItemIcon>\r\n            <ListItemText primary={`${f.name} (${getHumanFileSize(f.size)})`} />\r\n        </ListItem>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <List component=\"nav\">\r\n                {list}\r\n            </List>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface UploadFileListProps {\r\n    files: FileList;\r\n}\r\n\r\nexport default UploadFileList;\r\n","import React, { Component, createRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport UploadFileList from './UploadFileList';\r\n\r\nclass FileUploader extends Component<FileUploadProps> {\r\n    inputRef: React.RefObject<HTMLInputElement> = createRef();\r\n\r\n    handleReset(event: React.MouseEvent<HTMLElement, MouseEvent> | React.TouchEvent): void {\r\n        const inputElement = this.inputRef.current;\r\n        if (inputElement) {\r\n            inputElement.value = '';\r\n            this.props.handleReset(event);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { fileList, handleSelectedFiles } = this.props;\r\n        const styles = {\r\n            inputfile: {\r\n                // TODO: Change this to display none as soon, as the label button works\r\n                // display: 'none'\r\n            }, inputreset: {\r\n                display: (fileList && fileList.length) ? 'inline-flex' : 'none'\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <label htmlFor=\"button-file\">\r\n                    <input style={styles.inputfile} id=\"button-file\" ref={this.inputRef} multiple type=\"file\" onChange={handleSelectedFiles} />\r\n                    {/*<Button component=\"span\" variant=\"contained\" color=\"primary\">\r\n                        Select Files\r\n                    </Button>*/}\r\n                </label>\r\n\r\n                <Button style={styles.inputreset} component=\"span\" type=\"reset\" onClick={this.handleReset.bind(this)}>\r\n                    Clear\r\n                </Button>\r\n\r\n                { fileList && <UploadFileList files={fileList} /> }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface FileUploadProps {\r\n    fileList: FileList|null;\r\n    handleReset(event: React.MouseEvent<HTMLElement, MouseEvent> | React.TouchEvent): void;\r\n    handleSelectedFiles(event: React.ChangeEvent<HTMLInputElement>): void;\r\n}\r\n\r\nexport default FileUploader;\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { connect } from 'react-redux';\r\nimport { resetFileUploader, uploadFiles, setFileUploadList, MyDispatch, resetFileUploadList, setErrorMessage, uploadReseachData } from '../../../Actions/Actions';\r\nimport FileUploader from '../../FileUploader/FileUploader';\r\nimport { DialogStateProps, DialogDispatchProps } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\n\r\nclass FormDialog extends Component<UploadFileProps> {\r\n\r\n    render() {\r\n        const { handleClose, handleReset, handleSubmit, open, canUpload, progress, fileList, handleSelectedFiles } = this.props;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-upload\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-upload\">\r\n                        Upload Research Data\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <FileUploader fileList={fileList} handleSelectedFiles={handleSelectedFiles} handleReset={handleReset}/>\r\n                        {canUpload ? <LinearProgress variant=\"determinate\" value={progress} /> : null }\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={handleSubmit} disabled={!canUpload} type=\"submit\">\r\n                            Upload\r\n                        </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    canUpload: boolean;\r\n    fileList: FileList|null;\r\n    progress: number;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSelectedFiles(event: React.ChangeEvent<HTMLInputElement>): void;\r\n    handleReset(): void;\r\n}\r\ninterface UploadFileProps extends StateProps, DispatchProps {}\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.UPLOAD_FILE,\r\n        canUpload: state.upload.fileList ? state.upload.fileList.length > 0 : false,\r\n        fileList: state.upload.fileList,\r\n        progress: state.upload.progress,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: (event) => {\r\n            dispatch(resetFileUploader());\r\n        },\r\n        handleSubmit: (event) => {\r\n            event.preventDefault();\r\n            dispatch(uploadReseachData());\r\n        },\r\n        handleSelectedFiles: (event) => {\r\n            const files = event.target.files;\r\n            dispatch(setFileUploadList(files));\r\n        },\r\n        handleReset: () => {\r\n            dispatch(resetFileUploadList());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { green } from '@material-ui/core/colors';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox, { CheckboxProps } from '@material-ui/core/Checkbox';\r\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\r\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\r\nimport Favorite from '@material-ui/icons/Favorite';\r\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\r\n\r\nconst GreenCheckbox = withStyles({\r\n  root: {\r\n    color: green[400],\r\n    '&$checked': {\r\n      color: green[600],\r\n    },\r\n  },\r\n  checked: {},\r\n})((props: CheckboxProps) => <Checkbox color=\"default\" {...props} />);\r\n\r\nexport default function CheckboxLabels() {\r\n  const [state, setState] = React.useState({\r\n    checkedA: false,\r\n    checkedB: false,\r\n    checkedC: false,\r\n    checkedD: false,\r\n    checkedE: false,\r\n    checkedF: false,\r\n    checkedG: false,\r\n  });\r\n\r\n  const handleChange = (name: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    setState({ ...state, [name]: event.target.checked });\r\n  };\r\n\r\n  return (\r\n    <FormGroup row>\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedA}\r\n            onChange={handleChange('checkedA')}\r\n            value=\"checkedA\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Mathematics\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedB}\r\n            onChange={handleChange('checkedB')}\r\n            value=\"checkedB\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Computer Science\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedC}\r\n            onChange={handleChange('checkedC')}\r\n            value=\"checkedC\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Web engineering\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedD}\r\n            onChange={handleChange('checkedD')}\r\n            value=\"checkedD\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Physics\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedE}\r\n            onChange={handleChange('checkedE')}\r\n            value=\"checkedE\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Chemistry\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedG}\r\n            onChange={handleChange('checkedG')}\r\n            value=\"checkedG\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Biology\"\r\n      />\r\n      <FormControlLabel\r\n        control={\r\n          <Checkbox\r\n            checked={state.checkedF}\r\n            onChange={handleChange('checkedF')}\r\n            value=\"checkedF\"\r\n            color=\"primary\"\r\n          />\r\n        }\r\n        label=\"Machine learning\"\r\n      />\r\n     \r\n    </FormGroup>\r\n  );\r\n}\r\n","import React, { Component } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { connect } from 'react-redux';\r\nimport { resetFileUploader, uploadMetadata, setFileUploadList, MyDispatch, resetFileUploadList, setErrorMessage, resetMetadataUploader, createMetadataACL } from '../../../Actions/Actions';\r\nimport FileUploader from '../../FileUploader/FileUploader';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { withStyles, Tabs, Tab, Typography, FormControl, InputLabel, Input, FormHelperText } from '@material-ui/core';\r\n\r\nimport SimpleListMenu from './Discipline';\r\nimport { Item } from '../../../Api/Item';\r\n\r\n\r\n\r\nclass FormDialog extends Component<UploadFileProps> {\r\n\r\n    state = {\r\n        activeIndex: 0,\r\n        // inputVal: props.inputValue\r\n    }\r\n    updateInput = (val: any) => this.setState({ inputVal: val })\r\n\r\n\r\n    handleChange = (_: any, activeIndex: any) => this.setState({ activeIndex })\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const item = this.props.item;\r\n        if (item) {\r\n            this.props.handleSubmit(event, { item });\r\n        }\r\n    }\r\n    \r\n    render() {\r\n        const { handleClose, handleReset, open, canUpload, progress, fileList, handleSelectedFiles } = this.props;\r\n        let activeIndex = this.state.activeIndex;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-upload\" fullWidth={true} maxWidth={'sm'}>\r\n                <div>\r\n                    <VerticalTabs\r\n                        value={activeIndex}\r\n                        onChange={this.handleChange}\r\n                    >\r\n\r\n                        <MyTab label='Upload metadata file' />\r\n                        <MyTab label='Input metadata annotation' />\r\n                    </VerticalTabs>\r\n                    {activeIndex === 0 && <form>\r\n                        <DialogContent>\r\n                            <FileUploader fileList={fileList} handleSelectedFiles={handleSelectedFiles} handleReset={handleReset} />\r\n                            {canUpload ? <LinearProgress variant=\"determinate\" value={progress} /> : null}\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                                Cancel\r\n                        </Button>\r\n                            <Button color=\"primary\" onClick={this.handleSubmit.bind(this)}disabled={!canUpload} type=\"submit\">\r\n                                Upload\r\n                        </Button>\r\n                        </DialogActions>\r\n                    </form>}\r\n                    {activeIndex === 1 && <form>\r\n                        <DialogContent>\r\n                            <FormControl fullWidth={true}>\r\n                                <InputLabel htmlFor=\"my-input\">Title</InputLabel>\r\n                                <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\r\n                            </FormControl>\r\n                            <FormControl fullWidth={true}>\r\n                                <InputLabel htmlFor=\"my-input\">Author</InputLabel>\r\n                                <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\r\n                            </FormControl>\r\n                            <FormControl fullWidth={true} >\r\n                                <InputLabel htmlFor=\"my-input\">Description</InputLabel>\r\n                                <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\r\n                            </FormControl>\r\n                            <FormControl fullWidth={true} >\r\n                                <InputLabel htmlFor=\"my-input\">Version</InputLabel>\r\n                                <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\r\n                            </FormControl>\r\n                            <FormControl fullWidth={true}>\r\n                                <InputLabel htmlFor=\"my-input\">Keyword</InputLabel>\r\n                                <Input id=\"my-input\" aria-describedby=\"my-helper-text\" />\r\n                            </FormControl>\r\n                            <FormControl fullWidth={true}>\r\n                                <SimpleListMenu />\r\n                            </FormControl>\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                                Cancel\r\n                        </Button>\r\n                            <Button color=\"primary\" onClick={this.handleSubmit.bind(this)} disabled={!canUpload} type=\"submit\">\r\n                                Submit\r\n                        </Button>\r\n                        </DialogActions>\r\n                    </form>}\r\n                </div>\r\n\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\nconst VerticalTabs = withStyles(theme => ({\r\n    flexContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    indicator: {\r\n        display: 'none',\r\n    }\r\n}))(Tabs)\r\n\r\nconst MyTab = withStyles(theme => ({\r\n    selected: {\r\n        color: 'tomato',\r\n        borderBottom: '2px solid tomato'\r\n    }\r\n}))(Tab);\r\n\r\nfunction TabContainer(props: { children: React.ReactNode; }) {\r\n    return (\r\n        <Typography component=\"div\" style={{ padding: 24 }}>\r\n            {props.children}\r\n        </Typography>\r\n    );\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    item?: Item;\r\n    canUpload: boolean;\r\n    fileList: FileList | null;\r\n    progress: number;\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSelectedFiles(event: React.ChangeEvent<HTMLInputElement>): void;\r\n    handleReset(): void;\r\n    handleSubmit(event: DialogButtonClickEvent, { item }: { item: Item }): void;\r\n    \r\n}\r\ninterface UploadFileProps extends StateProps, DispatchProps { }\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        item: state.items.selected[0],\r\n        open: state.visibleDialogs.UPLOAD_METADATA,\r\n        canUpload: state.upload.fileList ? state.upload.fileList.length > 0 : false,\r\n        fileList: state.upload.fileList,\r\n        progress: state.upload.progress,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: (event) => {\r\n            dispatch(resetMetadataUploader());\r\n        },\r\n        handleSubmit: (event, { item} ) => {\r\n            event.preventDefault();\r\n            dispatch(uploadMetadata(item));\r\n        },\r\n        handleSelectedFiles: (event) => {\r\n            const files = event.target.files;\r\n            dispatch(setFileUploadList(files));\r\n        },\r\n        handleReset: () => {\r\n            dispatch(resetFileUploadList());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { connect } from 'react-redux';\r\nimport { setFileUploadList, MyDispatch, resetFileUploadList, resetAccessControl, updateAccessControl } from '../../../Actions/Actions';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport { Item } from '../../../Api/Item';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddIcon from '@material-ui/icons/AddBox';\r\nimport { FormControlLabel, Checkbox, ListItemIcon, MenuItem, DialogContent, DialogContentText, FormControl, Input } from '@material-ui/core';\r\nimport { AclItem } from '../../../Api/AclItem';\r\nimport { parseACl } from '../../../Api/aclUtils';\r\n\r\nclass FormDialog extends Component<AccessControlProps> {\r\n    private textField: React.RefObject<HTMLTextAreaElement> = createRef();\r\n    state = {\r\n        lastBlobUrl: null as string | null,\r\n        content: null as string | null,\r\n        loading: false,\r\n        isLoading: false,\r\n        accessTo: \"\",\r\n        agent: \"\",\r\n        read: false,\r\n        write: false,\r\n        append: false,\r\n        control: false,\r\n        group: false,\r\n        aclList: [] as AclItem[]\r\n    };\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.blobUrl !== this.state.lastBlobUrl && this.state.aclList.length == 0) {\r\n\r\n            this.setState({\r\n                lastBlobUrl: this.props.blobUrl\r\n            });\r\n            this.setState({\r\n                loading: true\r\n            });\r\n\r\n            this.props.blobUrl && fetch(this.props.blobUrl).then(r => {\r\n                return r.text();\r\n            }).then(async t => {\r\n                let destFile = this.props.initialHost + '/' + this.props.initialPath.join('/') + '/' + this.props.selectedItems[0].name;\r\n                let aclFile = destFile + '.acl';\r\n\r\n                let aclList = parseACl(t, aclFile)\r\n                this.setState({\r\n                    accessTo: destFile,\r\n                    content: t,\r\n                    aclList: aclList\r\n                });\r\n\r\n                // console.log(this.state.aclList)\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    handleSave(event: DialogButtonClickEvent) {\r\n        event.preventDefault();\r\n        const item = this.props.item;\r\n        this.props.handleSubmit(event, {\r\n            itemName: item.name,\r\n            aclList: this.state.aclList\r\n        });\r\n\r\n    }\r\n\r\n    handleChange = (key: number, mode: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (mode == 'group')\r\n            this.state.aclList[key]._isGroup = event.target.checked;\r\n        if (mode == 'read')\r\n            this.state.aclList[key]._read = event.target.checked;\r\n        if (mode == 'write')\r\n            this.state.aclList[key]._write = event.target.checked;\r\n        if (mode == 'append')\r\n            this.state.aclList[key]._append = event.target.checked;\r\n        if (mode == 'control')\r\n            this.state.aclList[key]._control = event.target.checked;\r\n        this.setState({ ...this.state, [name]: event.target.checked });\r\n    };\r\n\r\n    handleTextChange = (key: number) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.state.aclList[key]._agent = event.target.value;\r\n        this.setState({ ...this.state, [name]: event.target.value });\r\n    };\r\n    handleNewTextChange = () => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.state.agent = event.target.value;\r\n        this.setState({ ...this.state, [name]: event.target.value });\r\n    };\r\n\r\n    handleDelete = (key: number) => (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n        this.state.aclList.splice(key, 1);\r\n        this.setState({ ...this.state, [name]: event.button.toString });\r\n    };\r\n\r\n    handleNewChange = (name: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({ ...this.state, [name]: event.target.checked });\r\n    };\r\n\r\n    handleAdd = () => (event: React.MouseEvent<HTMLInputElement, MouseEvent>) => {\r\n        if (!this.validURL(this.state.agent)) {\r\n            alert(\"Wrong url format!!!!\");\r\n            this.resetState();\r\n            return;\r\n        }\r\n        this.state.aclList.push(new AclItem(this.state.aclList.length,\r\n            this.state.agent,\r\n            this.state.accessTo,\r\n            this.state.read,\r\n            this.state.write,\r\n            this.state.append,\r\n            this.state.control,\r\n            this.state.group));\r\n        this.resetState()\r\n        // this.setState({ ...this.state, [name]: \"btn add click\" });\r\n    };\r\n\r\n    validURL(str: string) {\r\n        var pattern = new RegExp('^(https?:\\\\/\\\\/)?' + // protocol\r\n            '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\r\n            '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\r\n            '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\r\n            '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\r\n            '(\\\\#[-a-z\\\\d_]*)?$', 'i'); // fragment locator\r\n        return !!pattern.test(str);\r\n    }\r\n\r\n    resetState = () => {\r\n        this.setState({\r\n            agent: \"\",\r\n            read: false,\r\n            write: false,\r\n            append: false,\r\n            control: false,\r\n            group: false\r\n        });\r\n    }\r\n\r\n    handleClose(event: DialogButtonClickEvent) {\r\n        this.state.aclList = [];\r\n        this.props.handleClose(event);\r\n    }\r\n\r\n\r\n    render() {\r\n        const { open } = this.props;\r\n        return (\r\n            <Dialog open={open} onClose={this.handleClose.bind(this)} aria-labelledby=\"form-dialog-upload\" fullWidth={true} maxWidth={'lg'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-upload\">\r\n                        Access Control to {this.state.accessTo}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <Table>\r\n                            <colgroup>\r\n                                <col />\r\n                                <col style={{ width: '50%', padding: '4px 10px' }} />\r\n                                <col style={{ width: '40%' }} />\r\n                                <col />\r\n                            </colgroup>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell padding=\"checkbox\">Group</TableCell>\r\n                                    <TableCell padding=\"none\">Agent</TableCell>\r\n                                    <TableCell padding=\"none\">Mode</TableCell>\r\n                                    <TableCell padding=\"checkbox\">Action</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {this.state.aclList.map(item => <TableRow key={item._key}>\r\n                                    <TableCell padding=\"checkbox\">\r\n                                        <FormControlLabel label=\"\" control={\r\n                                            <Checkbox checked={item.isGroup}\r\n                                                onChange={this.handleChange(item._key, \"group\")}\r\n                                                value=\"group\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                    </TableCell>\r\n                                    <TableCell padding=\"none\">\r\n                                        <Input fullWidth={true} value={item.agent} onChange={this.handleTextChange(item._key)} placeholder=\"Input agent webID\" />\r\n                                    </TableCell>\r\n                                    <TableCell padding=\"none\">\r\n                                        <FormControlLabel label=\"Read\" control={\r\n                                            <Checkbox checked={item.read}\r\n                                                onChange={this.handleChange(item._key, \"read\")}\r\n                                                value=\"read\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Write\" control={\r\n                                            <Checkbox checked={item.write}\r\n                                                onChange={this.handleChange(item._key, 'write')}\r\n                                                value=\"write\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Append\" control={\r\n                                            <Checkbox checked={item.append}\r\n                                                onChange={this.handleChange(item._key, 'append')}\r\n                                                value=\"append\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Control\" control={\r\n                                            <Checkbox checked={item.control}\r\n                                                onChange={this.handleChange(item._key, 'control')}\r\n                                                value=\"control\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                    </TableCell>\r\n                                    <TableCell padding=\"checkbox\">\r\n                                        <MenuItem onClick={this.handleDelete(item._key)}>\r\n                                            <ListItemIcon>\r\n                                                <DeleteIcon />\r\n                                            </ListItemIcon>\r\n                                        </MenuItem>\r\n                                    </TableCell>\r\n                                </TableRow>)}\r\n                                <TableRow key={this.state.aclList.length}>\r\n                                    <TableCell padding=\"checkbox\">\r\n                                        <FormControlLabel label=\"\" control={\r\n                                            <Checkbox checked={this.state.group}\r\n                                                onChange={this.handleNewChange(\"group\")}\r\n                                                value=\"group\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                    </TableCell>\r\n                                    <TableCell padding=\"none\">\r\n                                        <Input fullWidth={true} value={this.state.agent} onChange={this.handleNewTextChange()} id=\"newagent\" placeholder=\"Input agent webID\" />\r\n                                    </TableCell>\r\n                                    <TableCell padding='none'>\r\n                                        <FormControlLabel label=\"Read\" control={\r\n                                            <Checkbox checked={this.state.read}\r\n                                                onChange={this.handleNewChange(\"read\")}\r\n                                                value=\"read\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Write\" control={\r\n                                            <Checkbox checked={this.state.write}\r\n                                                onChange={this.handleNewChange(\"write\")}\r\n                                                value=\"write\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Append\" control={\r\n                                            <Checkbox checked={this.state.append}\r\n                                                onChange={this.handleNewChange(\"append\")}\r\n                                                value=\"append\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                        <FormControlLabel label=\"Control\" control={\r\n                                            <Checkbox checked={this.state.control}\r\n                                                onChange={this.handleNewChange(\"control\")}\r\n                                                value=\"control\"\r\n                                                color=\"primary\" />\r\n                                        } />\r\n                                    </TableCell>\r\n                                    <TableCell padding=\"checkbox\">\r\n                                        <MenuItem onClick={this.handleAdd()}>\r\n                                            <ListItemIcon>\r\n                                                <AddIcon />\r\n                                            </ListItemIcon>\r\n                                        </MenuItem>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            </TableBody>\r\n                        </Table>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.handleClose.bind(this)} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={this.handleSave.bind(this)} type=\"submit\">\r\n                            Save\r\n                        </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    item: Item;\r\n    blobUrl: string;\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    selectedItems: Item[];\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { itemName, aclList }:\r\n        { itemName: string, aclList: AclItem[] }): void;\r\n}\r\ninterface AccessControlProps extends StateProps, DispatchProps { }\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.ACCESS_CONTROL, // TODO: rename visibleDialogs (e.g. to dialogIsOpen)\r\n        item: state.items.selected[0],\r\n        blobUrl: state.blob || '',\r\n        initialHost: state.account.host || '',\r\n        initialPath: state.path,\r\n        selectedItems: state.items.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: (event) => {\r\n            dispatch(resetAccessControl());\r\n        },\r\n        handleSubmit: (event, { itemName, aclList }) => {\r\n            event.preventDefault();\r\n            dispatch(updateAccessControl(itemName, aclList));\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component, createRef } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport { connect } from 'react-redux';\r\nimport { resetFileUploader, uploadFiles, setFileUploadList, MyDispatch, resetFileUploadList, setErrorMessage, uploadReseachData, resetNewVersionUploader, handleAddNewVersion } from '../../../Actions/Actions';\r\nimport FileUploader from '../../FileUploader/FileUploader';\r\nimport { DialogStateProps, DialogDispatchProps, DialogButtonClickEvent } from '../dialogTypes';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { withStyles, Tabs, Tab, Typography, FormControl, InputLabel, Input, FormHelperText } from '@material-ui/core';\r\nimport { Item } from '../../../Api/Item';\r\nimport { getVersion } from '../../../Api/aclUtils';\r\nimport { version } from 'punycode';\r\n\r\nclass FormDialog extends Component<AddNewVersionProp> {\r\n    state = {\r\n        lastBlobUrl: null as string | null,\r\n        currentVersion: \"1.0\",\r\n        nextVersion: \"\"\r\n    }\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const item = this.props.item;\r\n        const currentVersion = this.state.currentVersion;\r\n        const nextVersion = this.state.nextVersion;\r\n        if (item) {\r\n            this.props.handleSubmit(event, { item, currentVersion, nextVersion });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.blobUrl !== this.state.lastBlobUrl) {\r\n            this.setState({\r\n                lastBlobUrl: this.props.blobUrl\r\n            });\r\n            this.setState({\r\n                loading: true\r\n            });\r\n\r\n            this.props.blobUrl && fetch(this.props.blobUrl).then(r => {\r\n                return r.text();\r\n            }).then(async t => {\r\n                let subj = this.props.initialHost + '/' + this.props.initialPath.join('/') + '/' + this.props.selectedItems[0].name + '.ttl';\r\n                let version = getVersion(t, subj)\r\n                this.setState({\r\n                    currentVersion: version,\r\n                    content: t\r\n                });\r\n\r\n                // console.log(this.state.aclList)\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    handleTextChange = () => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.state.nextVersion = event.target.value;\r\n        this.setState({ ...this.state, [name]: event.target.value });\r\n    };\r\n\r\n    render() {\r\n        const { handleClose, handleReset, open, canUpload, progress, fileList, handleSelectedFiles } = this.props;\r\n\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-upload\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-upload\">\r\n                        Add New Version\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                        <FormControl fullWidth={true}>\r\n                            <InputLabel htmlFor=\"oldversion\">Current Version</InputLabel>\r\n                            <Input id=\"oldversion\" aria-describedby=\"my-helper-text\" value={this.state.currentVersion} disabled />\r\n                        </FormControl>\r\n                        <FormControl fullWidth={true}>\r\n                            <InputLabel htmlFor=\"newversion\">New version</InputLabel>\r\n                            <Input fullWidth={true} onChange={this.handleTextChange()} id=\"newversion\" placeholder=\"Enter new version\" />\r\n                        </FormControl>\r\n                        <FormControl fullWidth={true}>\r\n                            <InputLabel htmlFor=\"newversion\">Message</InputLabel>\r\n                            <Input fullWidth={true} id=\"message\" placeholder=\"Enter your message\" />\r\n                        </FormControl>\r\n                        <FormControl fullWidth={true}>\r\n                            <FileUploader fileList={fileList} handleSelectedFiles={handleSelectedFiles} handleReset={handleReset} />\r\n                            {canUpload ? <LinearProgress variant=\"determinate\" value={progress} /> : null}\r\n                        </FormControl>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Cancel\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={this.handleSubmit.bind(this)} disabled={!canUpload} type=\"submit\">\r\n                            Upload\r\n                        </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    canUpload: boolean;\r\n    fileList: FileList | null;\r\n    progress: number;\r\n    item?: Item;\r\n    blobUrl: string;\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    selectedItems: Item[];\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { item }: { item: Item, currentVersion: string, nextVersion: string }): void;\r\n    handleSelectedFiles(event: React.ChangeEvent<HTMLInputElement>): void;\r\n    handleReset(): void;\r\n}\r\ninterface AddNewVersionProp extends StateProps, DispatchProps { }\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.ADD_NEW_VERSION,\r\n        item: state.items.selected[0],\r\n        canUpload: state.upload.fileList ? state.upload.fileList.length > 0 : false,\r\n        fileList: state.upload.fileList,\r\n        progress: state.upload.progress,\r\n        blobUrl: state.blob || '',\r\n        initialHost: state.account.host || '',\r\n        initialPath: state.path,\r\n        selectedItems: state.items.selected\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n\r\n        handleClose: (event) => {\r\n            dispatch(resetNewVersionUploader());\r\n        },\r\n        handleSubmit: (event, { item, currentVersion, nextVersion }) => {\r\n            event.preventDefault();\r\n            dispatch(handleAddNewVersion(item, currentVersion, nextVersion));\r\n        },\r\n        handleSelectedFiles: (event) => {\r\n            const files = event.target.files;\r\n            dispatch(setFileUploadList(files));\r\n        },\r\n        handleReset: () => {\r\n            // dispatch(resetFileUploadList());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FormDialog);\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { DialogStateProps, DialogButtonClickEvent, DialogDispatchProps } from '../dialogTypes';\r\nimport { Item } from '../../../Api/Item';\r\nimport { AppState } from '../../../Reducers/reducer';\r\nimport { DIALOGS } from '../../../Actions/actionTypes';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Button, Input, FormControl, InputLabel } from '@material-ui/core';\r\nimport { MyDispatch, closeDialog, handleExposeData } from '../../../Actions/Actions';\r\nimport { getContent } from '../../../Api/aclUtils';\r\n\r\nclass ExposeMetadata extends Component<ExposeMetadataProps> {\r\n    state = {\r\n        lastBlobUrl: null as string | null,\r\n        currentVersion: \"1.0\",\r\n        metadatainfo: { keyword:\"\", discipline: \"\" },\r\n        name: this.props.selectedItems[0] ? this.props.selectedItems[0].name : ''\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.blobUrl !== this.state.lastBlobUrl) {\r\n            this.setState({\r\n                lastBlobUrl: this.props.blobUrl\r\n            });\r\n            this.setState({\r\n                loading: true\r\n            });\r\n\r\n            this.props.blobUrl && fetch(this.props.blobUrl).then(r => {\r\n                return r.text();\r\n            }).then(async t => {\r\n                let subj = this.props.initialHost + '/' + this.props.initialPath.join('/') + '/' + this.props.selectedItems[0].name;\r\n                let content = getContent(t, subj)\r\n                this.setState({\r\n                    name :subj,\r\n                    metadatainfo: content,\r\n                    content: t\r\n                });\r\n\r\n                // console.log(this.state.aclList)\r\n                this.setState({\r\n                    loading: false\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    handleTextChange = (key: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (key == \"keyword\")\r\n            this.state.metadatainfo.keyword = event.target.value;\r\n        if (key == \"discipline\")\r\n            this.state.metadatainfo.discipline = event.target.value;\r\n        this.setState({ ...this.state, [name]: event.target.value });\r\n    };\r\n\r\n    handleSubmit(event: DialogButtonClickEvent) {\r\n        const item = this.props.item;\r\n        const metadatainfo = this.state.metadatainfo;\r\n        if (item) {\r\n            this.props.handleSubmit(event, { item, metadatainfo });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { handleClose, open, initialHost, initialPath } = this.props;\r\n        return (\r\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-upload\" fullWidth={true} maxWidth={'sm'}>\r\n                <form>\r\n                    <DialogTitle id=\"form-dialog-upload\">\r\n                        Expose Metadata\r\n                </DialogTitle>\r\n                    <DialogContent>\r\n                        {this.state.name}\r\n                        <FormControl fullWidth={true} >\r\n                            <InputLabel htmlFor=\"my-input\">Keyword</InputLabel>\r\n                            <Input value={this.state.metadatainfo.keyword} onChange={this.handleTextChange(\"keyword\")} id=\"keyword\" aria-describedby=\"my-helper-text\" />\r\n                        </FormControl>\r\n                        <FormControl fullWidth={true} >\r\n                            <InputLabel htmlFor=\"my-input\">Discipline</InputLabel>\r\n                            <Input value={this.state.metadatainfo.discipline} disabled onChange={this.handleTextChange(\"discipline\")} id=\"discipline\" aria-describedby=\"my-helper-text\" />\r\n                        </FormControl>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={handleClose} color=\"primary\" type=\"button\">\r\n                            Close\r\n                    </Button>\r\n                        <Button color=\"primary\" onClick={this.handleSubmit.bind(this)} type=\"submit\">\r\n                            Expose\r\n                        </Button>\r\n                    </DialogActions>\r\n                </form>\r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\ninterface StateProps extends DialogStateProps {\r\n    initialHost: string;\r\n    initialPath: string[];\r\n    blobUrl: string;\r\n    item?: Item;\r\n    selectedItems: Item[];\r\n}\r\ninterface DispatchProps extends DialogDispatchProps {\r\n    handleSubmit(event: DialogButtonClickEvent, { item }:\r\n        { item: Item, metadatainfo: {keyword:string, discipline:string} }): void;\r\n    handleSelectedFiles(event: React.ChangeEvent<HTMLInputElement>): void;\r\n    handleReset(): void;\r\n}\r\ninterface ExposeMetadataProps extends StateProps, DispatchProps { }\r\n\r\n\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: state.visibleDialogs.EXPOSE_METADATA,\r\n        blobUrl: state.blob || '',\r\n        item: state.items.selected[0],\r\n        initialHost: state.account.host || '',\r\n        initialPath: state.path,\r\n        selectedItems: state.items.selected,\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n\r\n    return {\r\n\r\n        handleClose: (event) => {\r\n            dispatch(closeDialog(DIALOGS.EXPOSE_METADATA));\r\n        },\r\n        handleSubmit: (event, { item, metadatainfo }) => {\r\n            event.preventDefault();\r\n            dispatch(handleExposeData(item, metadatainfo));\r\n        },\r\n        handleSelectedFiles: (event) => {\r\n            const files = event.target.files;\r\n            // dispatch(setFileUploadList(files));\r\n        },\r\n        handleReset: () => {\r\n            // dispatch(resetFileUploadList());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExposeMetadata);","import React from 'react';\r\nimport DialogMenu from './Menu/Menu';\r\nimport DialogContent from './Content/Content';\r\nimport DialogMedia from './Media/Media';\r\nimport DialogEdit from './Edit/Edit';\r\nimport DialogCreateFolder from './CreateFolder/CreateFolder';\r\nimport DialogCreateFile from './CreateFile/CreateFile';\r\nimport DialogRename from './Rename/Rename';\r\nimport DialogMove from './Move/Move';\r\nimport DialogCopy from './Copy/Copy';\r\nimport DialogUploadFile from './UploadFile/UploadFile';\r\nimport DialogUploadMetadata from './UploadMetadata/UploadMetadata';\r\nimport DialogAccessControl from './AccessControl/AccessControl';\r\nimport DialogAddNewVersion from './AddNewVersion/AddNewVersion';\r\nimport DialogExposeMetadata from './ExposeMetadata/ExposeMetadata'\r\n\r\n// TODO: Consider moving the visibility logic here\r\nfunction Dialogs() {\r\n    return (\r\n        <div className=\"Dialogs\">\r\n            <DialogMenu />\r\n            <DialogContent />\r\n            <DialogMedia />\r\n            <DialogEdit />\r\n            <DialogCreateFolder />\r\n            <DialogCreateFile />\r\n            <DialogMove />\r\n            <DialogCopy />\r\n            <DialogRename />\r\n            <DialogUploadFile />\r\n            <DialogUploadMetadata />\r\n            <DialogAddNewVersion />\r\n            <DialogExposeMetadata />\r\n            <DialogAccessControl />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Dialogs;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles, Theme, createStyles, WithStyles } from '@material-ui/core/styles';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport { connect, MapDispatchToPropsFactory } from 'react-redux';\r\nimport { MyDispatch, resetErrorMessage } from '../../Actions/Actions';\r\nimport { AppState } from '../../Reducers/reducer';\r\n\r\nconst styles = (theme: Theme) => createStyles({\r\n  close: {\r\n    padding: theme.spacing.unit / 2,\r\n  },\r\n});\r\n\r\nclass DynamicSnackbar extends React.Component<DynamicSnackbarProps> {\r\n  render() {\r\n    const { classes, errorMsg, handleClose, open, notificationDuration } = this.props;\r\n    return (\r\n      <div>\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n          }}\r\n          open={open}\r\n          autoHideDuration={notificationDuration}\r\n          onClose={handleClose}\r\n          ContentProps={{\r\n            'aria-describedby': 'message-id',\r\n          }}\r\n          message={<span id=\"message-id\">{errorMsg}</span>}\r\n          action={[\r\n            <IconButton key=\"close\" aria-label=\"Close\" color=\"inherit\" className={classes.close} onClick={handleClose} >\r\n              <CloseIcon />\r\n            </IconButton>,\r\n          ]}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ninterface StateProps {\r\n  open: boolean;\r\n  errorMsg: string;\r\n  notificationDuration: number;\r\n}\r\ninterface DispatchProps {\r\n  handleClose(): void;\r\n}\r\ninterface DynamicSnackbarProps extends StateProps, DispatchProps, WithStyles<typeof styles> {}\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => {\r\n    return {\r\n        open: !!state.errorMessage,\r\n        errorMsg: state.errorMessage,\r\n        notificationDuration: 60000\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        handleClose: () => {\r\n          dispatch(resetErrorMessage());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(DynamicSnackbar));\r\n\r\n","import React, { Component } from 'react';\r\nimport FileList from './Components/FileList/FileList';\r\nimport Navbar from './Components/Navbar/Navbar';\r\nimport ContextMenu from './Components/ContextMenu/ContextMenu';\r\nimport Dialogs from './Components/Dialogs/Dialogs';\r\n\r\nimport { MuiThemeProvider as MaterialUI, createMuiTheme, WithStyles } from '@material-ui/core/styles';\r\nimport green from '@material-ui/core/colors/green';\r\nimport { connect } from 'react-redux';\r\nimport { initApp, MyDispatch, closeContextMenu } from './Actions/Actions';\r\nimport DynamicSnackbar from './Components/Notification/DynamicSnackbar';\r\nimport HistoryHandler from './Components/HistoryHandler/HistoryHandler';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: green,\r\n    },\r\n    typography: {\r\n        useNextVariants: true,\r\n    }\r\n});\r\n\r\nclass App extends Component<AppProps> {\r\n\r\n    componentDidMount() {\r\n        this.props.init();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"App\">\r\n                <MaterialUI theme={theme}>\r\n                    <div onClick={this.props.handleHideContextMenu} onContextMenu={this.props.handleHideContextMenu}>\r\n                        <Navbar />\r\n                        <FileList />\r\n                        <ContextMenu />\r\n                        <DynamicSnackbar />\r\n                        <Dialogs />\r\n                    </div>\r\n                </MaterialUI>\r\n                <HistoryHandler />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\ninterface DispatchProps {\r\n    init(): void;\r\n    handleHideContextMenu(event: React.MouseEvent<HTMLDivElement, MouseEvent>): void;\r\n}\r\n\r\ninterface AppProps extends DispatchProps {}\r\n\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = (dispatch: MyDispatch): DispatchProps => {\r\n    return {\r\n        init: () => {\r\n            dispatch(initApp());\r\n        },\r\n\r\n        handleHideContextMenu: (event) => {\r\n            const element = event.target as HTMLElement;\r\n            if (!(element.tagName === 'INPUT' || /label/i.test(element.className))) {\r\n                event.preventDefault();\r\n            }\r\n            dispatch(closeContextMenu());\r\n        }\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport thunk from 'redux-thunk';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport reducer from './Reducers/reducer'\r\nimport * as serviceWorker from './serviceWorker';\r\nimport App from './App';\r\nimport './index.css';\r\nimport 'typeface-roboto';\r\n\r\nconst store = createStore(reducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider >\r\n    , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register({\r\n    onUpdate: (config) => {\r\n        console.group('serviceWorker.onUpdate');\r\n        console.log(config);\r\n        console.groupEnd();\r\n    },\r\n    onSuccess: (config) => {\r\n        console.group('serviceWorker.onSuccess');\r\n        console.log(config);\r\n        console.groupEnd();\r\n    }\r\n});"],"sourceRoot":""}