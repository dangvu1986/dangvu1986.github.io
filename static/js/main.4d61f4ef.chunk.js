(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{355:function(e,t,n){},460:function(e,t,n){e.exports=n(878)},473:function(e,t){},475:function(e,t,n){var a={"./N3Lexer":191,"./N3Lexer.js":191,"./N3Parser":192,"./N3Parser.js":192,"./N3Store":257,"./N3Store.js":257,"./N3StreamParser":258,"./N3StreamParser.js":258,"./N3StreamWriter":264,"./N3StreamWriter.js":264,"./N3Util":193,"./N3Util.js":193,"./N3Writer":197,"./N3Writer.js":197};function r(e){var t=i(e);return n(t)}function i(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id=475},478:function(e,t){},480:function(e,t){},589:function(e,t){},590:function(e,t){},655:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=655},776:function(e,t,n){},784:function(e,t,n){},808:function(e,t,n){},814:function(e,t,n){},835:function(e,t,n){},876:function(e,t,n){},878:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),c=n(55),o=n.n(c),l=n(392),u=n(4),s=n(99),h=n(27);!function(e){e.CHOOSE_LOCATION="CHOOSE_LOCATION",e.CREATE_FOLDER="CREATE_FOLDER",e.CREATE_FILE="CREATE_FILE",e.UPLOAD_FILE="UPLOAD_FILE",e.EXPOSE_METADATA="EXPOSE_METADATA",e.ADD_NEW_VERSION="ADD_NEW_VERSION",e.UPLOAD_METADATA="UPLOAD_METADATA",e.ACCESS_CONTROL="ACCESS_CONTROL",e.RENAME="RENAME",e.MOVE="MOVE",e.COPY="COPY",e.CONTENT="CONTENT",e.MEDIA="MEDIA",e.EDIT="EDIT",e.CONTEXT_MENU="CONTEXT_MENU"}(a||(a={}));var d=null,f={getHost:function(){return d},setHost:function(e){for(d=e;d.endsWith("/");)d=d.slice(0,-1)}},p={loggedIn:!1,host:null,webId:null},m=n(41),v=Object.values(a).map(function(e){return Object(m.a)({},e,!1)}).reduce(function(e,t){return Object(h.a)({},e,t)}),b={open:!1,x:0,y:0},E=n(35),y={inCurFolder:[],filter:"",selected:[]},g=function(e,t){return e.filter(function(e){return!e.equals(t)})},O=function(e,t){return[].concat(Object(E.a)(e),[t])},C=[],k={fileList:null,progress:0},j=Object(s.c)({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_IN":return Object(h.a)({},e,{loggedIn:!0});case"SET_LOGGED_OUT":return Object(h.a)({},e,{loggedIn:!1});case"SET_HOST":return f.setHost(t.value),Object(h.a)({},e,{host:t.value});case"RESET_HOST":return Object(h.a)({},e,{host:null});case"SET_WEB_ID":return Object(h.a)({},e,{webId:t.value});case"RESET_WEB_ID":return Object(h.a)({},e,{webId:null});default:return e}},blob:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADED_BLOB":return URL.createObjectURL(t.value);case"RESET_LOADED_BLOB":return null!==e&&URL.revokeObjectURL(e),null;default:return e}},contextMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_CONTEXT_MENU":return Object(h.a)({},e,{open:!0,x:t.value.x,y:t.value.y});case"CLOSE_CONTEXT_MENU":return Object(h.a)({},e,{open:!1});default:return e}},visibleDialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_DIALOG":return Object(h.a)({},e,Object(m.a)({},t.value,!0));case"CLOSE_DIALOG":return Object(h.a)({},e,Object(m.a)({},t.value,!1));default:return e}},errorMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_MESSAGE":return t.value;default:return e}},items:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ITEMS":return Object(h.a)({},e,{inCurFolder:t.value});case"SELECT_ITEMS":return Object(h.a)({},e,{selected:t.value});case"DESELECT_ITEM":return Object(h.a)({},e,{selected:g(e.selected,t.value)});case"TOGGLE_SELECTED_ITEM":return Object(h.a)({},e,{selected:e.selected.includes(t.value)?g(e.selected,t.value):O(e.selected,t.value)});case"FILTER_ITEMS":return Object(h.a)({},e,{filter:t.value});case"REMOVE_FILTER":return Object(h.a)({},e,{filter:""});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"DISPLAY_LOADING":return!0;case"STOP_LOADING":return!1;default:return e}},path:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ENTER_FOLDER":return[].concat(Object(E.a)(e),[t.value]);case"MOVE_FOLDER_UPWARDS":return t.value>0?e.slice(0,-t.value):e;case"SET_PATH":return Object(E.a)(t.value);default:return e}},upload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UPLOAD_FILE_LIST":return Object(h.a)({},e,{fileList:t.value});case"SET_UPLOAD_FILE_PROGRESS":return Object(h.a)({},e,{progress:t.value});default:return e}}}),w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var S=n(11),_=n(12),L=n(17),T=n(16),A=n(18),D=n(2),I=n.n(D),N=n(13),R=n(5),U=function(){function e(t,n){Object(S.a)(this,e),this._name=void 0,this._path=void 0,this._url=void 0,this._size=void 0;var a=B(t);this._name=a.pop()||"",this._path=a,this._url=t,this._size=n}return Object(_.a)(e,[{key:"equals",value:function(e){return this.name===e.name&&this.path.length===e.path.length&&this.path.every(function(t,n){return t===e.path[n]})}},{key:"getDisplayName",value:function(){return decodeURI(this.name)}},{key:"getDisplaySize",value:function(){return this._size?W(this._size):"Unknown size"}},{key:"name",get:function(){return this._name}},{key:"path",get:function(){return this._path}},{key:"url",get:function(){return this._url}},{key:"size",get:function(){return this._size}}]),e}(),P=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"isImage",value:function(){return F.image.test(this.name)}},{key:"isMedia",value:function(){return F.media.test(this.name)}},{key:"isEditable",value:function(){return F.editable.test(this.name)}},{key:"isExtractable",value:function(){return F.extractable.test(this.name)}},{key:"isMetadata",value:function(){return F.metadata.test(this.name)}},{key:"isNotUpdateable",value:function(){return!F.notUpdatable.test(this.name)}},{key:"isVersionFile",value:function(){return F.version.test(this.name)}},{key:"isVideo",value:function(){return F.video.test(this.name)}}]),t}(U),M=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),t}(U),F={editable:/\.(txt|diff?|patch|svg|asc|cnf|cfg|conf|html?|cfm|cgi|aspx?|ini|pl|py|md|css|cs|jsx?|jsp|log|htaccess|htpasswd|gitignore|gitattributes|env|json|atom|eml|rss|markdown|sql|xml|xslt?|sh|rb|as|bat|cmd|cob|for|ftn|frm|frx|inc|lisp|scm|coffee|php[3-6]?|java|c|cbl|go|h|scala|vb|tmpl|lock|go|yml|yaml|tsv|lst|ttl)$/i,image:/\.(jpe?g|gif|bmp|png|svg|tiff?)$/i,media:/\.(mp3|ogg|wav|mp4|webm)$/i,video:/\.(mp4|webm|ogg)$/i,extractable:/\.(zip)$/i,metadata:/\.(ttl|n3)$/i,version:/\.(old)$/i,notUpdatable:/\.(old|ttl|n3)$/i},W=function(e){var t="string"===typeof e?parseInt(e):e,n=Math.log(t)/Math.log(1e3)|0;return+(t/Math.pow(1e3,n)).toFixed(2)+" "+("kMGTPEZY"[n-1]||"")+"B"},B=function(e){return new URL(e).pathname.split("/").filter(function(e){return""!==e})};function V(e,t){var n=[],a=[];return e.each(R.sym(t),R.sym("http://www.w3.org/ns/ldp#contains"),void 0,void 0).forEach(function(t){var r=t.value,i=function(e,t){var n=R.sym(t),a=R.sym("http://www.w3.org/ns/posix/stat#size"),r=e.any(n,a,void 0,void 0);return r&&"value"in r?r.value:void 0}(e,r);!function(e,t){var n=R.sym(t),a=R.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),r=e.each(n,a,void 0,void 0);return Object.values(r).some(function(e){return null!==e.value.match("ldp#BasicContainer")})}(e,r)?n.push(new P(r,i)):a.push(new M(r,i))}),{files:n,folders:a}}function G(e,t){return H.apply(this,arguments)}function H(){return(H=Object(N.a)(I.a.mark(function e(t,n){var a,r,i=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=i.length>2&&void 0!==i[2]?i[2]:"")||z(n),r=R.graph(),e.abrupt("return",new Promise(function(e,i){R.parse(t,r,n,a,function(){}),e(r)}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){var t=e.replace(/.*\./,"");return t.match(/\/$/)?"dir":t.match(/(md|markdown)/)?"text/markdown":t.match(/html/)?"text/html":t.match(/xml/)?"text/xml":t.match(/ttl/)?"text/turtle":t.match(/n3/)?"text/n3":t.match(/rq/)?"application/sparql":t.match(/css/)?"text/css":t.match(/txt/)?"text/plain":t.match(/json/)?"application/json":t.match(/js/)?"application/javascript":t.match(/(png|gif|jpeg|tif)/)?"image":t.match(/(mp3|aif|ogg)/)?"audio":t.match(/(avi|mp4|mpeg)/)?"video":"text/turtle"}var X=function(){function e(t,n,a,r,i,c,o,l){Object(S.a)(this,e),this._key=void 0,this._agent=void 0,this._accessTo=void 0,this._read=void 0,this._write=void 0,this._append=void 0,this._control=void 0,this._isGroup=void 0,this._key=t,this._agent=n,this._accessTo=a,this._read=r,this._write=i,this._append=c,this._control=o,this._isGroup=l}return Object(_.a)(e,[{key:"agent",get:function(){return this._agent}},{key:"accessTo",get:function(){return this._accessTo}},{key:"isGroup",get:function(){return this._isGroup}},{key:"read",get:function(){return this._read}},{key:"write",get:function(){return this._write}},{key:"append",get:function(){return this._append}},{key:"control",get:function(){return this._control}}]),e}(),Y="http://www.w3.org/ns/auth/acl#",$="http://purl.org/pav/",q="http://purl.org/dc/terms/",K="http://schema.org/";function J(e,t){var n=R.graph(),a=[];return R.parse(e,n,t,"text/turtle",function(){var e=0;n.each(void 0,void 0,R.sym(Y+"Authorization"),R.sym(t)).forEach(function(t){var r=t.value,i=oe(n,r),c=ie(n,r,i?"agentClass":"agent"),o=re(n,r),l=ce(n,r,"Read"),u=ce(n,r,"Write"),s=ce(n,r,"Append"),h=ce(n,r,"Control");a.push(new X(e++,c,o,l,u,s,h,i))})}),a}function Z(e,t,n){var a=R.graph(),r=new R.UpdateManager(a);R.parse(e,a,n,"text/turtle",function(){var e=a.any(void 0,R.sym(q+"creator"),void 0,R.sym(n)),i=[],c=R.sym(n),o=R.sym(e.value);i.push(R.st(o,R.sym(K+"url"),n,c)),i.push(R.st(o,R.sym(K+"contentURL"),t,c)),r.update([],i,function(e,t,n){t||console.log("err:"+n)})})}function Q(e,t,n,a,r){var i=R.graph(),c=new R.UpdateManager(i),o=n+"/"+t+".ttl";R.parse(e,i,o,"text/turtle",function(){var e=i.any(void 0,R.sym(q+"creator"),void 0,R.sym(o)),l=i.match(R.sym(e.value),R.sym($+"version"),void 0,void 0),u=[],s=R.sym(o),h=R.sym(e.value),d=n+"/version/"+r+"/"+t+".old",f=R.sym(d);u.push(R.st(h,R.sym($+"version"),a,s)),u.push(R.st(h,R.sym($+"hasEarlierVersion"),f,s)),u.push(R.st(f,R.sym($+"hasVersion"),r,s)),u.push(R.st(f,R.sym(K+"url"),d,s)),c.update(l,u,function(e,t,n){t||console.log("err:"+n)})})}function ee(e,t,n,a){var r=R.graph(),i=new R.UpdateManager(r),c=R.sym(n),o=R.sym(e);R.parse(t,r,e,"text/turtle",function(){var e;e=r.match(c,R.sym(K+"keyword"),void 0,o);var t=[];t.push(R.st(c,R.sym(q+"type"),"Metadata",o)),t.push(R.st(c,R.sym(K+"keyword"),a.keyword,o)),t.push(R.st(c,R.sym(q+"subject"),a.discipline,o)),t.push(R.st(c,R.sym(K+"url"),c,o)),i.update(e,t,function(e,t,n){t||console.log("err:"+n)})})}function te(e,t){var n=R.graph(),a="";return R.parse(e,n,t,"text/turtle",function(){var e=n.match(void 0,R.sym($+"version"),void 0,R.sym(t));e.length&&(a=e[0].object.value)}),a}function ne(e,t){var n=R.graph(),a={keyword:"",discipline:""};return R.parse(e,n,t,"text/turtle",function(){var e=n.any(void 0,R.sym(K+"keyword"),void 0,R.sym(t));if(e&&e.value){var r=n.any(R.sym(e.value),R.sym(K+"keyword"),void 0,void 0);r&&(a.keyword=r.value);var i=n.any(R.sym(e.value),R.sym(q+"subject"),void 0,void 0);i&&(a.discipline=i.value)}}),a}function ae(e){var t=[];return e.forEach(function(e){if(e._agent&&(e._read||e._write||e._control||e._append)){t.push(""),t.push("<#authorization".concat(e._key,"> a  acl:Authorization;")),t.push("acl:".concat(e._isGroup?"agentClass":"agent"," <").concat(e._agent,">;")),t.push("acl:defaultForNew <./>;"),t.push("acl:accessTo <".concat(e._accessTo,">;"));var n=[];e._read&&n.push("acl:Read"),e._write&&n.push("acl:Write"),e._append&&n.push("acl:Append"),e._control&&n.push("acl:Control"),t.push("acl:mode  ".concat(n.join(", "),"."))}}),"@prefix  acl:  <http://www.w3.org/ns/auth/acl#> . \n"+t.join("\n")}function re(e,t){var n=R.sym(t),a=e.any(n,R.sym(Y+"accessTo"),void 0,void 0);return a&&"value"in a?a.value:""}function ie(e,t,n){var a=R.sym(t),r=e.any(a,R.sym(Y+n),void 0,void 0);return r&&"value"in r?r.value:""}function ce(e,t,n){var a=R.sym(t),r=e.match(a,R.sym(Y+"mode"),R.sym(Y+n),void 0);return!(!r||1!=r.length)}function oe(e,t){var n=R.sym(t),a=e.match(n,R.sym(Y+"agentClass"),void 0,void 0);return!(!a||1!=a.length)}var le=n(65),ue=n(679);function se(e,t,n){return he.apply(this,arguments)}function he(){return(he=Object(N.a)(I.a.mark(function e(t,n,a){var r,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(f.getHost()).concat(t),i=r+"/"+n,e.abrupt("return",ue.createFile(i,a).then(function(e){return console.log("Created acl file ".concat(e,".")),!0},function(e){return console.log(e),!1}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(N.a)(I.a.mark(function e(t,n){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Qe(t,n),e.abrupt("return",le.fetch(a).then(et));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(e){return me.apply(this,arguments)}function me(){return(me=Object(N.a)(I.a.mark(function e(t){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le.fetch(t).then(et));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e,t){return be.apply(this,arguments)}function be(){return(be=Object(N.a)(I.a.mark(function e(t,n){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ze(t,n),e.abrupt("return",le.fetch(a,{headers:{Accept:"text/turtle"}}).then(et));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(e,t){return ye.apply(this,arguments)}function ye(){return(ye=Object(N.a)(I.a.mark(function e(t,n){var a,r,i,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ze(t,n),e.next=3,ve(t,n);case 3:return r=e.sent,e.next=6,r.text();case 6:return i=e.sent,e.next=9,G(i,a,"text/turtle");case 9:return c=e.sent,o=V(c,a),e.abrupt("return",o);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=Object(N.a)(I.a.mark(function e(t,n,a,r){var i,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Qe(t,""),e.next=3,de(t,n+".ttl");case 3:return c=e.sent,e.next=6,c.text();case 6:Q(e.sent,n,i,a,r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oe(){return(Oe=Object(N.a)(I.a.mark(function e(t,n,a){var r,i,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(t,n),i=Qe(t,a),e.next=4,de(t,a);case 4:return c=e.sent,e.next=7,c.text();case 7:Z(e.sent,r,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(){return(Ce=Object(N.a)(I.a.mark(function e(t,n,a){var r,i,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe("/"+t,n),i="https://davu.solid.community/public/registry/index.ttl",e.next=4,pe(i);case 4:return c=e.sent,e.next=7,c.text();case 7:o=e.sent,ee(i,o,r,a);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ke(){return(ke=Object(N.a)(I.a.mark(function e(t,n,a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t,n,a);case 2:return e.abrupt("return",Ve(t,a));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(){return(je=Object(N.a)(I.a.mark(function e(t,n,a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,n,t,a);case 2:return e.abrupt("return",He(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(){return(we=Object(N.a)(I.a.mark(function e(t,n,a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t,n,t,a);case 2:return e.abrupt("return",Xe(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(e,t,n){return Se.apply(this,arguments)}function Se(){return(Se=Object(N.a)(I.a.mark(function e(t,n,a){var r,i,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t);case 2:return r=e.sent,i=r.files,c=r.folders,i=i.filter(function(e){var t=e.name;return a.includes(t)}),c=c.filter(function(e){var t=e.name;return a.includes(t)}),o=[].concat(Object(E.a)(i.map(function(e){var a=e.name;return _e(t,a,n,a)})),Object(E.a)(c.map(function(e){var a=e.name;return Te(t,a,n,a)}))),e.next=10,Promise.all(o);case 10:return e.abrupt("return",new Response);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(e,t,n,a){return Le.apply(this,arguments)}function Le(){return(Le=Object(N.a)(I.a.mark(function e(t,n,a,r){var i,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(t,n);case 2:return i=e.sent,e.next=5,i.blob();case 5:return c=e.sent,e.abrupt("return",Me(a,r,c));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Te(e,t,n,a){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(N.a)(I.a.mark(function e(t,n,a,r){var i,c,o,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(a,r);case 2:return e.next=4,Ee(t,n);case 4:return i=e.sent,c=i.files,o=i.folders,l=[].concat(Object(E.a)(c.map(function(e){var i=e.name;return _e("".concat(t,"/").concat(n),i,"".concat(a,"/").concat(r),i)})),Object(E.a)(o.map(function(e){var i=e.name;return Te("".concat(t,"/").concat(n),i,"".concat(a,"/").concat(r),i)}))),e.next=10,Promise.all(l);case 10:return e.abrupt("return",new Response);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function De(){return(De=Object(N.a)(I.a.mark(function e(t,n){var a;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(n).map(function(e){return Re(t,e.name,e)}),e.next=3,Promise.all(a);case 3:return e.abrupt("return",new Response);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ie(e,t){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t,n);case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",new Response);case 4:return e.abrupt("return",We(t,n,new Blob,'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"'));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Re(e,t,n){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(N.a)(I.a.mark(function e(t,n,a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t,n);case 2:return e.abrupt("return",Me(t,n,a));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pe(){return(Pe=Object(N.a)(I.a.mark(function e(t,n,a){var r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He(t,n);case 2:return console.log("Remove ACL file"),e.next=5,ae(a);case 5:return r=e.sent,e.abrupt("return",se(t,n,r));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Me(e,t,n){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(N.a)(I.a.mark(function e(t,n,a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",We(t,n,a,'<http://www.w3.org/ns/ldp#Resource>; rel="type"'));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function We(e,t,n,a){return Be.apply(this,arguments)}function Be(){return(Be=Object(N.a)(I.a.mark(function e(t,n,a,r){var i,c;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(f.getHost()).concat(t),c={method:"POST",headers:{link:r,slug:n,"Content-Type":void 0},body:a},e.abrupt("return",le.fetch(i,c).then(et));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ve(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map(function(e){return He(t,e)})).then(function(){return new Response}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function He(e,t){return ze.apply(this,arguments)}function ze(){return(ze=Object(N.a)(I.a.mark(function e(t,n){var a,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Qe(t,n),e.next=3,le.fetch(a,{method:"DELETE"});case 3:if(409!==(r=e.sent).status&&301!==r.status){e.next=8;break}return e.abrupt("return",Xe(t,n));case 8:if(404!==r.status){e.next=12;break}return e.abrupt("return",r);case 12:return et(r),e.abrupt("return",r);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xe(e,t){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(t,n);case 2:return e.abrupt("return",He(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(e,t){return qe.apply(this,arguments)}function qe(){return(qe=Object(N.a)(I.a.mark(function e(t,n){var a,r,i,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t,"/").concat(n),e.next=3,Ee(t,n);case 3:return r=e.sent,i=r.files,c=r.folders,o=[].concat(Object(E.a)(i.map(function(e){var t=e.name;return He(a,t)})),Object(E.a)(c.map(function(e){var t=e.name;return Xe(a,t)}))),e.next=9,Promise.all(o);case 9:return e.abrupt("return",new Response);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ke(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(N.a)(I.a.mark(function e(t,n){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve(t,n);case 3:return e.abrupt("return",!0);case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof Response&&404===e.t0.status)){e.next=10;break}return e.abrupt("return",!1);case 10:throw e.t0;case 11:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function Ze(e,t){return Qe(e,t)+"/"}function Qe(e,t){for(var n="".concat(f.getHost()).concat(e,"/").concat(t||"");"/"===n.slice(-1);)n=n.slice(0,-1);return n}function et(e){if(!e.ok)throw e;return e}var tt=n(250),nt=n.n(tt),at=new(function(){function e(){Object(S.a)(this,e),this._data={}}return Object(_.a)(e,[{key:"add",value:function(e,t){return this._data[e]=t,t}},{key:"contains",value:function(e){return this._data.hasOwnProperty(e)}},{key:"get",value:function(e){return this._data[e]}},{key:"remove",value:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.filter(function(t){return e.contains(t)}).forEach(function(t){return delete e._data[t]})}},{key:"clear",value:function(){this._data={}}}]),e}()),rt=function(){var e=Object(N.a)(I.a.mark(function e(t){var n,a,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",console.group("handleFetchError"),!(t instanceof Response)){e.next=12;break}return e.next=5,t.text();case 5:n=e.sent,console.error("url: ".concat(t.url)),console.error("status: ".concat(t.status)),r={401:"The ressource at ".concat(t.url," requires you to login."),403:"You don't have permission to access the ressource at ".concat(t.url,".\n            Please make sure that you are logged in with the correct account.\n            If the server runs with version 5.0.0 or higher, make sure you gave this app read/write permission"),404:"The ressource at ".concat(t.url," was not found"),500:"An internal server error occured...\n            ".concat(n)},t.status in r&&(a=r[t.status]),e.next=13;break;case 12:t instanceof Error?(n=t.message,console.error(t.stack)):n="string"===typeof t?t:JSON.stringify(t);case 13:throw console.error("errorMessage: ".concat(n)),console.error("error: ".concat(t)),console.groupEnd(),new Error(a||n);case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),it=function(e){return""===e?e:("/"+e).replace(/\/\//g,"/")},ct=function(e){return e=it(e),at.contains(e)?Promise.resolve(at.get(e)):Ee(e).then(function(e){var t=e.files,n=e.folders;return[].concat(Object(E.a)(t),Object(E.a)(n))}).then(function(t){return at.add(e,t)}).catch(rt)},ot=function(e){return t=it(e),"".concat(f.getHost()).concat(t);var t},lt=function(e,t){return de(e=it(e),t).then(function(e){return e.blob()}).catch(rt)},ut=function(e,t,n){return e=it(e),at.remove(e),function(e,t,n){return je.apply(this,arguments)}(e,t,n).catch(rt)},st=function(e,t,n){return e=it(e),at.remove(e),function(e,t,n){return we.apply(this,arguments)}(e,t,n).catch(rt)},ht=function(e,t){return e=it(e),at.remove(e),(t||"").trim()?Ie(e,t).catch(rt):Promise.reject("Invalid folder name")},dt=function(e,t,n){return e=it(e),t=it(t),at.remove(e,t),n.length?function(e,t,n){return ke.apply(this,arguments)}(e,t,n).catch(rt):Promise.reject("No files to move")},ft=function(e,t){return e=it(e),at.remove(e),t.length?function(e,t){return De.apply(this,arguments)}(e,t).catch(rt):Promise.reject("No files to upload")},pt=function(e,t,n){return e=it(e),at.remove(e),Re(e,t,n).catch(rt)},mt=function(e,t,n){return e=it(e),at.remove(e),function(e,t,n){return Oe.apply(this,arguments)}(e,t,n).catch(rt)},vt=function(e,t,n){return e=it(e),at.remove(e),se(e,t,n).catch(rt)},bt=function(e,t,n){return e=it(e),at.remove(e),function(e,t,n){return Pe.apply(this,arguments)}(e,t,n).catch(rt)},Et=function(e,t){e=it(e);var n=new nt.a;return yt(n,e,t).then(function(){return n})},yt=function e(t,n,a){var r=a.map(function(){var a=Object(N.a)(I.a.mark(function a(r){var i,c,o,l;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(r instanceof M)){a.next=10;break}return i=t.folder(r.name),c="".concat(n,"/").concat(r.name),a.next=5,ct(c);case 5:return o=a.sent,a.next=8,e(i,c,o);case 8:a.next=15;break;case 10:if(!(r instanceof P)){a.next=15;break}return a.next=13,lt(n,r.name);case 13:l=a.sent,t.file(r.name,l,{binary:!0});case 15:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}());return Promise.all(r)},gt=function(){var e=Object(N.a)(I.a.mark(function e(t){var n,a,r,i,c=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:t,a=c.length>2?c[2]:void 0,e.next=4,lt(t,a);case 4:return r=e.sent,e.next=7,nt.a.loadAsync(r);case 7:return i=e.sent,e.abrupt("return",Ot(i,n));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function Ot(e,t){return Ct.apply(this,arguments)}function Ct(){return(Ct=Object(N.a)(I.a.mark(function e(t,n){var a,r,i=arguments;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:"",r=kt(t,a).map(function(){var e=Object(N.a)(I.a.mark(function e(a){var r,i,c,o;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.name,i=jt(r),c=wt("".concat(n,"/").concat(r)),!a.dir){e.next=10;break}return e.next=6,ht(c,i);case 6:return e.next=8,Ot(t,n,r);case 8:e.next=15;break;case 10:return e.next=12,a.async("blob");case 12:return o=e.sent,e.next=15,pt(c,i,o);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",Promise.all(r));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(e,t){return Object.keys(e.files).filter(function(e){var n=e.slice(t.length,e.length);return!(!n||e.slice(0,t.length)!==t)&&(!n.includes("/")||!n.slice(0,-1).includes("/"))}).map(function(t){return e.files[t]})}function jt(e){return(e=e.endsWith("/")?e.slice(0,-1):e).substr(e.lastIndexOf("/")+1)}function wt(e){return e=(e=e.endsWith("/")?e.slice(0,-1):e).substr(0,e.lastIndexOf("/"))}var xt=function(){return function(e,t){e(vn()),function(){return _t.apply(this,arguments)}().then(function(t){return e(St(t))}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}},St=function(e){return function(){var t=Object(N.a)(I.a.mark(function t(n,a){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,le.currentSession();case 4:t.t0=t.sent;case 5:(e=t.t0)?(n(cn(e.webId)),n(nn())):(n(an()),n(on()));case 7:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()};function _t(){return(_t=Object(N.a)(I.a.mark(function e(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",le.popupLogin({popupUri:"./vendor/solid-auth-client/popup.html"}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Lt=function(){return function(e,t){return at.clear()}},Tt=function(e,t){return function(n,r){var i=r(),c=i.path;i.upload.fileList;n(vn()),n(dn()),function(e,t,n){Ce.apply(this,arguments)}(c.join("/"),e.name,t),n(jn(a.EXPOSE_METADATA)),n(Pt())}},At=function(e,t,n){return function(a,r){var i=r(),c=i.path,o=i.upload.fileList;a(vn()),a(dn()),a(Cn(50));var l=c.join("/"),u=l+"/version/"+t,s=[e.name];return null===o?(a($t()),a(Pt()),a(Sn("Couldn't find files to upload"))):o[0].name!=e.name?(a($t()),a(Pt()),a(Sn("The new version need to has same file name"))):(function(e,t,n,a){ge.apply(this,arguments)}("/"+l,o[0].name,n,t),void ht(l,"version").then(function(n){a(Pt()),a(Cn(100)),setTimeout(function(e){a($t())},300),ht(l+="/version/",t).then(function(n){l+="/"+t+"/",dt(c.join("/"),u,s).then(function(t){ut(u,e.name,e.name+".old").catch(function(e){return a(Sn(String(e)))}).finally(function(){return a(bn())}),ft(c.join("/"),o).then(function(e){a(Pt())}).catch(function(e){return a(Sn(String(e)))}).finally(function(){a(bn())})}).catch(function(e){return a(Sn(String(e)))}).finally(function(){return a(bn())})}).catch(function(e){return a(Sn(String(e)))}).finally(function(){return a(bn())})}).catch(function(e){return a(Sn(String(e)))}).finally(function(){return a(bn())}))}},Dt=function(e,t){return ot(e.join("/"))+"/"+t},It=function(){return ot("profile/card#me")},Nt=function(e,t){return function(n,a){var r=a().path;n(vn());var i=Dt(r,e),c=It();t="@prefix  acl:  <http://www.w3.org/ns/auth/acl#> .\n    <#authorization0> a  acl:Authorization;\n    acl:agent <".concat(c,">;\n    acl:accessTo <").concat(i,">;\n    acl:defaultForNew <./>;\n    acl:mode  acl:Read, acl:Write, acl:Control, acl:Append."),e+=".acl",n(vn()),vt(r.join("/"),e,t).then(function(e){return n(Pt()),ct(r.join("/"))}).then(function(t){return t.find(function(t){return t.getDisplayName()===e})}).catch(function(e){return n(Sn(String(e)))}).finally(function(){return n(bn())})}},Rt=function(e,t){return function(n,a){var r=a().path;mt(r.join("/"),t,e)}},Ut=function(e){return function(t,n){var a=n().path;t(vn());var r=Dt(a,e),i=It(),c="@prefix  acl:  <http://www.w3.org/ns/auth/acl#> .\n    <#authorization0> a  acl:Authorization;\n    acl:agent <".concat(i,">;\n    acl:accessTo <").concat(r,">;\n    acl:defaultForNew <./>;\n    acl:mode  acl:Read, acl:Write, acl:Control, acl:Append.\n\n    <#authorization1> a  acl:Authorization;\n    acl:defaultForNew  <./>;\n    acl:accessTo   <").concat(r,">; \n    acl:mode   acl:Read;\n    acl:agentClass <http://xmlns.com/foaf/0.1/Agent>.");e+=".acl",t(vn()),vt(a.join("/"),e,c).then(function(e){return t(Pt()),ct(a.join("/"))}).then(function(t){return t.find(function(t){return t.getDisplayName()===e})}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}},Pt=function(){return function(e,t){var n=t().path;e(vn()),e(dn()),ct(n.join("/")).then(function(t){return e(ln(t))}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}},Mt=function(){return function(e,t){return function(e){at.remove(it(e))}(t().path.join("/")),e(Pt())}};function Ft(e,t){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(e,t);else{var n=document.createElement("a"),a=URL.createObjectURL(e);n.href=a,n.download=t,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(a)},0)}}var Wt=function(e){return function(t,n){var a=n().path;t(vn()),t(En()),lt(a.join("/"),e).then(function(e){return t(yn(e))}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}},Bt=function(e){return function(t,n){t(Wt(e)),t(kn(a.EDIT))}},Vt=function(e){return function(t,n){t(Wt(e)),t(kn(a.CONTENT))}},Gt=function(){return function(e,t){e(kn(a.MEDIA))}},Ht=function(e){return function(t,n){var a=n().path;t(vn());var r=e.map(function(e){return e.name});(function(e,t){return e=it(e),at.remove(e),t.length?Ve(e,t).catch(rt):Promise.reject("No files to remove")})(a.join("/"),r).then(function(e){return t(Pt())}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}},zt=function(e,t){t.host;var n=t.path;return function(t,r){var i=r().path;t(vn());var c=n.join("/"),o=e.map(function(e){return e.name});(function(e,t,n){return e=it(e),t=it(t),at.remove(e,t),n.length?xe(e,t,n).catch(rt):Promise.reject("No files to copy")})(i.join("/"),c,o).then(function(e){t(Pt()),t(jn(a.COPY))}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}},Xt=function(e){return function(t,n){var a=n().items,r=a.inCurFolder,i=a.selected,c=Object(E.a)(i).pop();if(!c)return t(Sn("Couldn't enlarge selection because no items were previously selected"));var o=r.indexOf(c),l=r.indexOf(e),u=function(e,t,n){return t<=e&&e<=n},s=l>o?r.filter(function(e,t){return u(t,o,l)}):r.filter(function(e,t){return u(t,l,o)});t(sn([].concat(Object(E.a)(i),Object(E.a)(s))))}},Yt=function(){return function(e,t){e(Cn(0)),e(jn(a.UPLOAD_FILE)),e(On())}},$t=function(){return function(e,t){e(Cn(0)),e(jn(a.ADD_NEW_VERSION)),e(On())}},qt=function(){return function(e,t){e(Cn(0)),e(jn(a.UPLOAD_METADATA)),e(On())}},Kt=function(e){return function(t,n){t(en(e)),t(mn()),t(Pt())}},Jt=function(e){return function(t,n){var a=e.path;t(Kt(e instanceof P?a:[].concat(Object(E.a)(a),[e.name])))}},Zt=function(e){return function(t){return{type:e,value:t}}},Qt=Zt("MOVE_FOLDER_UPWARDS"),en=Zt("SET_PATH"),tn=function(){return en([])},nn=Zt("SET_LOGGED_IN"),an=Zt("SET_LOGGED_OUT"),rn=Zt("SET_HOST"),cn=(Zt("RESET_HOST"),Zt("SET_WEB_ID")),on=Zt("RESET_WEB_ID"),ln=Zt("SET_ITEMS"),un=function(){return ln([])},sn=(Zt("SET_ACLITEMS"),Zt("SELECT_ITEMS")),hn=function(e){return sn([e])},dn=function(){return sn([])},fn=Zt("TOGGLE_SELECTED_ITEM"),pn=(Zt("DESELECT_ITEM"),Zt("FILTER_ITEMS")),mn=Zt("REMOVE_FILTER"),vn=Zt("DISPLAY_LOADING"),bn=Zt("STOP_LOADING"),En=Zt("RESET_LOADED_BLOB"),yn=Zt("SET_LOADED_BLOB"),gn=Zt("SET_UPLOAD_FILE_LIST"),On=function(){return gn(null)},Cn=Zt("SET_UPLOAD_FILE_PROGRESS"),kn=Zt("OPEN_DIALOG"),jn=Zt("CLOSE_DIALOG"),wn=Zt("OPEN_CONTEXT_MENU"),xn=Zt("CLOSE_CONTEXT_MENU"),Sn=Zt("SET_ERROR_MESSAGE"),_n=(n(355),n(78)),Ln=n.n(_n),Tn=n(117),An=n.n(Tn),Dn=n(85),In=n.n(Dn),Nn=n(118),Rn=n.n(Nn),Un=n(186),Pn=n.n(Un),Mn=n(87),Fn=n.n(Mn),Wn=n(141),Bn=n.n(Wn),Vn=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSelected,n=e.item,a=e.handleClick,r=e.handleDoubleClick,c=e.handleContextMenu,o={backgroundColor:t?Bn.a.A200:void 0},l=n instanceof P?n.getDisplaySize():null;return i.a.createElement("div",{className:"File",onClick:a,onDoubleClick:r,onContextMenu:c,"data-selected":t},i.a.createElement(Ln.a,null,i.a.createElement(An.a,null,i.a.createElement(Rn.a,{style:o},n instanceof P?i.a.createElement(Fn.a,null):i.a.createElement(Pn.a,null))),i.a.createElement(In.a,{className:"filename",primary:n.getDisplayName(),secondary:l})))}}]),t}(r.Component),Gn=Object(u.b)(function(e,t){return{isSelected:e.items.selected.includes(t.item)}},function(e,t){return{handleDoubleClick:function(){var n=t.item;n instanceof P?n.isEditable()?e(Bt(n.name)):n.isImage()?e(Vt(n.name)):n.isMedia()&&e(Gt()):e(Jt(n))},handleContextMenu:function(n){n.preventDefault(),n.stopPropagation();var a,r=0,i=0;n.nativeEvent instanceof MouseEvent?(r=n.nativeEvent.clientX,i=n.nativeEvent.clientY):n.nativeEvent instanceof TouchEvent?(r=n.nativeEvent.touches[0].pageX,i=n.nativeEvent.touches[0].pageY):console.warn("Unknown click event",n),n.shiftKey?e(Xt(t.item)):e((a=t.item,function(e,t){!t().items.selected.includes(a)&&e(hn(a))})),e(wn({x:r,y:i}))},handleClick:function(n){n.stopPropagation(),n.ctrlKey?e(fn(t.item)):n.shiftKey?e(Xt(t.item)):e(sn([t.item]))}}})(Vn);n(776);function Hn(){return i.a.createElement("div",{className:"FileListEmptyMessage"},"No files in this folder")}var zn=n(39),Xn=n(176),Yn=n.n(Xn),$n=n(175),qn=n.n($n);var Kn=Object(zn.withStyles)(function(e){return Object(zn.createStyles)({progress:{margin:10*e.spacing.unit}})})(function(e){return i.a.createElement(qn.a,{container:!0,justify:"center"},i.a.createElement(Yn.a,{className:e.classes.progress,color:"secondary"}))}),Jn=(n(784),function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.isLoading,a=t.map(function(e,t){return i.a.createElement(Gn,{item:e,key:t})});return i.a.createElement("div",{className:"FileList"},n?i.a.createElement(Kn,null):a.length?a:i.a.createElement(Hn,null))}}]),t}(r.Component)),Zn=function(e,t){return e.toLocaleLowerCase().match(t.toLocaleLowerCase())},Qn=Object(u.b)(function(e){return{items:e.items.inCurFolder.filter(function(t){return Zn(t.getDisplayName(),e.items.filter)}),isLoading:e.loading}},function(){return{}})(Jn),ea=n(177),ta=n.n(ea),na=n(178),aa=n.n(na),ra=n(14),ia=n.n(ra),ca=n(98),oa=n.n(ca),la=n(79),ua=n.n(la),sa=n(77),ha=n(396),da=n.n(ha),fa=n(397),pa=n.n(fa),ma=n(119),va=n.n(ma),ba=n(395),Ea=n.n(ba),ya=n(24),ga=n.n(ya),Oa=n(22),Ca=n.n(Oa),ka=n(394),ja=n.n(ka);var wa=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.CREATE_FOLDER))}}})(function(e){var t,n=e.handleClick,a=e.handleClose;return i.a.createElement(ga.a,{onClick:(t=n,function(){t(),a()})},i.a.createElement(Ca.a,null,i.a.createElement(ja.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Add new folder"))});var xa=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.CREATE_FILE))}}})(function(e){var t,n=e.handleClick,a=e.handleClose;return i.a.createElement(ga.a,{onClick:(t=n,function(){t(),a()})},i.a.createElement(Ca.a,null,i.a.createElement(Fn.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Create file"))}),Sa=n(120),_a=n.n(Sa);var La=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.UPLOAD_FILE))}}})(function(e){var t,n=e.handleClick,a=e.handleClose;return i.a.createElement(ga.a,{onClick:(t=n,function(){t(),a()})},i.a.createElement(Ca.a,null,i.a.createElement(_a.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Upload Research Data"))}),Ta={color:"white"},Aa=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.handleClick=function(e){n.setState({anchorEl:e.currentTarget})},n.handleClose=function(){n.setState({anchorEl:null})},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.state.anchorEl;return i.a.createElement("div",{style:{marginLeft:"1em"}},i.a.createElement(ua.a,{color:"inherit",style:Ta,"aria-label":"More","aria-owns":Boolean(e)?"long-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},i.a.createElement(Ea.a,null)),i.a.createElement(va.a,{anchorEl:e,open:Boolean(e),onClose:this.handleClose},i.a.createElement(wa,{handleClose:this.handleClose}),i.a.createElement(xa,{handleClose:this.handleClose}),i.a.createElement(La,{handleClose:this.handleClose})))}}]),t}(i.a.Component),Da=Object(u.b)(function(){return{}},function(){return{}})(Aa),Ia=n(187),Na=n.n(Ia),Ra=n(19),Ua=n.n(Ra),Pa=(n(808),function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.handleClickPath,a=e.path,r=e.rootTitle,c=e.handleGoBack,o=e.canGoBack,l=i.a.createElement("span",null,">"),u=i.a.createElement("span",{onClick:function(){return n(-1)},"data-index":0},r," ",a.length?l:""),s=Object(E.a)(a).pop()||r,h=a.map(function(e,t){return i.a.createElement("span",{key:t,"data-index":t,onClick:function(e){return n(t)}},i.a.createElement("span",null,e)," ",a.length-1!==t?l:"","\xa0")});return i.a.createElement("div",{className:"BreadcrumbText"},i.a.createElement("div",{className:t.lastPath},i.a.createElement(Ua.a,{onClick:c,color:"inherit",type:"button",style:{display:o?"inline-flex":"none"}},i.a.createElement(Na.a,null)),s),i.a.createElement("div",{className:t.paths},u," ",h))}}]),t}(r.Component)),Ma=Object(zn.withStyles)(function(e){return Object(zn.createStyles)({lastPath:Object(m.a)({display:"block"},e.breakpoints.up("sm"),{display:"none"}),paths:Object(m.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})})})(Object(u.b)(function(){return{}},function(){return{}})(Pa));var Fa=Object(zn.withStyles)(function(e){return Object(zn.createStyles)({root:{width:"100%",marginBottom:"4.3em"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(m.a)({display:"block"},e.breakpoints.up("sm"),{display:"block"}),search:Object(m.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(sa.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(sa.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%",display:"none"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto",display:"block"}),searchIcon:{width:9*e.spacing.unit,color:"#efefef",height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"#efefef",width:"100%"},refreshIcon:{color:"#efefef"},inputInput:Object(m.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:100,"&:focus":{width:200}})})})(Object(u.b)(function(e){return{filter:e.items.filter,path:e.path,canGoBack:e.path.length>0}},function(e){return{handleChange:function(t){e(pn(t.currentTarget.value))},moveUpwards:function(t){console.log("moveUpwards",t),e(function(e){return function(t,n){t(Qt(e)),t(Mt())}}(t))},handleRefresh:function(){return e(Mt())}}})(function(e){var t=e.classes,n=e.path,a=e.filter,r=e.moveUpwards,c=e.canGoBack,o=e.handleChange,l=e.handleRefresh;return i.a.createElement("div",{className:t.root},i.a.createElement(ta.a,{position:"fixed"},i.a.createElement(aa.a,null,i.a.createElement(ia.a,{className:t.title,variant:"h6",color:"inherit",noWrap:!0},i.a.createElement(Ma,{path:n,handleClickPath:function(e){return r(n.length-e-1)},handleGoBack:function(){return r(1)},canGoBack:c,rootTitle:"SoLiDaM"})),i.a.createElement("div",{className:t.grow}),i.a.createElement("div",{className:t.search},i.a.createElement("div",{className:t.searchIcon},i.a.createElement(da.a,null)),i.a.createElement(oa.a,{placeholder:"Search\u2026",value:a,onChange:o,classes:{root:t.inputRoot,input:t.inputInput}})),i.a.createElement(ua.a,{color:"inherit",className:t.refreshIcon,"aria-label":"Refresh",onClick:l},i.a.createElement(pa.a,null)),i.a.createElement(Da,null))))})),Wa=(n(814),n(188)),Ba=n.n(Wa);var Va=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n=t[0];n instanceof M?e(Jt(n)):n instanceof P&&(n.isEditable()?e(Bt(n.name)):n.isImage()?e(Vt(n.name)):n.isMedia()&&e(Gt()))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(Ba.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Open"))}),Ga=n(189),Ha=n.n(Ga);var za=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){e(Ht(t))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(Ha.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Remove"))}),Xa=n(190),Ya=n.n(Xa);var $a=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.MOVE))}}})(function(e){var t=e.handleClick;return i.a.createElement(ga.a,{onClick:function(){return t()}},i.a.createElement(Ca.a,null,i.a.createElement(Ya.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Move"))}),qa=n(398),Ka=n.n(qa);var Ja=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.COPY))}}})(function(e){var t=e.handleClick;return i.a.createElement(ga.a,{onClick:t},i.a.createElement(Ca.a,null,i.a.createElement(Ka.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Copy"))});var Za=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){e(Bt(t[0].name))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(Ba.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Edit"))}),Qa=n(399),er=n.n(Qa);var tr=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.RENAME))}}})(function(e){var t=e.handleClick;return i.a.createElement(ga.a,{onClick:t},i.a.createElement(Ca.a,null,i.a.createElement(er.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Rename"))}),nr=n(400),ar=n.n(nr);var rr=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t,function(e,t){var a=t().path;e(vn());var r=1===n.length&&n[0]instanceof M?"".concat(n[0].name,".zip"):"Archive.zip";Et(a.join("/"),n).then(function(e){return e.generateAsync({type:"blob"})}).then(function(e){return pt(a.join("/"),r,e)}).then(function(){return e(Pt())}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(ar.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Zip here"))}),ir=n(401),cr=n.n(ir);var or=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t[0].name,function(e,t){var a=t().path;e(vn()),gt(a.join("/"),a.join("/"),n).then(function(t){return e(Pt())}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(cr.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Extract here"))}),lr=n(402),ur=n.n(lr);var sr=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t,function(){var e=Object(N.a)(I.a.mark(function e(t,a){var r,i,c,o,l;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a(),i=r.path,t(vn()),e.prev=2,o=n[0].name,!(1===n.length&&n[0]instanceof P)){e.next=10;break}return e.next=7,lt(i.join("/"),n[0].name);case 7:c=e.sent,e.next=18;break;case 10:return e.next=12,Et(i.join("/"),n);case 12:return l=e.sent,e.next=15,l.generateAsync({type:"blob"});case 15:c=e.sent,n.length>1&&(o="Archive"),o="".concat(o,".zip");case 18:Ft(c,o),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),t(Sn(String(e.t0)));case 24:t(bn());case 25:case"end":return e.stop()}},e,null,[[2,21]])}));return function(t,n){return e.apply(this,arguments)}}()))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(ur.a,null)),i.a.createElement(ia.a,{variant:"inherit"},1===n.length&&n[0]instanceof P?"Download":"Download Zip"))}),hr=n(403),dr=n.n(hr);var fr=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t[0],function(e,t){window.open(n.url,"_blank")}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(dr.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Open in new Tab"))});var pr=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){e(kn(a.UPLOAD_METADATA))}}})(function(e){var t=e.handleClick;return i.a.createElement(ga.a,{onClick:t},i.a.createElement(Ca.a,null,i.a.createElement(_a.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Upload Metadata"))}),mr=n(404),vr=n.n(mr);var br=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t[0].name,function(e,t){e(Wt(n+".acl")),e(kn(a.ACCESS_CONTROL))}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(vr.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Access Control"))});var Er=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t[0].name,function(e,t){e(Wt(n+".ttl")),e(kn(a.ADD_NEW_VERSION))}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(_a.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Add new Version"))});var yr=Object(u.b)(function(e){return{selectedItems:e.items.selected}},function(e){return{handleClick:function(t){var n;e((n=t[0].name,function(e,t){e(Wt(n)),e(kn(a.EXPOSE_METADATA))}))}}})(function(e){var t=e.handleClick,n=e.selectedItems;return i.a.createElement(ga.a,{onClick:function(){return t(n)}},i.a.createElement(Ca.a,null,i.a.createElement(Ya.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Expose Metadata"))}),gr=n(405),Or=n.n(gr);var Cr=Object(u.b)(function(e){return{}},function(e){return{handleClick:function(){alert("Revert file!")}}})(function(e){var t=e.handleClick;return i.a.createElement(ga.a,{onClick:function(){return t()}},i.a.createElement(Ca.a,null,i.a.createElement(Or.a,null)),i.a.createElement(ia.a,{variant:"inherit"},"Revert Version"))}),kr=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.acts,n=e.open,a=e.x,r=e.y;return i.a.createElement("div",null,i.a.createElement(va.a,{anchorReference:"anchorPosition",anchorPosition:{top:r,left:a},transformOrigin:{vertical:"top",horizontal:"left"},open:n,onClose:function(){},PaperProps:{style:{width:190}}},t.includes("open")&&i.a.createElement(Va,null),t.includes("openInNewTab")&&i.a.createElement(fr,null),t.includes("uploadMetadata")&&i.a.createElement(pr,null),t.includes("accessControl")&&i.a.createElement(br,null),t.includes("addNewVersion")&&i.a.createElement(Er,null),t.includes("exposeMetadata")&&i.a.createElement(yr,null),t.includes("revertVersion")&&i.a.createElement(Cr,null),t.includes("download")&&i.a.createElement(sr,null),t.includes("compress")&&i.a.createElement(rr,null),t.includes("extract")&&i.a.createElement(or,null),t.includes("edit")&&i.a.createElement(Za,null),t.includes("copy")&&i.a.createElement(Ja,null),t.includes("move")&&i.a.createElement($a,null),t.includes("rename")&&i.a.createElement(tr,null),t.includes("remove")&&i.a.createElement(za,null)))}}]),t}(r.Component),jr=function(e){return 1===e.length?wr(e[0]):["copy","move","remove","download","compress"]},wr=function(e){return[].concat(["openInNewTab","copy","move","rename","remove","download"],Object(E.a)(e instanceof P?xr(e):Sr(e)))},xr=function(e){var t=["accessControl"];return e.isNotUpdateable()&&t.push("addNewVersion"),e.isEditable()&&t.push("edit"),e.isExtractable()&&t.push("extract"),(e.isImage()||e.isMedia())&&t.push("open"),!e.isMetadata()&&t.push("uploadMetadata"),e.isMetadata()&&t.push("exposeMetadata"),e.isVersionFile()&&t.push("revertVersion"),t},Sr=function(e){return["open","compress"]},_r=Object(u.b)(function(e){return{x:e.contextMenu.x,y:e.contextMenu.y,open:e.contextMenu.open,acts:jr(e.items.selected)}},function(){return{}})(kr),Lr=n(34),Tr=n.n(Lr),Ar=n(33),Dr=n.n(Ar),Ir=n(38),Nr=n.n(Ir),Rr=n(40),Ur=n.n(Rr),Pr=n(70),Mr=n.n(Pr),Fr=n(409),Wr=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(L.a)(this,Object(T.a)(t).call(this,e))).history=void 0,n.states=void 0,n.stateIndex=void 0,n.states=[],n.stateIndex=-1,n.history=Object(Fr.a)(),n.history.listen(function(e,t){switch(t){case"POP":n.handlePop(e);break;case"REPLACE":n.handleReplace(e);break;case"PUSH":n.handlePush(e)}}),n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.host,n=e.path;if(null!==t){if(0===this.states.length||this.stateIndex<0)return this.updateBrowserHistory();var a=this.states[this.stateIndex];Vr({host:t,path:n},a)||this.updateBrowserHistory()}}},{key:"updateBrowserHistory",value:function(){var e=this.props,t=e.host,n=e.path,a=encodeURI("".concat(t,"/").concat(n.join("/"))),r={host:t||"",path:n,index:this.stateIndex+1};this.history.push("?url=".concat(a),r)}},{key:"handlePop",value:function(e){this.stateIndex=e.state.index,this.props.handlePop(e)}},{key:"handleReplace",value:function(e){this.states[this.stateIndex]=e.state}},{key:"handlePush",value:function(e){this.states=[].concat(Object(E.a)(this.states.slice(0,++this.stateIndex)),[e.state])}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null)}}]),t}(r.Component),Br=function(e){var t=new URL(e);return{host:t.origin,path:t.pathname.split("/").filter(function(e){return""!==e})}},Vr=function(e,t){return e.host===t.host&&e.path.length===t.path.length&&e.path.every(function(e,n){return e===t.path[n]})},Gr=Object(u.b)(function(e){return{host:e.account.host,path:e.path}},function(e){return{handlePop:function(t){var n="",a=[];if(t&&"undefined"!==typeof t.state){var r=t.state;n=r.host,a=r.path}else{var i=new URLSearchParams(t.search.substr(1)).get("url");if(null!==i){var c=Br(i);n=c.host,a=c.path}}e(rn(n)),e(Kt(a))}}})(Wr),Hr=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={location:""},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.isLoggedIn,n=e.webId,a=new URLSearchParams(document.location.search.substr(1)).get("url");if(null!==a){var r=decodeURI(a);this.setState({location:r})}else if(t&&n){var i=new URL(n).origin;this.setState({location:i})}}},{key:"handleChange",value:function(e){var t=e.currentTarget.form;if(t){var n=t.querySelector("input");if(n){var a=n.value;return void this.setState({location:a})}}console.log("Couldn't find location input")}},{key:"handleSubmit",value:function(e){this.props.handleSubmit(e,{location:this.state.location})}},{key:"render",value:function(){var e=this.state.location;e=e||"";var t=this.props,n=t.handleClose,a=t.handleLogin,r=t.handleLogout,c=t.open,o=t.isLoggedIn,l=t.webId;return i.a.createElement(Tr.a,{open:c,onClose:n,"aria-labelledby":"form-dialog-choose-location",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-choose-location"},"Choose the storage location"),i.a.createElement(Nr.a,null,i.a.createElement(ia.a,{variant:"body1",gutterBottom:!0},o?"Logged in as "+l+".":"If you want to access private resources, please login with the button below."),o?i.a.createElement(Ua.a,{variant:"outlined",onClick:r},"Logout"):i.a.createElement(Ua.a,{variant:"outlined",color:"primary",onClick:a},"Login"),i.a.createElement(ia.a,{variant:"body1"},"Please enter the directory you want to open below."),i.a.createElement(Mr.a,{autoFocus:!0,fullWidth:!0,margin:"normal",label:"Storage Location",variant:"outlined",onChange:this.handleChange.bind(this),value:e})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:n,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",type:"submit",onClick:this.handleSubmit.bind(this)},"Open directory"))))}}]),t}(r.Component),zr=Object(u.b)(function(e){return{open:e.visibleDialogs.CHOOSE_LOCATION,webId:e.account.webId,isLoggedIn:e.account.loggedIn}},function(e){return{handleClose:function(){e(jn(a.CHOOSE_LOCATION))},handleLogin:function(t){t.preventDefault(),e(xt())},handleLogout:function(t){t.preventDefault(),e(function(e,t){e(vn()),le.logout().then(function(){e(tn()),e(un()),e(dn()),e(an()),e(on()),e(kn(a.CHOOSE_LOCATION))}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})})},handleSubmit:function(t,n){var r=n.location;if(t.preventDefault(),!r)return e(Sn("Please enter the folder which should be opened"));var i=Br(r),c=i.host,o=i.path;e(jn(a.CHOOSE_LOCATION)),e(rn(c)),e(Lt()),e(Kt(o))}}})(Hr),Xr=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={lastBlobUrl:null,content:"...",loading:!1},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(){this.props.blobUrl!==this.state.lastBlobUrl&&(this.setState({lastBlobUrl:this.props.blobUrl}),this.setState({loading:!0}))}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.open;return i.a.createElement("div",{style:{marginLeft:"1em"}},i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-content",fullWidth:!0,maxWidth:"sm"},i.a.createElement(Ur.a,{id:"form-dialog-content"},"Viewing file "),i.a.createElement(Nr.a,null,i.a.createElement("img",{src:this.props.blobUrl,alt:"",style:{maxWidth:"100%"}})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Close"))))}}]),t}(r.Component),Yr=Object(u.b)(function(e){return{open:e.visibleDialogs.CONTENT,blobUrl:e.blob||void 0}},function(e){return{handleClose:function(){e(jn(a.CONTENT))}}})(Xr),$r=n(406),qr=n.n($r),Kr=(n(833),function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.file,n=e.handleClose,a=e.open,r=(t&&t.name,t?t.url:void 0),c=(t&&t.isVideo(),t?t.isVideo()?"video":"audio":void 0);return i.a.createElement(Tr.a,{open:a,onClose:n,"aria-labelledby":"form-dialog-display-media",fullWidth:!0,maxWidth:"lg"},i.a.createElement(Ur.a,{id:"form-dialog-display-media"},"Display Media"),i.a.createElement(Nr.a,null,t?i.a.createElement("div",null,i.a.createElement("p",null,"Playing ",t.name),i.a.createElement(qr.a,{type:c,url:r,iconUrl:"./vendor/plyr/plyr.svg"})):i.a.createElement("p",null,"No media file opened")),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:n,color:"primary",type:"button"},"Close")))}}]),t}(r.Component)),Jr=Object(u.b)(function(e){var t=e.visibleDialogs.MEDIA,n=e.items.selected[0];return n instanceof P?{open:t,file:n}:{open:t}},function(e){return{handleClose:function(){e(jn(a.MEDIA))}}})(Kr),Zr=n(179),Qr=n.n(Zr),ei=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).textField=Object(r.createRef)(),n.state={lastBlobUrl:null,content:null,loading:!1},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.blobUrl!==this.state.lastBlobUrl&&(this.setState({lastBlobUrl:this.props.blobUrl}),this.setState({loading:!0}),this.props.blobUrl&&fetch(this.props.blobUrl).then(function(e){return e.text()}).then(function(t){e.setState({content:t}),e.setState({loading:!1})}))}},{key:"handleSave",value:function(e){e.preventDefault();var t=this.textField.current,n=this.props.item;if(t&&n){var a=t.value;this.props.handleSubmit(e,{itemName:n.name,content:a})}}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.open,a=e.item,r=a?a.getDisplayName():"No item selected",c=i.a.createElement("textarea",{style:{width:"100%",minHeight:"300px"},defaultValue:this.state.content||"",ref:this.textField});return i.a.createElement("div",null,i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-edit",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-edit"},"Editing file: ",r," "),i.a.createElement(Nr.a,null,i.a.createElement(Qr.a,null,this.state.loading?"Loading...":c)),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Close"),i.a.createElement(Ua.a,{color:"primary",onClick:this.handleSave.bind(this),type:"submit"},"Update")))))}}]),t}(r.Component),ti=Object(u.b)(function(e){return{open:e.visibleDialogs.EDIT,item:e.items.selected[0],blobUrl:e.blob||""}},function(e){return{handleClose:function(){e(jn(a.EDIT))},handleSubmit:function(t,n){var r=n.itemName,i=n.content;e(function(e,t){return function(n,r){var i=r().path;n(vn()),pt(i.join("/"),e,t).then(function(e){n(jn(a.EDIT)),n(Pt())}).catch(function(e){return n(Sn(String(e)))}).finally(function(){return n(bn())})}}(r,i))}}})(ei),ni=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).textField=Object(r.createRef)(),n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this.textField.current;if(t){var n=t.value;this.props.handleSubmit(e,{folderName:n})}}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=(e.handleSubmit,e.open);return i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-create-folder",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-create-folder"},"Add new folder"),i.a.createElement(Nr.a,null,i.a.createElement(Mr.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"Container name",type:"text",inputRef:this.textField})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",type:"submit",onClick:this.handleSubmit.bind(this)},"Save"))))}}]),t}(r.Component),ai=Object(u.b)(function(e){return{open:e.visibleDialogs.CREATE_FOLDER}},function(e){return{handleClose:function(){e(jn(a.CREATE_FOLDER))},handleSubmit:function(t,n){var r=n.folderName;t.preventDefault(),e(function(e){return function(t,n){var r=n().path;t(vn()),ht(r.join("/"),e).then(function(e){t(Pt()),t(jn(a.CREATE_FOLDER))}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}}(r))}}})(ni),ri=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).textField=Object(r.createRef)(),n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this.textField.current;if(t){var n=t.value;this.props.handleSubmit(e,{fileName:n})}}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.open;return i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-create-file",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-create-file"},"Create file"),i.a.createElement(Nr.a,null,i.a.createElement(Mr.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"File name",type:"text",inputRef:this.textField})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",type:"submit",onClick:this.handleSubmit.bind(this)},"Create"))))}}]),t}(r.Component),ii=Object(u.b)(function(e){return{open:e.visibleDialogs.CREATE_FILE}},function(e){return{handleClose:function(){e(jn(a.CREATE_FILE))},handleSubmit:function(t,n){var r=n.fileName;t.preventDefault(),e(function(e){return function(t,n){var r=n().path;t(vn()),pt(r.join("/"),e,new Blob).then(function(n){return t(jn(a.CREATE_FILE)),t(Pt()),t(Bt(e)),ct(r.join("/"))}).then(function(t){return t.find(function(t){return t.getDisplayName()===e})}).then(function(e){if(!e)throw new Error("Couldn't load created file for editing");t(hn(e)),t(Wt(e.name))}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}}(r))}}})(ri),ci=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).textField=Object(r.createRef)(),n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this.textField.current,n=this.props.item;if(t&&n){var a=t.value;this.props.handleSubmit(e,{item:n,newName:a})}}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.open,a=e.item,r=a?a.name:"";return i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-create-folder",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-create-folder"},"Rename"),i.a.createElement(Nr.a,null,i.a.createElement(Mr.a,{autoFocus:!0,fullWidth:!0,margin:"dense",label:"Item name",type:"text",inputRef:this.textField,defaultValue:r})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",type:"submit",onClick:this.handleSubmit.bind(this)},"Save"))))}}]),t}(r.Component),oi=Object(u.b)(function(e){return{open:e.visibleDialogs.RENAME,item:e.items.selected[0]}},function(e){return{handleClose:function(){e(jn(a.RENAME))},handleSubmit:function(t,n){var r,i,c,o,l=n.item,u=n.newName;t.preventDefault(),e(l instanceof M?(c=l.name,o=u,function(e,t){var n=t().path;e(vn()),st(n.join("/"),c,o).then(function(){e(Pt()),e(jn(a.RENAME))}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}):(r=l.name,i=u,function(e,t){var n=t().path;e(vn()),ut(n.join("/"),r,i).then(function(){e(Pt()),e(jn(a.RENAME))}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}))}}})(ci);var li=function(e){var t=e.item,n=e.isSelected,a=e.handleClick,r=e.handleDoubleClick,c={backgroundColor:n?Bn.a.A200:void 0};return i.a.createElement("div",{className:"File",onClick:a,"data-selected":n,onDoubleClick:r},i.a.createElement(Ln.a,null,i.a.createElement(An.a,null,i.a.createElement(Rn.a,{style:c},t instanceof P?i.a.createElement(Fn.a,null):i.a.createElement(Pn.a,null))),i.a.createElement(In.a,{primary:t.name,secondary:""})))};n(835);var ui=function(e){var t=e.items,n=e.isLoading,a=e.handleOpenFolder,r=t.map(function(e,t){return i.a.createElement(li,{item:e,isSelected:!1,handleClick:function(){return a(e)},handleDoubleClick:function(){return a(e)},key:t})});return i.a.createElement("div",{className:"FileListSublist"},n?i.a.createElement(Kn,null):r.length?r:i.a.createElement(Hn,null))},si=function(e){function t(e){var n;Object(S.a)(this,t),(n=Object(L.a)(this,Object(T.a)(t).call(this,e))).host=void 0,n.path=void 0;var a=e.initialPath,r=e.initialHost;return n.host=r,n.path=a,n.state={items:[],isLoading:!0},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(e){e.initialHost===this.props.initialHost&&e.initialPath.join("")===this.props.initialPath.join("")||(this.host=this.props.initialHost,this.path=this.props.initialPath,this.updateItems())}},{key:"handleGoBack",value:function(){this.path=this.path.slice(0,-1),this.updateItems()}},{key:"handleOpenFolder",value:function(e){this.path=[].concat(Object(E.a)(e.path),[e.name]),this.updateItems()}},{key:"updateItems",value:function(){var e=Object(N.a)(I.a.mark(function e(){var t;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,ct(this.path.join("/"));case 3:e.t0=function(e){return e instanceof M},t=e.sent.filter(e.t0),this.setState({isLoading:!1,items:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.open,n=e.handleClose,a=e.handleSubmit,r=e.actionName,c=this.state,o=c.items,l=c.isLoading,u=this.host,s=this.path,h="".concat(u,"/").concat(s.join("/")),d=s.length>0;return i.a.createElement(Tr.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-move",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-move"},r," items to ",i.a.createElement("small",{style:{color:"grey"}},h)),i.a.createElement(Nr.a,null,i.a.createElement(ui,{items:o,isLoading:l,handleOpenFolder:this.handleOpenFolder.bind(this)})),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:this.handleGoBack.bind(this),color:"primary",type:"button",disabled:!d},i.a.createElement(Na.a,null)," Go back directory"),i.a.createElement(Ua.a,{onClick:n,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:function(e){return a({host:u,path:s})},type:"submit"},r))))}}]),t}(r.Component);var hi=Object(u.b)(function(e){return{open:e.visibleDialogs.MOVE,initialHost:e.account.host||"",initialPath:e.path,selectedItems:e.items.selected}},function(e){return{handleClose:function(){e(jn(a.MOVE))},move:function(t,n){e(function(e,t){t.host;var n=t.path;return function(t,r){var i=r().path;t(vn());var c=n.join("/"),o=e.map(function(e){return e.name});dt(i.join("/"),c,o).then(function(e){t(Pt()),t(jn(a.MOVE))}).catch(function(e){return t(Sn(String(e)))}).finally(function(){return t(bn())})}}(t,n))}}})(function(e){var t=e.initialHost,n=e.initialPath,a=e.selectedItems,r=e.open,c=e.handleClose,o=e.move;return i.a.createElement(si,{open:r,actionName:"Move",initialHost:t,initialPath:n,handleClose:c,handleSubmit:function(e){return o(a,e)}})});var di=Object(u.b)(function(e){return{open:e.visibleDialogs.COPY,initialHost:e.account.host||"",initialPath:e.path,selectedItems:e.items.selected}},function(e){return{handleClose:function(){e(jn(a.COPY))},copy:function(t,n){e(zt(t,n))}}})(function(e){var t=e.initialHost,n=e.initialPath,a=e.selectedItems,r=e.open,c=e.handleClose,o=e.copy;return i.a.createElement(si,{open:r,actionName:"Copy",initialHost:t,initialPath:n,handleClose:c,handleSubmit:function(e){return o(a,e)}})}),fi=n(86),pi=n.n(fi),mi=n(140),vi=n.n(mi);var bi=function(e){var t=e.files;t[0];var n=Array.from(t).map(function(e,t){return i.a.createElement(Ln.a,{dense:!0,key:t},i.a.createElement(Ca.a,null,i.a.createElement(Fn.a,null)),i.a.createElement(In.a,{primary:"".concat(e.name," (").concat(W(e.size),")")}))});return i.a.createElement("div",null,i.a.createElement(vi.a,{component:"nav"},n))},Ei=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).inputRef=Object(r.createRef)(),n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleReset",value:function(e){var t=this.inputRef.current;t&&(t.value="",this.props.handleReset(e))}},{key:"render",value:function(){var e=this.props,t=e.fileList,n=e.handleSelectedFiles,a={inputfile:{},inputreset:{display:t&&t.length?"inline-flex":"none"}};return i.a.createElement("div",null,i.a.createElement("label",{htmlFor:"button-file"},i.a.createElement("input",{style:a.inputfile,id:"button-file",ref:this.inputRef,multiple:!0,type:"file",onChange:n})),i.a.createElement(Ua.a,{style:a.inputreset,component:"span",type:"reset",onClick:this.handleReset.bind(this)},"Clear"),t&&i.a.createElement(bi,{files:t}))}}]),t}(r.Component),yi=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.handleReset,a=e.handleSubmit,r=e.open,c=e.canUpload,o=e.progress,l=e.fileList,u=e.handleSelectedFiles;return i.a.createElement(Tr.a,{open:r,onClose:t,"aria-labelledby":"form-dialog-upload",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-upload"},"Upload Research Data"),i.a.createElement(Nr.a,null,i.a.createElement(Ei,{fileList:l,handleSelectedFiles:u,handleReset:n}),c?i.a.createElement(pi.a,{variant:"determinate",value:o}):null),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:a,disabled:!c,type:"submit"},"Upload"))))}}]),t}(r.Component),gi=Object(u.b)(function(e){return{open:e.visibleDialogs.UPLOAD_FILE,canUpload:!!e.upload.fileList&&e.upload.fileList.length>0,fileList:e.upload.fileList,progress:e.upload.progress}},function(e){return{handleClose:function(t){e(Yt())},handleSubmit:function(t){t.preventDefault(),e(function(e,t){var n=t(),a=n.path,r=n.upload.fileList;if(null===r)return e(Sn("Couldn't find files to upload"));e(vn()),e(dn()),e(Cn(50)),ft(a.join("/"),r).then(function(t){e(Cn(100)),setTimeout(function(t){e(Yt())},300),e(Pt())}).catch(function(t){return e(Sn(String(t)))}).finally(function(){e(Nt(r[0].name,"b")),e(bn())})})},handleSelectedFiles:function(t){var n=t.target.files;e(gn(n))},handleReset:function(){e(On())}}})(yi),Oi=n(8),Ci=n(410),ki=n(142),ji=n(180),wi=n.n(ji),xi=n(71),Si=n.n(xi),_i=n(66),Li=n.n(_i);Object(zn.withStyles)({root:{color:ki.green[400],"&$checked":{color:ki.green[600]}},checked:{}})(function(e){return i.a.createElement(Li.a,Object.assign({color:"default"},e))});function Ti(){var e=i.a.useState({checkedA:!1,checkedB:!1,checkedC:!1,checkedD:!1,checkedE:!1,checkedF:!1,checkedG:!1}),t=Object(Ci.a)(e,2),n=t[0],a=t[1],r=function(e){return function(t){a(Object(h.a)({},n,Object(m.a)({},e,t.target.checked)))}};return i.a.createElement(wi.a,{row:!0},i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedA,onChange:r("checkedA"),value:"checkedA",color:"primary"}),label:"Mathematics"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedB,onChange:r("checkedB"),value:"checkedB",color:"primary"}),label:"Computer Science"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedC,onChange:r("checkedC"),value:"checkedC",color:"primary"}),label:"Web engineering"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedD,onChange:r("checkedD"),value:"checkedD",color:"primary"}),label:"Physics"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedE,onChange:r("checkedE"),value:"checkedE",color:"primary"}),label:"Chemistry"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedG,onChange:r("checkedG"),value:"checkedG",color:"primary"}),label:"Biology"}),i.a.createElement(Si.a,{control:i.a.createElement(Li.a,{checked:n.checkedF,onChange:r("checkedF"),value:"checkedF",color:"primary"}),label:"Machine learning"}))}var Ai=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},n.updateInput=function(e){return n.setState({inputVal:e})},n.handleChange=function(e,t){return n.setState({activeIndex:t})},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props.item;t&&this.props.handleSubmit(e,{item:t})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.handleReset,a=e.open,r=e.canUpload,c=e.progress,o=e.fileList,l=e.handleSelectedFiles,u=this.state.activeIndex;return i.a.createElement(Tr.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-upload",fullWidth:!0,maxWidth:"sm"},i.a.createElement("div",null,i.a.createElement(Di,{value:u,onChange:this.handleChange},i.a.createElement(Ii,{label:"Upload metadata file"}),i.a.createElement(Ii,{label:"Input metadata annotation"})),0===u&&i.a.createElement("form",null,i.a.createElement(Nr.a,null,i.a.createElement(Ei,{fileList:o,handleSelectedFiles:l,handleReset:n}),r?i.a.createElement(pi.a,{variant:"determinate",value:c}):null),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:this.handleSubmit.bind(this),disabled:!r,type:"submit"},"Upload"))),1===u&&i.a.createElement("form",null,i.a.createElement(Nr.a,null,i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Title"),i.a.createElement(Oi.f,{id:"my-input","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Author"),i.a.createElement(Oi.f,{id:"my-input","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Description"),i.a.createElement(Oi.f,{id:"my-input","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Version"),i.a.createElement(Oi.f,{id:"my-input","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Keyword"),i.a.createElement(Oi.f,{id:"my-input","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Ti,null))),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:this.handleSubmit.bind(this),disabled:!r,type:"submit"},"Submit")))))}}]),t}(r.Component),Di=Object(zn.withStyles)(function(e){return{flexContainer:{flexDirection:"row"},indicator:{display:"none"}}})(Oi.k),Ii=Object(zn.withStyles)(function(e){return{selected:{color:"tomato",borderBottom:"2px solid tomato"}}})(Oi.j);var Ni=Object(u.b)(function(e){return{item:e.items.selected[0],open:e.visibleDialogs.UPLOAD_METADATA,canUpload:!!e.upload.fileList&&e.upload.fileList.length>0,fileList:e.upload.fileList,progress:e.upload.progress}},function(e){return{handleClose:function(t){e(qt())},handleSubmit:function(t,n){var a=n.item;t.preventDefault(),e(function(e){return function(t,n){var a=n(),r=a.path,i=a.upload.fileList;if(null===i)return t(Sn("Couldn't find files to upload"));t(vn()),t(dn()),t(Cn(50)),ft(r.join("/"),i).then(function(e){t(Cn(100)),setTimeout(function(e){t(qt())},300),t(Pt())}).catch(function(e){return t(Sn(String(e)))}).finally(function(){t(Rt(i[0].name,e.name)),t(Ut(i[0].name)),t(bn())})}}(a))},handleSelectedFiles:function(t){var n=t.target.files;e(gn(n))},handleReset:function(){e(On())}}})(Ai),Ri=n(181),Ui=n.n(Ri),Pi=n(183),Mi=n.n(Pi),Fi=n(53),Wi=n.n(Fi),Bi=n(182),Vi=n.n(Bi),Gi=n(121),Hi=n.n(Gi),zi=n(407),Xi=n.n(zi),Yi=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).textField=Object(r.createRef)(),n.state={lastBlobUrl:null,content:null,loading:!1,isLoading:!1,accessTo:"",agent:"",read:!1,write:!1,append:!1,control:!1,group:!1,aclList:[]},n.handleChange=function(e,t){return function(a){"group"==t&&(n.state.aclList[e]._isGroup=a.target.checked),"read"==t&&(n.state.aclList[e]._read=a.target.checked),"write"==t&&(n.state.aclList[e]._write=a.target.checked),"append"==t&&(n.state.aclList[e]._append=a.target.checked),"control"==t&&(n.state.aclList[e]._control=a.target.checked),n.setState(Object(h.a)({},n.state,Object(m.a)({},name,a.target.checked)))}},n.handleTextChange=function(e){return function(t){n.state.aclList[e]._agent=t.target.value,n.setState(Object(h.a)({},n.state,Object(m.a)({},name,t.target.value)))}},n.handleNewTextChange=function(){return function(e){n.state.agent=e.target.value,n.setState(Object(h.a)({},n.state,Object(m.a)({},name,e.target.value)))}},n.handleDelete=function(e){return function(t){n.state.aclList.splice(e,1),n.setState(Object(h.a)({},n.state,Object(m.a)({},name,t.button.toString)))}},n.handleNewChange=function(e){return function(t){n.setState(Object(h.a)({},n.state,Object(m.a)({},e,t.target.checked)))}},n.handleAdd=function(){return function(e){if(!n.validURL(n.state.agent))return alert("Wrong url format!!!!"),void n.resetState();n.state.aclList.push(new X(n.state.aclList.length,n.state.agent,n.state.accessTo,n.state.read,n.state.write,n.state.append,n.state.control,n.state.group)),n.resetState()}},n.resetState=function(){n.setState({agent:"",read:!1,write:!1,append:!1,control:!1,group:!1})},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.blobUrl!==this.state.lastBlobUrl&&0==this.state.aclList.length&&(this.setState({lastBlobUrl:this.props.blobUrl}),this.setState({loading:!0}),this.props.blobUrl&&fetch(this.props.blobUrl).then(function(e){return e.text()}).then(function(){var t=Object(N.a)(I.a.mark(function t(n){var a,r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.initialHost+"/"+e.props.initialPath.join("/")+"/"+e.props.selectedItems[0].name,r=J(n,a+".acl"),e.setState({accessTo:a,content:n,aclList:r}),e.setState({loading:!1});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},{key:"handleSave",value:function(e){e.preventDefault();var t=this.props.item;this.props.handleSubmit(e,{itemName:t.name,aclList:this.state.aclList})}},{key:"validURL",value:function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},{key:"handleClose",value:function(e){this.state.aclList=[],this.props.handleClose(e)}},{key:"render",value:function(){var e=this,t=this.props.open;return i.a.createElement(Tr.a,{open:t,onClose:this.handleClose.bind(this),"aria-labelledby":"form-dialog-upload",fullWidth:!0,maxWidth:"lg"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-upload"},"Access Control to ",this.state.accessTo),i.a.createElement(Oi.c,null,i.a.createElement(Ui.a,null,i.a.createElement("colgroup",null,i.a.createElement("col",null),i.a.createElement("col",{style:{width:"50%",padding:"4px 10px"}}),i.a.createElement("col",{style:{width:"40%"}}),i.a.createElement("col",null)),i.a.createElement(Vi.a,null,i.a.createElement(Hi.a,null,i.a.createElement(Wi.a,{padding:"checkbox"},"Group"),i.a.createElement(Wi.a,{padding:"none"},"Agent"),i.a.createElement(Wi.a,{padding:"none"},"Mode"),i.a.createElement(Wi.a,{padding:"checkbox"},"Action"))),i.a.createElement(Mi.a,null,this.state.aclList.map(function(t){return i.a.createElement(Hi.a,{key:t._key},i.a.createElement(Wi.a,{padding:"checkbox"},i.a.createElement(Oi.e,{label:"",control:i.a.createElement(Oi.b,{checked:t.isGroup,onChange:e.handleChange(t._key,"group"),value:"group",color:"primary"})})),i.a.createElement(Wi.a,{padding:"none"},i.a.createElement(Oi.f,{fullWidth:!0,value:t.agent,onChange:e.handleTextChange(t._key),placeholder:"Input agent webID"})),i.a.createElement(Wi.a,{padding:"none"},i.a.createElement(Oi.e,{label:"Read",control:i.a.createElement(Oi.b,{checked:t.read,onChange:e.handleChange(t._key,"read"),value:"read",color:"primary"})}),i.a.createElement(Oi.e,{label:"Write",control:i.a.createElement(Oi.b,{checked:t.write,onChange:e.handleChange(t._key,"write"),value:"write",color:"primary"})}),i.a.createElement(Oi.e,{label:"Append",control:i.a.createElement(Oi.b,{checked:t.append,onChange:e.handleChange(t._key,"append"),value:"append",color:"primary"})}),i.a.createElement(Oi.e,{label:"Control",control:i.a.createElement(Oi.b,{checked:t.control,onChange:e.handleChange(t._key,"control"),value:"control",color:"primary"})})),i.a.createElement(Wi.a,{padding:"checkbox"},i.a.createElement(Oi.i,{onClick:e.handleDelete(t._key)},i.a.createElement(Oi.h,null,i.a.createElement(Ha.a,null)))))}),i.a.createElement(Hi.a,{key:this.state.aclList.length},i.a.createElement(Wi.a,{padding:"checkbox"},i.a.createElement(Oi.e,{label:"",control:i.a.createElement(Oi.b,{checked:this.state.group,onChange:this.handleNewChange("group"),value:"group",color:"primary"})})),i.a.createElement(Wi.a,{padding:"none"},i.a.createElement(Oi.f,{fullWidth:!0,value:this.state.agent,onChange:this.handleNewTextChange(),id:"newagent",placeholder:"Input agent webID"})),i.a.createElement(Wi.a,{padding:"none"},i.a.createElement(Oi.e,{label:"Read",control:i.a.createElement(Oi.b,{checked:this.state.read,onChange:this.handleNewChange("read"),value:"read",color:"primary"})}),i.a.createElement(Oi.e,{label:"Write",control:i.a.createElement(Oi.b,{checked:this.state.write,onChange:this.handleNewChange("write"),value:"write",color:"primary"})}),i.a.createElement(Oi.e,{label:"Append",control:i.a.createElement(Oi.b,{checked:this.state.append,onChange:this.handleNewChange("append"),value:"append",color:"primary"})}),i.a.createElement(Oi.e,{label:"Control",control:i.a.createElement(Oi.b,{checked:this.state.control,onChange:this.handleNewChange("control"),value:"control",color:"primary"})})),i.a.createElement(Wi.a,{padding:"checkbox"},i.a.createElement(Oi.i,{onClick:this.handleAdd()},i.a.createElement(Oi.h,null,i.a.createElement(Xi.a,null)))))))),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:this.handleClose.bind(this),color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:this.handleSave.bind(this),type:"submit"},"Save"))))}}]),t}(r.Component),$i=Object(u.b)(function(e){return{open:e.visibleDialogs.ACCESS_CONTROL,item:e.items.selected[0],blobUrl:e.blob||"",initialHost:e.account.host||"",initialPath:e.path,selectedItems:e.items.selected}},function(e){return{handleClose:function(t){e(function(e,t){e(Cn(0)),e(jn(a.ACCESS_CONTROL)),e(On())})},handleSubmit:function(t,n){var r,i,c=n.itemName,o=n.aclList;t.preventDefault(),e((r=c,i=o,function(e,t){var n=t().path;e(vn()),r+=".acl",bt(n.join("/"),r,i).then(function(t){e(jn(a.ACCESS_CONTROL)),e(Pt())}).catch(function(t){return e(Sn(String(t)))}).finally(function(){return e(bn())})}))}}})(Yi),qi=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={lastBlobUrl:null,currentVersion:"1.0",nextVersion:""},n.handleTextChange=function(){return function(e){n.state.nextVersion=e.target.value,n.setState(Object(h.a)({},n.state,Object(m.a)({},name,e.target.value)))}},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"handleSubmit",value:function(e){var t=this.props.item,n=this.state.currentVersion,a=this.state.nextVersion;t&&this.props.handleSubmit(e,{item:t,currentVersion:n,nextVersion:a})}},{key:"componentDidUpdate",value:function(){var e=this;this.props.blobUrl!==this.state.lastBlobUrl&&(this.setState({lastBlobUrl:this.props.blobUrl}),this.setState({loading:!0}),this.props.blobUrl&&fetch(this.props.blobUrl).then(function(e){return e.text()}).then(function(){var t=Object(N.a)(I.a.mark(function t(n){var a,r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.initialHost+"/"+e.props.initialPath.join("/")+"/"+e.props.selectedItems[0].name+".ttl",r=te(n,a),e.setState({currentVersion:r,content:n}),e.setState({loading:!1});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.handleReset,a=e.open,r=e.canUpload,c=e.progress,o=e.fileList,l=e.handleSelectedFiles;return i.a.createElement(Tr.a,{open:a,onClose:t,"aria-labelledby":"form-dialog-upload",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-upload"},"Add New Version"),i.a.createElement(Nr.a,null,i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"oldversion"},"Current Version"),i.a.createElement(Oi.f,{id:"oldversion","aria-describedby":"my-helper-text",value:this.state.currentVersion,disabled:!0})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"newversion"},"New version"),i.a.createElement(Oi.f,{fullWidth:!0,onChange:this.handleTextChange(),id:"newversion",placeholder:"Enter new version"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"newversion"},"Message"),i.a.createElement(Oi.f,{fullWidth:!0,id:"message",placeholder:"Enter your message"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Ei,{fileList:o,handleSelectedFiles:l,handleReset:n}),r?i.a.createElement(pi.a,{variant:"determinate",value:c}):null)),i.a.createElement(Dr.a,null,i.a.createElement(Ua.a,{onClick:t,color:"primary",type:"button"},"Cancel"),i.a.createElement(Ua.a,{color:"primary",onClick:this.handleSubmit.bind(this),disabled:!r,type:"submit"},"Upload"))))}}]),t}(r.Component),Ki=Object(u.b)(function(e){return{open:e.visibleDialogs.ADD_NEW_VERSION,item:e.items.selected[0],canUpload:!!e.upload.fileList&&e.upload.fileList.length>0,fileList:e.upload.fileList,progress:e.upload.progress,blobUrl:e.blob||"",initialHost:e.account.host||"",initialPath:e.path,selectedItems:e.items.selected}},function(e){return{handleClose:function(t){e($t())},handleSubmit:function(t,n){var a=n.item,r=n.currentVersion,i=n.nextVersion;t.preventDefault(),e(At(a,r,i))},handleSelectedFiles:function(t){var n=t.target.files;e(gn(n))},handleReset:function(){}}})(qi),Ji=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(L.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={lastBlobUrl:null,currentVersion:"1.0",metadatainfo:{keyword:"",discipline:""},name:n.props.selectedItems[0]?n.props.selectedItems[0].name:""},n.handleTextChange=function(e){return function(t){"keyword"==e&&(n.state.metadatainfo.keyword=t.target.value),"discipline"==e&&(n.state.metadatainfo.discipline=t.target.value),n.setState(Object(h.a)({},n.state,Object(m.a)({},name,t.target.value)))}},n}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;this.props.blobUrl!==this.state.lastBlobUrl&&(this.setState({lastBlobUrl:this.props.blobUrl}),this.setState({loading:!0}),this.props.blobUrl&&fetch(this.props.blobUrl).then(function(e){return e.text()}).then(function(){var t=Object(N.a)(I.a.mark(function t(n){var a,r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.initialHost+"/"+e.props.initialPath.join("/")+"/"+e.props.selectedItems[0].name,r=ne(n,a),e.setState({name:a,metadatainfo:r,content:n}),e.setState({loading:!1});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()))}},{key:"handleSubmit",value:function(e){var t=this.props.item,n=this.state.metadatainfo;t&&this.props.handleSubmit(e,{item:t,metadatainfo:n})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e.open;e.initialHost,e.initialPath;return i.a.createElement(Tr.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-upload",fullWidth:!0,maxWidth:"sm"},i.a.createElement("form",null,i.a.createElement(Ur.a,{id:"form-dialog-upload"},"Expose Metadata"),i.a.createElement(Nr.a,null,this.state.name,i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Keyword"),i.a.createElement(Oi.f,{value:this.state.metadatainfo.keyword,onChange:this.handleTextChange("keyword"),id:"keyword","aria-describedby":"my-helper-text"})),i.a.createElement(Oi.d,{fullWidth:!0},i.a.createElement(Oi.g,{htmlFor:"my-input"},"Discipline"),i.a.createElement(Oi.f,{value:this.state.metadatainfo.discipline,disabled:!0,onChange:this.handleTextChange("discipline"),id:"discipline","aria-describedby":"my-helper-text"}))),i.a.createElement(Dr.a,null,i.a.createElement(Oi.a,{onClick:t,color:"primary",type:"button"},"Close"),i.a.createElement(Oi.a,{color:"primary",onClick:this.handleSubmit.bind(this),type:"submit"},"Expose"))))}}]),t}(r.Component),Zi=Object(u.b)(function(e){return{open:e.visibleDialogs.EXPOSE_METADATA,blobUrl:e.blob||"",item:e.items.selected[0],initialHost:e.account.host||"",initialPath:e.path,selectedItems:e.items.selected}},function(e){return{handleClose:function(t){e(jn(a.EXPOSE_METADATA))},handleSubmit:function(t,n){var a=n.item,r=n.metadatainfo;t.preventDefault(),e(Tt(a,r))},handleSelectedFiles:function(e){e.target.files},handleReset:function(){}}})(Ji);var Qi=function(){return i.a.createElement("div",{className:"Dialogs"},i.a.createElement(zr,null),i.a.createElement(Yr,null),i.a.createElement(Jr,null),i.a.createElement(ti,null),i.a.createElement(ai,null),i.a.createElement(ii,null),i.a.createElement(hi,null),i.a.createElement(di,null),i.a.createElement(oi,null),i.a.createElement(gi,null),i.a.createElement(Ni,null),i.a.createElement(Ki,null),i.a.createElement(Zi,null),i.a.createElement($i,null))},ec=n(249),tc=n.n(ec),nc=n(184),ac=n.n(nc),rc=n(408),ic=n.n(rc),cc=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.errorMsg,a=e.handleClose,r=e.open,c=e.notificationDuration;return i.a.createElement("div",null,i.a.createElement(ac.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:r,autoHideDuration:c,onClose:a,ContentProps:{"aria-describedby":"message-id"},message:i.a.createElement("span",{id:"message-id"},n),action:[i.a.createElement(ua.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:a},i.a.createElement(ic.a,null))]}))}}]),t}(i.a.Component),oc=Object(u.b)(function(e){return{open:!!e.errorMessage,errorMsg:e.errorMessage,notificationDuration:6e4}},function(e){return{handleClose:function(){e(Sn(""))}}})(Object(zn.withStyles)(function(e){return Object(zn.createStyles)({close:{padding:e.spacing.unit/2}})})(cc)),lc=Object(zn.createMuiTheme)({palette:{primary:tc.a},typography:{useNextVariants:!0}}),uc=function(e){function t(){return Object(S.a)(this,t),Object(L.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.init()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(zn.MuiThemeProvider,{theme:lc},i.a.createElement("div",{onClick:this.props.handleHideContextMenu,onContextMenu:this.props.handleHideContextMenu},i.a.createElement(Fa,null),i.a.createElement(Qn,null),i.a.createElement(_r,null),i.a.createElement(oc,null),i.a.createElement(Qi,null))),i.a.createElement(Gr,null))}}]),t}(r.Component),sc=Object(u.b)(function(){return{}},function(e){return{init:function(){e(function(e,t){e(St()),e(kn(a.CHOOSE_LOCATION))})},handleHideContextMenu:function(t){var n=t.target;"INPUT"===n.tagName||/label/i.test(n.className)||t.preventDefault(),e(xn())}}})(uc),hc=(n(876),n(877),Object(s.d)(j,Object(s.a)(l.a)));o.a.render(i.a.createElement(u.a,{store:hc},i.a.createElement(sc,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");w?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):x(t,e)})}}({onUpdate:function(e){console.group("serviceWorker.onUpdate"),console.log(e),console.groupEnd()},onSuccess:function(e){console.group("serviceWorker.onSuccess"),console.log(e),console.groupEnd()}})}},[[460,1,2]]]);
//# sourceMappingURL=main.4d61f4ef.chunk.js.map